{"version":3,"file":null,"sources":["../node_modules/reo/dist/reo.js"],"sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.reo = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n// shim for es5\nvar slice = [].slice;\nvar tstr = ({}).toString;\n\nfunction extend(o1, o2 ){\n  for(var i in o2) { if( o1[i] === undefined){\n    o1[i] = o2[i];\n  } }\n  return o2;\n}\n\n\nvar shim = function(){\n  // String proto ;\n  extend(String.prototype, {\n    trim: function(){\n      return this.replace(/^\\s+|\\s+$/g, '');\n    }\n  });\n\n\n  // Array proto;\n  extend(Array.prototype, {\n    indexOf: function(obj, from){\n      var this$1 = this;\n\n      from = from || 0;\n      for (var i = from, len = this.length; i < len; i++) {\n        if (this$1[i] === obj) { return i; }\n      }\n      return -1;\n    },\n    // polyfill from MDN \n    // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\n    forEach: function(callback, ctx){\n      var k = 0;\n\n      // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n      var O = Object(this);\n\n      var len = O.length >>> 0; \n\n      if ( typeof callback !== \"function\" ) {\n        throw new TypeError( callback + \" is not a function\" );\n      }\n\n      // 7. Repeat, while k < len\n      while( k < len ) {\n\n        var kValue;\n\n        if ( k in O ) {\n\n          kValue = O[ k ];\n\n          callback.call( ctx, kValue, k, O );\n        }\n        k++;\n      }\n    },\n    // @deprecated\n    //  will be removed at 0.5.0\n    filter: function(fun, context){\n\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (typeof fun !== \"function\")\n        { throw new TypeError(); }\n\n      var res = [];\n      for (var i = 0; i < len; i++)\n      {\n        if (i in t)\n        {\n          var val = t[i];\n          if (fun.call(context, val, i, t))\n            { res.push(val); }\n        }\n      }\n\n      return res;\n    }\n  });\n\n  // Function proto;\n  extend(Function.prototype, {\n    bind: function(context){\n      var fn = this;\n      var preArgs = slice.call(arguments, 1);\n      return function(){\n        var args = preArgs.concat(slice.call(arguments));\n        return fn.apply(context, args);\n      }\n    }\n  });\n  \n  // Array\n  extend(Array, {\n    isArray: function(arr){\n      return tstr.call(arr) === \"[object Array]\";\n    }\n  });\n};\n\n// http://stackoverflow.com/questions/1354064/how-to-convert-characters-to-html-entities-using-plain-javascript\nvar entities = {\n  'quot':34, \n  'amp':38, \n  'apos':39, \n  'lt':60, \n  'gt':62, \n  'nbsp':160, \n  'iexcl':161, \n  'cent':162, \n  'pound':163, \n  'curren':164, \n  'yen':165, \n  'brvbar':166, \n  'sect':167, \n  'uml':168, \n  'copy':169, \n  'ordf':170, \n  'laquo':171, \n  'not':172, \n  'shy':173, \n  'reg':174, \n  'macr':175, \n  'deg':176, \n  'plusmn':177, \n  'sup2':178, \n  'sup3':179, \n  'acute':180, \n  'micro':181, \n  'para':182, \n  'middot':183, \n  'cedil':184, \n  'sup1':185, \n  'ordm':186, \n  'raquo':187, \n  'frac14':188, \n  'frac12':189, \n  'frac34':190, \n  'iquest':191, \n  'Agrave':192, \n  'Aacute':193, \n  'Acirc':194, \n  'Atilde':195, \n  'Auml':196, \n  'Aring':197, \n  'AElig':198, \n  'Ccedil':199, \n  'Egrave':200, \n  'Eacute':201, \n  'Ecirc':202, \n  'Euml':203, \n  'Igrave':204, \n  'Iacute':205, \n  'Icirc':206, \n  'Iuml':207, \n  'ETH':208, \n  'Ntilde':209, \n  'Ograve':210, \n  'Oacute':211, \n  'Ocirc':212, \n  'Otilde':213, \n  'Ouml':214, \n  'times':215, \n  'Oslash':216, \n  'Ugrave':217, \n  'Uacute':218, \n  'Ucirc':219, \n  'Uuml':220, \n  'Yacute':221, \n  'THORN':222, \n  'szlig':223, \n  'agrave':224, \n  'aacute':225, \n  'acirc':226, \n  'atilde':227, \n  'auml':228, \n  'aring':229, \n  'aelig':230, \n  'ccedil':231, \n  'egrave':232, \n  'eacute':233, \n  'ecirc':234, \n  'euml':235, \n  'igrave':236, \n  'iacute':237, \n  'icirc':238, \n  'iuml':239, \n  'eth':240, \n  'ntilde':241, \n  'ograve':242, \n  'oacute':243, \n  'ocirc':244, \n  'otilde':245, \n  'ouml':246, \n  'divide':247, \n  'oslash':248, \n  'ugrave':249, \n  'uacute':250, \n  'ucirc':251, \n  'uuml':252, \n  'yacute':253, \n  'thorn':254, \n  'yuml':255, \n  'fnof':402, \n  'Alpha':913, \n  'Beta':914, \n  'Gamma':915, \n  'Delta':916, \n  'Epsilon':917, \n  'Zeta':918, \n  'Eta':919, \n  'Theta':920, \n  'Iota':921, \n  'Kappa':922, \n  'Lambda':923, \n  'Mu':924, \n  'Nu':925, \n  'Xi':926, \n  'Omicron':927, \n  'Pi':928, \n  'Rho':929, \n  'Sigma':931, \n  'Tau':932, \n  'Upsilon':933, \n  'Phi':934, \n  'Chi':935, \n  'Psi':936, \n  'Omega':937, \n  'alpha':945, \n  'beta':946, \n  'gamma':947, \n  'delta':948, \n  'epsilon':949, \n  'zeta':950, \n  'eta':951, \n  'theta':952, \n  'iota':953, \n  'kappa':954, \n  'lambda':955, \n  'mu':956, \n  'nu':957, \n  'xi':958, \n  'omicron':959, \n  'pi':960, \n  'rho':961, \n  'sigmaf':962, \n  'sigma':963, \n  'tau':964, \n  'upsilon':965, \n  'phi':966, \n  'chi':967, \n  'psi':968, \n  'omega':969, \n  'thetasym':977, \n  'upsih':978, \n  'piv':982, \n  'bull':8226, \n  'hellip':8230, \n  'prime':8242, \n  'Prime':8243, \n  'oline':8254, \n  'frasl':8260, \n  'weierp':8472, \n  'image':8465, \n  'real':8476, \n  'trade':8482, \n  'alefsym':8501, \n  'larr':8592, \n  'uarr':8593, \n  'rarr':8594, \n  'darr':8595, \n  'harr':8596, \n  'crarr':8629, \n  'lArr':8656, \n  'uArr':8657, \n  'rArr':8658, \n  'dArr':8659, \n  'hArr':8660, \n  'forall':8704, \n  'part':8706, \n  'exist':8707, \n  'empty':8709, \n  'nabla':8711, \n  'isin':8712, \n  'notin':8713, \n  'ni':8715, \n  'prod':8719, \n  'sum':8721, \n  'minus':8722, \n  'lowast':8727, \n  'radic':8730, \n  'prop':8733, \n  'infin':8734, \n  'ang':8736, \n  'and':8743, \n  'or':8744, \n  'cap':8745, \n  'cup':8746, \n  'int':8747, \n  'there4':8756, \n  'sim':8764, \n  'cong':8773, \n  'asymp':8776, \n  'ne':8800, \n  'equiv':8801, \n  'le':8804, \n  'ge':8805, \n  'sub':8834, \n  'sup':8835, \n  'nsub':8836, \n  'sube':8838, \n  'supe':8839, \n  'oplus':8853, \n  'otimes':8855, \n  'perp':8869, \n  'sdot':8901, \n  'lceil':8968, \n  'rceil':8969, \n  'lfloor':8970, \n  'rfloor':8971, \n  'lang':9001, \n  'rang':9002, \n  'loz':9674, \n  'spades':9824, \n  'clubs':9827, \n  'hearts':9829, \n  'diams':9830, \n  'OElig':338, \n  'oelig':339, \n  'Scaron':352, \n  'scaron':353, \n  'Yuml':376, \n  'circ':710, \n  'tilde':732, \n  'ensp':8194, \n  'emsp':8195, \n  'thinsp':8201, \n  'zwnj':8204, \n  'zwj':8205, \n  'lrm':8206, \n  'rlm':8207, \n  'ndash':8211, \n  'mdash':8212, \n  'lsquo':8216, \n  'rsquo':8217, \n  'sbquo':8218, \n  'ldquo':8220, \n  'rdquo':8221, \n  'bdquo':8222, \n  'dagger':8224, \n  'Dagger':8225, \n  'permil':8240, \n  'lsaquo':8249, \n  'rsaquo':8250, \n  'euro':8364\n};\n\n\n\nvar entities_1  = entities;\n\nvar util = createCommonjsModule(function (module) {\nshim();\n\n\n\nvar _  = module.exports;\nvar entities = entities_1;\nvar slice = [].slice;\nvar o2str = ({}).toString;\nvar win = typeof window !=='undefined'? window: commonjsGlobal;\nvar MAX_PRIORITY = 9999;\n\n\n_.noop = function(){};\n_.uid = (function(){\n  var _uid=0;\n  return function(){\n    return _uid++;\n  }\n})();\n\n_.extend = function( o1, o2, override ){\n  for(var i in o2) { if (o2.hasOwnProperty(i)){\n    if( o1[i] === undefined || override === true ){\n      o1[i] = o2[i];\n    }\n  } }\n  return o1;\n};\n\n_.keys = Object.keys? Object.keys: function(obj){\n  var res = [];\n  for(var i in obj) { if(obj.hasOwnProperty(i)){\n    res.push(i);\n  } }\n  return res;\n};\n\n_.some = function(list, fn){\n  for(var i =0,len = list.length; i < len; i++){\n    if(fn(list[i])) { return true }\n  }\n};\n\n_.varName = 'd';\n_.setName = 'p_';\n_.ctxName = 'c';\n_.extName = 'e';\n\n_.rWord = /^[\\$\\w]+$/;\n_.rSimpleAccessor = /^[\\$\\w]+(\\.[\\$\\w]+)*$/;\n\n_.nextTick = typeof setImmediate === 'function'? \n  setImmediate.bind(win) : \n  function(callback) {\n    setTimeout(callback, 0); \n  };\n\n\n\n_.prefix = \"'use strict';var \" + _.varName + \"=\" + _.ctxName + \".data;\" +  _.extName  + \"=\" + _.extName + \"||'';\";\n\n\n_.slice = function(obj, start, end){\n  var res = [];\n  for(var i = start || 0, len = end || obj.length; i < len; i++){\n    res.push(obj[i]);\n  }\n  return res;\n};\n\n// beacuse slice and toLowerCase is expensive. we handle undefined and null in another way\n_.typeOf = function (o) {\n  return o == null ? String(o) :o2str.call(o).slice(8, -1).toLowerCase();\n};\n\n\n\n\n_.makePredicate = function makePredicate(words, prefix) {\n    if (typeof words === \"string\") {\n        words = words.split(\" \");\n    }\n    var f = \"\",\n    cats = [];\n    out: for (var i = 0; i < words.length; ++i) {\n        for (var j = 0; j < cats.length; ++j){\n          if (cats[j][0].length === words[i].length) {\n              cats[j].push(words[i]);\n              continue out;\n          }\n        }\n        cats.push([words[i]]);\n    }\n    function compareTo(arr) {\n        if (arr.length === 1) { return f += \"return str === '\" + arr[0] + \"';\"; }\n        f += \"switch(str){\";\n        for (var i = 0; i < arr.length; ++i){\n           f += \"case '\" + arr[i] + \"':\";\n        }\n        f += \"return true}return false;\";\n    }\n\n    // When there are more than three length categories, an outer\n    // switch first dispatches on the lengths, to save on comparisons.\n    if (cats.length > 3) {\n        cats.sort(function(a, b) {\n            return b.length - a.length;\n        });\n        f += \"switch(str.length){\";\n        for (var i = 0; i < cats.length; ++i) {\n            var cat = cats[i];\n            f += \"case \" + cat[0].length + \":\";\n            compareTo(cat);\n        }\n        f += \"}\";\n\n        // Otherwise, simply generate a flat `switch` statement.\n    } else {\n        compareTo(words);\n    }\n    return new Function(\"str\", f);\n};\n\n\n_.trackErrorPos = (function (){\n  // linebreak\n  var lb = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n  var minRange = 20, maxRange = 20;\n  function findLine(lines, pos){\n    var tmpLen = 0;\n    for(var i = 0,len = lines.length; i < len; i++){\n      var lineLen = (lines[i] || \"\").length;\n\n      if(tmpLen + lineLen > pos) {\n        return {num: i, line: lines[i], start: pos - i - tmpLen , prev:lines[i-1], next: lines[i+1] };\n      }\n      // 1 is for the linebreak\n      tmpLen = tmpLen + lineLen ;\n    }\n  }\n  function formatLine(str,  start, num, target){\n    var len = str.length;\n    var min = start - minRange;\n    if(min < 0) { min = 0; }\n    var max = start + maxRange;\n    if(max > len) { max = len; }\n\n    var remain = str.slice(min, max);\n    var prefix = \"[\" +(num+1) + \"] \" + (min > 0? \"..\" : \"\");\n    var postfix = max < len ? \"..\": \"\";\n    var res = prefix + remain + postfix;\n    if(target) { res += \"\\n\" + new Array(start-min + prefix.length + 1).join(\" \") + \"^^^\"; }\n    return res;\n  }\n  return function(input, pos){\n    if(pos > input.length-1) { pos = input.length-1; }\n    lb.lastIndex = 0;\n    var lines = input.split(lb);\n    var line = findLine(lines,pos);\n    var start = line.start, num = line.num;\n\n    return (line.prev? formatLine(line.prev, start, num-1 ) + '\\n': '' ) + \n      formatLine(line.line, start, num, true) + '\\n' + \n      (line.next? formatLine(line.next, start, num+1 ) + '\\n': '' );\n\n  }\n})();\n\n\nvar ignoredRef = /\\((\\?\\!|\\?\\:|\\?\\=)/g;\n_.findSubCapture = function (regStr) {\n  var left = 0,\n    right = 0,\n    len = regStr.length,\n    ignored = regStr.match(ignoredRef); // ignored uncapture\n  if(ignored) { ignored = ignored.length; }\n  else { ignored = 0; }\n  for (; len--;) {\n    var letter = regStr.charAt(len);\n    if (len === 0 || regStr.charAt(len - 1) !== \"\\\\\" ) { \n      if (letter === \"(\") { left++; }\n      if (letter === \")\") { right++; }\n    }\n  }\n  if (left !== right) { throw \"RegExp: \"+ regStr + \"'s bracket is not marched\"; }\n  else { return left - ignored; }\n};\n\n\n_.escapeRegExp = function( str){// Credit: XRegExp 0.6.1 (c) 2007-2008 Steven Levithan <http://stevenlevithan.com/regex/xregexp/> MIT License\n  return str.replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, function(match){\n    return '\\\\' + match;\n  });\n};\n\n\nvar rEntity = new RegExp(\"&(?:(#x[0-9a-fA-F]+)|(#[0-9]+)|(\" + _.keys(entities).join('|') + '));', 'gi');\n\n_.convertEntity = function(chr){\n\n  return (\"\" + chr).replace(rEntity, function(all, hex, dec, capture){\n    var charCode;\n    if( dec ) { charCode = parseInt( dec.slice(1), 10 ); }\n    else if( hex ) { charCode = parseInt( hex.slice(2), 16 ); }\n    else { charCode = entities[capture]; }\n\n    return String.fromCharCode( charCode )\n  });\n\n};\n\n\n// simple get accessor\n\n_.createObject = Object.create? function(o){\n  return Object.create(o || null)\n}: (function(){\n    function Temp() {}\n    return function(o){\n      if(!o) { return {} }\n      Temp.prototype = o;\n      var obj = new Temp();\n      Temp.prototype = null; // 不要保持一个 O 的杂散引用（a stray reference）...\n      return obj\n    }\n})();\n\n_.createProto = function(fn, o){\n    function Foo() { this.constructor = fn;}\n    Foo.prototype = o;\n    return (fn.prototype = new Foo());\n};\n\n\n_.removeOne = function(list , filter){\n  var len = list.length;\n  for(;len--;){\n    if(filter(list[len])) {\n      list.splice(len, 1);\n      return;\n    }\n  }\n};\n\n\n/**\nclone\n*/\n_.clone = function clone(obj){\n  if(!obj || (typeof obj !== 'object' )) { return obj; }\n  if(Array.isArray(obj)){\n    var cloned = [];\n    for(var i=0,len = obj.length; i< len;i++){\n      cloned[i] = obj[i];\n    }\n    return cloned;\n  }else{\n    var cloned = {};\n    for(var i in obj) { if(obj.hasOwnProperty(i)){\n      cloned[i] = obj[i];\n    } }\n    return cloned;\n  }\n};\n\n_.equals = function(now, old){\n  var type = typeof now;\n  if(type === 'number' && typeof old === 'number'&& isNaN(now) && isNaN(old)) { return true }\n  return now === old;\n};\n\nvar dash = /-([a-z])/g;\n_.camelCase = function(str){\n  return str.replace(dash, function(all, capture){\n    return capture.toUpperCase();\n  })\n};\n\n\n\n_.throttle = function throttle(func, wait){\n  var wait = wait || 100;\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  var later = function() {\n    previous = +new Date;\n    timeout = null;\n    result = func.apply(context, args);\n    context = args = null;\n  };\n  return function() {\n    var now = + new Date;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      clearTimeout(timeout);\n      timeout = null;\n      previous = now;\n      result = func.apply(context, args);\n      context = args = null;\n    } else if (!timeout) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n};\n\n// hogan escape\n// ==============\n_.escape = (function(){\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  return function(str) {\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n})();\n\n_.cache = function(max){\n  max = max || 1000;\n  var keys = [],\n      cache = {};\n  return {\n    set: function(key, value) {\n      if (keys.length > this.max) {\n        cache[keys.shift()] = undefined;\n      }\n      // \n      if(cache[key] === undefined){\n        keys.push(key);\n      }\n      cache[key] = value;\n      return value;\n    },\n    get: function(key) {\n      if (key === undefined) { return cache; }\n      return cache[key];\n    },\n    max: max,\n    len:function(){\n      return keys.length;\n    }\n  };\n};\n\n// // setup the raw Expression\n\n\n// handle the same logic on component's `on-*` and element's `on-*`\n// return the fire object\n_.handleEvent = function(value, type ){\n  var self = this, evaluate;\n  if(value.type === 'expression'){ // if is expression, go evaluated way\n    evaluate = value.get;\n  }\n  if(evaluate){\n    return function fire(obj){\n      self.$update(function(){\n        var data = this.data;\n        data.$event = obj;\n        var res = evaluate(self);\n        if(res === false && obj && obj.preventDefault) { obj.preventDefault(); }\n        data.$event = undefined;\n      });\n\n    }\n  }else{\n    return function fire(){\n      var args = _.slice(arguments);\n      args.unshift(value);\n      self.$update(function(){\n        self.$emit.apply(self, args);\n      });\n    }\n  }\n};\n\n// only call once\n_.once = function(fn){\n  var time = 0;\n  return function(){\n    if( time++ === 0) { fn.apply(this, arguments); }\n  }\n};\n\n_.fixObjStr = function(str){\n  if(str.trim().indexOf('{') !== 0){\n    return '{' + str + '}';\n  }\n  return str;\n};\n\n\n_.map= function(array, callback){\n  var res = [];\n  for (var i = 0, len = array.length; i < len; i++) {\n    res.push(callback(array[i], i));\n  }\n  return res;\n};\n\nfunction log(msg, type){\n  if(typeof console !== \"undefined\")  { console[type || \"log\"](msg); }\n}\n\n_.log = log;\n\n\n_.normListener = function( events  ){\n    var eventListeners = [];\n    var pType = _.typeOf( events );\n    if( pType === 'array' ){\n      return events;\n    }else if ( pType === 'object' ){\n      for( var i in events ) { if ( events.hasOwnProperty(i) ){\n        eventListeners.push({\n          type: i,\n          listener: events[i]\n        });\n      } }\n    }\n    return eventListeners;\n};\n\n\n//http://www.w3.org/html/wg/drafts/html/master/single-page.html#void-elements\n_.isVoidTag = _.makePredicate(\"area base br col embed hr img input keygen link menuitem meta param source track wbr r-content\");\n_.isBooleanAttr = _.makePredicate('selected checked disabled readonly required open autofocus controls autoplay compact loop defer multiple');\n\n\n_.isExpr = function(expr){\n  return expr && expr.type === 'expression';\n};\n// @TODO: make it more strict\n_.isGroup = function(group){\n  return group.inject || group.$inject;\n};\n\n_.getCompileFn = function(source, ctx, options){\n  return ctx.$compile.bind(ctx,source, options)\n};\n\n// remove directive param from AST\n_.fixTagAST = function( tagAST, Component ){\n\n  if( tagAST.touched ) { return; }\n\n  var attrs = tagAST.attrs;\n\n  if( !attrs ) { return; }\n\n  // Maybe multiple directive need same param, \n  // We place all param in totalParamMap\n  var len = attrs.length;\n  if(!len) { return; }\n  var directives=[], otherAttrMap = {};\n  for(;len--;){\n\n    var attr = attrs[ len ];\n\n\n    // @IE fix IE9- input type can't assign after value\n    if(attr.name === 'type') { attr.priority = MAX_PRIORITY+1; }\n\n    var directive = Component.directive( attr.name );\n    if( directive ) {\n\n      attr.priority = directive.priority || 1;\n      attr.directive = true;\n      directives.push(attr);\n\n    }else if(attr.type === 'attribute'){\n      otherAttrMap[attr.name] = attr.value;\n    }\n  }\n\n  directives.forEach( function( attr ){\n    var directive = Component.directive(attr.name);\n    var param = directive.param;\n    if(param && param.length){\n      attr.param = {};\n      param.forEach(function( name ){\n        if( name in otherAttrMap ){\n          attr.param[name] = otherAttrMap[name] === undefined? true: otherAttrMap[name];\n          _.removeOne(attrs, function(attr){\n            return attr.name === name\n          });\n        }\n      });\n    }\n  });\n\n  attrs.sort(function(a1, a2){\n    \n    var p1 = a1.priority;\n    var p2 = a2.priority;\n\n    if( p1 == null ) { p1 = MAX_PRIORITY; }\n    if( p2 == null ) { p2 = MAX_PRIORITY; }\n\n    return p2 - p1;\n\n  });\n\n  tagAST.touched = true;\n};\n\n_.findItem = function(list, filter){\n  if(!list || !list.length) { return; }\n  var len = list.length;\n  while(len--){\n    if(filter(list[len])) { return list[len] }\n  }\n};\n\n_.getParamObj = function(component, param){\n  var paramObj = {};\n  if(param) {\n    for(var i in param) { if(param.hasOwnProperty(i)){\n      var value = param[i];\n      paramObj[i] =  value && value.type==='expression'? component.$get(value): value;\n    } }\n  }\n  return paramObj;\n};\n});\n\n// some fixture test;\n// ---------------\nvar _ = util;\nvar svg = (function(){\n  return typeof document !== \"undefined\" && document.implementation.hasFeature( \"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\" );\n})();\n\n\nvar browser = typeof document !== \"undefined\" && document.nodeType;\n// whether have component in initializing\nvar exprCache = _.cache(1000);\nvar isRunning = false;\n\nvar env = {\n\tsvg: svg,\n\tbrowser: browser,\n\texprCache: exprCache,\n\tisRunning: isRunning\n};\n\nvar config$1 = {\n  'BEGIN': '{',\n  'END': '}',\n  'PRECOMPILE': false\n};\n\nvar _$2 = util;\nvar config$4 = config$1;\n\n// some custom tag  will conflict with the Lexer progress\nvar conflictTag = {\"}\": \"{\", \"]\": \"[\"};\nvar map1;\nvar map2;\n// some macro for lexer\nvar macro = {\n  'NAME': /(?:[:_A-Za-z][-\\.:_0-9A-Za-z]*)/,\n  'IDENT': /[\\$_A-Za-z][_0-9A-Za-z\\$]*/,\n  'SPACE': /[\\r\\n\\t\\f ]/\n};\n\n\nvar test = /a|(b)/.exec(\"a\");\nvar testSubCapure = test && test[1] === undefined? \n  function(str){ return str !== undefined }\n  :function(str){return !!str};\n\nfunction wrapHander(handler){\n  return function(all){\n    return {type: handler, value: all }\n  }\n}\n\nfunction Lexer$1(input, opts){\n  if(conflictTag[config$4.END]){\n    this.markStart = conflictTag[config$4.END];\n    this.markEnd = config$4.END;\n  }\n\n  this.input = (input||\"\").trim();\n  this.opts = opts || {};\n  this.map = this.opts.mode !== 2?  map1: map2;\n  this.states = [\"INIT\"];\n  if(opts && opts.expression){\n     this.states.push(\"JST\");\n     this.expression = true;\n  }\n}\n\nvar lo = Lexer$1.prototype;\n\n\nlo.lex = function(str){\n  var this$1 = this;\n\n  str = (str || this.input).trim();\n  var tokens = [], split, test,mlen, token, state;\n  this.input = str, \n  this.marks = 0;\n  // init the pos index\n  this.index=0;\n  var i = 0;\n  while(str){\n    i++;\n    state = this$1.state();\n    split = this$1.map[state]; \n    test = split.TRUNK.exec(str);\n    if(!test){\n      this$1.error('Unrecoginized Token');\n    }\n    mlen = test[0].length;\n    str = str.slice(mlen);\n    token = this$1._process.call(this$1, test, split, str);\n    if(token) { tokens.push(token); }\n    this$1.index += mlen;\n    // if(state == 'TAG' || state == 'JST') str = this.skipspace(str);\n  }\n\n  tokens.push({type: 'EOF'});\n\n  return tokens;\n};\n\nlo.error = function(msg){\n  throw  Error(\"Parse Error: \" + msg +  ':\\n' + _$2.trackErrorPos(this.input, this.index));\n};\n\nlo._process = function(args, split,str){\n  var this$1 = this;\n\n  // console.log(args.join(\",\"), this.state())\n  var links = split.links, marched = false, token;\n\n  for(var len = links.length, i=0;i<len ;i++){\n    var link = links[i],\n      handler = link[2],\n      index = link[0];\n    // if(args[6] === '>' && index === 6) console.log('haha')\n    if(testSubCapure(args[index])) {\n      marched = true;\n      if(handler){\n        token = handler.apply(this$1, args.slice(index, index + link[1]));\n        if(token)  { token.pos = this$1.index; }\n      }\n      break;\n    }\n  }\n  if(!marched){ // in ie lt8 . sub capture is \"\" but ont \n    switch(str.charAt(0)){\n      case \"<\":\n        this.enter(\"TAG\");\n        break;\n      default:\n        this.enter(\"JST\");\n        break;\n    }\n  }\n  return token;\n};\nlo.enter = function(state){\n  this.states.push(state);\n  return this;\n};\n\nlo.state = function(){\n  var states = this.states;\n  return states[states.length-1];\n};\n\nlo.leave = function(state){\n  var states = this.states;\n  if(!state || states[states.length-1] === state) { states.pop(); }\n};\n\n\nLexer$1.setup = function(){\n  macro.END = config$4.END;\n  macro.BEGIN = config$4.BEGIN;\n  //\n  map1 = genMap([\n    // INIT\n    rules.ENTER_JST,\n    rules.ENTER_TAG,\n    rules.TEXT,\n\n    //TAG\n    rules.TAG_NAME,\n    rules.TAG_OPEN,\n    rules.TAG_CLOSE,\n    rules.TAG_PUNCHOR,\n    rules.TAG_ENTER_JST,\n    rules.TAG_UNQ_VALUE,\n    rules.TAG_STRING,\n    rules.TAG_SPACE,\n    rules.TAG_COMMENT,\n\n    // JST\n    rules.JST_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_COMMENT,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ]);\n\n  // ignored the tag-relative token\n  map2 = genMap([\n    // INIT no < restrict\n    rules.ENTER_JST2,\n    rules.TEXT,\n    // JST\n    rules.JST_COMMENT,\n    rules.JST_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ]);\n};\n\n\nfunction genMap(rules){\n  var rule, map = {}, sign;\n  for(var i = 0, len = rules.length; i < len ; i++){\n    rule = rules[i];\n    sign = rule[2] || 'INIT';\n    ( map[sign] || (map[sign] = {rules:[], links:[]}) ).rules.push(rule);\n  }\n  return setup(map);\n}\n\nfunction setup(map){\n  var split, rules, trunks, handler, reg, retain, rule;\n  function replaceFn(all, one){\n    return typeof macro[one] === 'string'? \n      _$2.escapeRegExp(macro[one]) \n      : String(macro[one]).slice(1,-1);\n  }\n\n  for(var i in map){\n\n    split = map[i];\n    split.curIndex = 1;\n    rules = split.rules;\n    trunks = [];\n\n    for(var j = 0,len = rules.length; j<len; j++){\n      rule = rules[j]; \n      reg = rule[0];\n      handler = rule[1];\n\n      if(typeof handler === 'string'){\n        handler = wrapHander(handler);\n      }\n      if(_$2.typeOf(reg) === 'regexp') { reg = reg.toString().slice(1, -1); }\n\n      reg = reg.replace(/\\{(\\w+)\\}/g, replaceFn);\n      retain = _$2.findSubCapture(reg) + 1; \n      split.links.push([split.curIndex, retain, handler]); \n      split.curIndex += retain;\n      trunks.push(reg);\n    }\n    split.TRUNK = new RegExp(\"^(?:(\" + trunks.join(\")|(\") + \"))\");\n  }\n  return map;\n}\n\nvar rules = {\n\n  // 1. INIT\n  // ---------------\n\n  // mode1's JST ENTER RULE\n  ENTER_JST: [/[^\\x00<]*?(?={BEGIN})/, function(all){\n    this.enter('JST');\n    if(all) { return {type: 'TEXT', value: all} }\n  }],\n\n  // mode2's JST ENTER RULE\n  ENTER_JST2: [/[^\\x00]*?(?={BEGIN})/, function(all){\n    this.enter('JST');\n    if(all) { return {type: 'TEXT', value: all} }\n  }],\n\n  ENTER_TAG: [/[^\\x00]*?(?=<[\\w\\/\\!])/, function(all){ \n    this.enter('TAG');\n    if(all) { return {type: 'TEXT', value: all} }\n  }],\n\n  TEXT: [/[^\\x00]+/, 'TEXT' ],\n\n  // 2. TAG\n  // --------------------\n  TAG_NAME: [/{NAME}/, 'NAME', 'TAG'],\n  TAG_UNQ_VALUE: [/[^\\{}&\"'=><`\\r\\n\\f\\t ]+/, 'UNQ', 'TAG'],\n\n  TAG_OPEN: [/<({NAME})\\s*/, function(all, one){ //\"\n    return {type: 'TAG_OPEN', value: one}\n  }, 'TAG'],\n  TAG_CLOSE: [/<\\/({NAME})[\\r\\n\\f\\t ]*>/, function(all, one){\n    this.leave();\n    return {type: 'TAG_CLOSE', value: one }\n  }, 'TAG'],\n\n    // mode2's JST ENTER RULE\n  TAG_ENTER_JST: [/(?={BEGIN})/, function(){\n    this.enter('JST');\n  }, 'TAG'],\n\n\n  TAG_PUNCHOR: [/[\\>\\/=&]/, function(all){\n    if(all === '>') { this.leave(); }\n    return {type: all, value: all }\n  }, 'TAG'],\n  TAG_STRING:  [ /'([^']*)'|\"([^\"]*)\\\"/, /*'*/  function(all, one, two){ \n    var value = one || two || \"\";\n\n    return {type: 'STRING', value: value}\n  }, 'TAG'],\n\n  TAG_SPACE: [/{SPACE}+/, null, 'TAG'],\n  TAG_COMMENT: [/<\\!--([^\\x00]*?)--\\>/, function(all){\n    this.leave();\n    // this.leave('TAG')\n  } ,'TAG'],\n\n  // 3. JST\n  // -------------------\n\n  JST_OPEN: ['{BEGIN}#{SPACE}*({IDENT})', function(all, name){\n    return {\n      type: 'OPEN',\n      value: name\n    }\n  }, 'JST'],\n  JST_LEAVE: [/{END}/, function(all){\n    if(this.markEnd === all && this.expression) { return {type: this.markEnd, value: this.markEnd}; }\n    if(!this.markEnd || !this.marks ){\n      this.firstEnterStart = false;\n      this.leave('JST');\n      return {type: 'END'}\n    }else{\n      this.marks--;\n      return {type: this.markEnd, value: this.markEnd}\n    }\n  }, 'JST'],\n  JST_CLOSE: [/{BEGIN}\\s*\\/({IDENT})\\s*{END}/, function(all, one){\n    this.leave('JST');\n    return {\n      type: 'CLOSE',\n      value: one\n    }\n  }, 'JST'],\n  JST_COMMENT: [/{BEGIN}\\!([^\\x00]*?)\\!{END}/, function(){\n    this.leave();\n  }, 'JST'],\n  JST_EXPR_OPEN: ['{BEGIN}',function(all, one){\n    if(all === this.markStart){\n      if(this.expression) { return { type: this.markStart, value: this.markStart }; }\n      if(this.firstEnterStart || this.marks){\n        this.marks++;\n        this.firstEnterStart = false;\n        return { type: this.markStart, value: this.markStart };\n      }else{\n        this.firstEnterStart = true;\n      }\n    }\n    return {\n      type: 'EXPR_OPEN',\n      escape: false\n    }\n\n  }, 'JST'],\n  JST_IDENT: ['{IDENT}', 'IDENT', 'JST'],\n  JST_SPACE: [/[ \\r\\n\\f]+/, null, 'JST'],\n  JST_PUNCHOR: [/[=!]?==|[-=><+*\\/%\\!]?\\=|\\|\\||&&|\\@\\(|\\.\\.|[<\\>\\[\\]\\(\\)\\-\\|\\{}\\+\\*\\/%?:\\.!,]/, function(all){\n    return { type: all, value: all }\n  },'JST'],\n\n  JST_STRING:  [ /'([^']*)'|\"([^\"]*)\"/, function(all, one, two){ //\"'\n    return {type: 'STRING', value: one || two || \"\"}\n  }, 'JST'],\n  JST_NUMBER: [/(?:[0-9]*\\.[0-9]+|[0-9]+)(e\\d+)?/, function(all){\n    return {type: 'NUMBER', value: parseFloat(all, 10)};\n  }, 'JST']\n};\n\n\n// setup when first config\nLexer$1.setup();\n\n\n\nvar Lexer_1 = Lexer$1;\n\nvar node$1 = {\n  element: function(name, attrs, children){\n    return {\n      type: 'element',\n      tag: name,\n      attrs: attrs,\n      children: children\n    }\n  },\n  attribute: function(name, value, mdf){\n    return {\n      type: 'attribute',\n      name: name,\n      value: value,\n      mdf: mdf\n    }\n  },\n  \"if\": function(test, consequent, alternate){\n    return {\n      type: 'if',\n      test: test,\n      consequent: consequent,\n      alternate: alternate\n    }\n  },\n  list: function(sequence, variable, body, alternate, track){\n    return {\n      type: 'list',\n      sequence: sequence,\n      alternate: alternate,\n      variable: variable,\n      body: body,\n      track: track\n    }\n  },\n  expression: function( body, setbody, constant, filters ){\n    return {\n      type: \"expression\",\n      body: body,\n      constant: constant || false,\n      setbody: setbody || false,\n      filters: filters\n    }\n  },\n  text: function(text){\n    return {\n      type: \"text\",\n      text: text\n    }\n  },\n  template: function(template){\n    return {\n      type: 'template',\n      content: template\n    }\n  }\n};\n\nvar _$3 = util;\n\nvar config$5 = config$1;\nvar node = node$1;\nvar Lexer$2 = Lexer_1;\nvar varName = _$3.varName;\nvar ctxName = _$3.ctxName;\nvar extName = _$3.extName;\nvar isPath = _$3.makePredicate(\"STRING IDENT NUMBER\");\nvar isKeyWord = _$3.makePredicate(\"true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object\");\n\n\n\n\nfunction Parser$1(input, opts){\n  opts = opts || {};\n\n  this.input = input;\n  this.tokens = new Lexer$2(input, opts).lex();\n  this.pos = 0;\n  this.length = this.tokens.length;\n}\n\n\nvar op = Parser$1.prototype;\n\n\nop.parse = function(){\n  this.pos = 0;\n  var res= this.program();\n  if(this.ll().type === 'TAG_CLOSE'){\n    this.error(\"You may got a unclosed Tag\");\n  }\n  return res;\n};\n\nop.ll =  function(k){\n  k = k || 1;\n  if(k < 0) { k = k + 1; }\n  var pos = this.pos + k - 1;\n  if(pos > this.length - 1){\n      return this.tokens[this.length-1];\n  }\n  return this.tokens[pos];\n};\n  // lookahead\nop.la = function(k){\n  return (this.ll(k) || '').type;\n};\n\nop.match = function(type, value){\n  var ll;\n  if(!(ll = this.eat(type, value))){\n    ll  = this.ll();\n    this.error('expect [' + type + (value == null? '':':'+ value) + ']\" -> got \"[' + ll.type + (value==null? '':':'+ll.value) + ']', ll.pos);\n  }else{\n    return ll;\n  }\n};\n\nop.error = function(msg, pos){\n  msg =  \"\\n【 parse failed 】 \" + msg +  ':\\n\\n' + _$3.trackErrorPos(this.input, typeof pos === 'number'? pos: this.ll().pos||0);\n  throw new Error(msg);\n};\n\nop.next = function(k){\n  k = k || 1;\n  this.pos += k;\n};\nop.eat = function(type, value){\n  var this$1 = this;\n\n  var ll = this.ll();\n  if(typeof type !== 'string'){\n    for(var len = type.length ; len--;){\n      if(ll.type === type[len]) {\n        this$1.next();\n        return ll;\n      }\n    }\n  }else{\n    if( ll.type === type && (typeof value === 'undefined' || ll.value === value) ){\n       this.next();\n       return ll;\n    }\n  }\n  return false;\n};\n\n// program\n//  :EOF\n//  | (statement)* EOF\nop.program = function(){\n  var this$1 = this;\n\n  var statements = [],  ll = this.ll();\n  while(ll.type !== 'EOF' && ll.type !=='TAG_CLOSE'){\n\n    statements.push(this$1.statement());\n    ll = this$1.ll();\n  }\n  // if(ll.type === 'TAG_CLOSE') this.error(\"You may have unmatched Tag\")\n  return statements;\n};\n\n// statement\n//  : xml\n//  | jst\n//  | text\nop.statement = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case 'NAME':\n    case 'TEXT':\n      var text = ll.value;\n      this.next();\n      while(ll = this.eat(['NAME', 'TEXT'])){\n        text += ll.value;\n      }\n      return node.text(text);\n    case 'TAG_OPEN':\n      return this.xml();\n    case 'OPEN': \n      return this.directive();\n    case 'EXPR_OPEN':\n      return this.interplation();\n    default:\n      this.error('Unexpected token: '+ this.la());\n  }\n};\n\n// xml \n// stag statement* TAG_CLOSE?(if self-closed tag)\nop.xml = function(){\n  var name, attrs, children, selfClosed;\n  name = this.match('TAG_OPEN').value;\n  attrs = this.attrs();\n  selfClosed = this.eat('/');\n  this.match('>');\n  if( !selfClosed && !_$3.isVoidTag(name) ){\n    children = this.program();\n    if(!this.eat('TAG_CLOSE', name)) { this.error('expect </'+name+'> got'+ 'no matched closeTag'); }\n  }\n  return node.element(name, attrs, children);\n};\n\n// xentity\n//  -rule(wrap attribute)\n//  -attribute\n//\n// __example__\n//  name = 1 |  \n//  ng-hide |\n//  on-click={{}} | \n//  {{#if name}}on-click={{xx}}{{#else}}on-tap={{}}{{/if}}\n\nop.xentity = function(ll){\n  var name = ll.value, value, modifier;\n  if(ll.type === 'NAME'){\n    //@ only for test\n    if(~name.indexOf('.')){\n      var tmp = name.split('.');\n      name = tmp[0];\n      modifier = tmp[1];\n\n    }\n    if( this.eat(\"=\") ) { value = this.attvalue(modifier); }\n    return node.attribute( name, value, modifier );\n  }else{\n    if( name !== 'if') { this.error(\"current version. ONLY RULE #if #else #elseif is valid in tag, the rule #\" + name + ' is invalid'); }\n    return this['if'](true);\n  }\n\n};\n\n// stag     ::=    '<' Name (S attr)* S? '>'  \n// attr    ::=     Name Eq attvalue\nop.attrs = function(isAttribute){\n  var this$1 = this;\n\n  var eat;\n  if(!isAttribute){\n    eat = [\"NAME\", \"OPEN\"];\n  }else{\n    eat = [\"NAME\"];\n  }\n\n  var attrs = [], ll;\n  while (ll = this.eat(eat)){\n    attrs.push(this$1.xentity( ll ));\n  }\n  return attrs;\n};\n\n// attvalue\n//  : STRING  \n//  | NAME\nop.attvalue = function(mdf){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"NAME\":\n    case \"UNQ\":\n    case \"STRING\":\n      this.next();\n      var value = ll.value;\n      if(~value.indexOf(config$5.BEGIN) && ~value.indexOf(config$5.END) && mdf!=='cmpl'){\n        var constant = true;\n        var parsed = new Parser$1(value, { mode: 2 }).parse();\n        if(parsed.length === 1 && parsed[0].type === 'expression') { return parsed[0]; }\n        var body = [];\n        parsed.forEach(function(item){\n          if(!item.constant) { constant=false; }\n          // silent the mutiple inteplation\n            body.push(item.body || \"'\" + item.text.replace(/'/g, \"\\\\'\") + \"'\");        \n        });\n        body = \"[\" + body.join(\",\") + \"].join('')\";\n        value = node.expression(body, null, constant);\n      }\n      return value;\n    case \"EXPR_OPEN\":\n      return this.interplation();\n    // case \"OPEN\":\n    //   if(ll.value === 'inc' || ll.value === 'include'){\n    //     this.next();\n    //     return this.inc();\n    //   }else{\n    //     this.error('attribute value only support inteplation and {#inc} statement')\n    //   }\n    //   break;\n    default:\n      this.error('Unexpected token: '+ this.la());\n  }\n};\n\n\n// {{#}}\nop.directive = function(){\n  var name = this.ll().value;\n  this.next();\n  if(typeof this[name] === 'function'){\n    return this[name]()\n  }else{\n    this.error('Undefined directive['+ name +']');\n  }\n};\n\n\n// {{}}\nop.interplation = function(){\n  this.match('EXPR_OPEN');\n  var res = this.expression(true);\n  this.match('END');\n  return res;\n};\n\n// {{~}}\nop.inc = op.include = function(){\n  var content = this.expression();\n  this.match('END');\n  return node.template(content);\n};\n\n// {{#if}}\nop[\"if\"] = function(tag){\n  var this$1 = this;\n\n  var test = this.expression();\n  var consequent = [], alternate=[];\n\n  var container = consequent;\n  var statement = !tag? \"statement\" : \"attrs\";\n\n  this.match('END');\n\n  var ll, close;\n  while( ! (close = this.eat('CLOSE')) ){\n    ll = this$1.ll();\n    if( ll.type === 'OPEN' ){\n      switch( ll.value ){\n        case 'else':\n          container = alternate;\n          this$1.next();\n          this$1.match( 'END' );\n          break;\n        case 'elseif':\n          this$1.next();\n          alternate.push( this$1[\"if\"](tag) );\n          return node['if']( test, consequent, alternate );\n        default:\n          container.push( this$1[statement](true) );\n      }\n    }else{\n      container.push(this$1[statement](true));\n    }\n  }\n  // if statement not matched\n  if(close.value !== \"if\") { this.error('Unmatched if directive'); }\n  return node[\"if\"](test, consequent, alternate);\n};\n\n\n// @mark   mustache syntax have natrure dis, canot with expression\n// {{#list}}\nop.list = function(){\n  var this$1 = this;\n\n  // sequence can be a list or hash\n  var sequence = this.expression(), variable, ll, track;\n  var consequent = [], alternate=[];\n  var container = consequent;\n\n  this.match('IDENT', 'as');\n\n  variable = this.match('IDENT').value;\n\n  if(this.eat('IDENT', 'by')){\n    if(this.eat('IDENT',variable + '_index')){\n      track = true;\n    }else{\n      track = this.expression();\n      if(track.constant){\n        // true is means constant, we handle it just like xxx_index.\n        track = true;\n      }\n    }\n  }\n\n  this.match('END');\n\n  while( !(ll = this.eat('CLOSE')) ){\n    if(this$1.eat('OPEN', 'else')){\n      container =  alternate;\n      this$1.match('END');\n    }else{\n      container.push(this$1.statement());\n    }\n  }\n  \n  if(ll.value !== 'list') { this.error('expect ' + 'list got ' + '/' + ll.value + ' ', ll.pos ); }\n  return node.list(sequence, variable, consequent, alternate, track);\n};\n\n\nop.expression = function(){\n  var expression;\n  if(this.eat('@(')){ //once bind\n    expression = this.expr();\n    expression.once = true;\n    this.match(')');\n  }else{\n    expression = this.expr();\n  }\n  return expression;\n};\n\nop.expr = function(){\n  this.depend = [];\n\n  var buffer = this.filter();\n\n  var body = buffer.get || buffer;\n  var setbody = buffer.set;\n  return node.expression(body, setbody, !this.depend.length, buffer.filters);\n};\n\n\n// filter\n// assign ('|' filtername[':' args]) * \nop.filter = function(){\n  var this$1 = this;\n\n  var left = this.assign();\n  var ll = this.eat('|');\n  var buffer = [], filters,setBuffer, prefix,\n    attr = \"t\", \n    set = left.set, get, \n    tmp = \"\";\n\n  if(ll){\n    if(set) {\n      setBuffer = [];\n      filters = [];\n    }\n\n    prefix = \"(function(\" + attr + \"){\";\n\n    do{\n      var filterName = this$1.match('IDENT').value;\n      tmp = attr + \" = \" + ctxName + \"._f_('\" + filterName + \"' ).get.call( \"+_$3.ctxName +\",\" + attr ;\n      if(this$1.eat(':')){\n        tmp +=\", \"+ this$1.arguments(\"|\").join(\",\") + \");\";\n      }else{\n        tmp += ');';\n      }\n      buffer.push(tmp);\n      \n      if(set){\n        // only in runtime ,we can detect  whether  the filter has a set function. \n        filters.push(filterName);\n        setBuffer.unshift( tmp.replace(\" ).get.call\", \" ).set.call\") );\n      }\n\n    }while(ll = this.eat('|'));\n    buffer.push(\"return \" + attr );\n    setBuffer && setBuffer.push(\"return \" + attr);\n\n    get =  prefix + buffer.join(\"\") + \"})(\"+left.get+\")\";\n    // we call back to value.\n    if(setBuffer){\n      // change _ss__(name, _p_) to _s__(name, filterFn(_p_));\n      set = set.replace(_$3.setName, \n        prefix + setBuffer.join(\"\") + \"})(\"+　_$3.setName　+\")\" );\n\n    }\n    // the set function is depend on the filter definition. if it have set method, the set will work\n    var ret = getset(get, set);\n    ret.filters = filters;\n    return ret;\n  }\n  return left;\n};\n\n// assign\n// left-hand-expr = condition\nop.assign = function(){\n  var left = this.condition(), ll;\n  if(ll = this.eat(['=', '+=', '-=', '*=', '/=', '%='])){\n    if(!left.set) { this.error('invalid lefthand expression in assignment expression'); }\n    return getset( left.set.replace( \",\" + _$3.setName, \",\" + this.condition().get ).replace(\"'='\", \"'\"+ll.type+\"'\"), left.set);\n    // return getset('(' + left.get + ll.type  + this.condition().get + ')', left.set);\n  }\n  return left;\n};\n\n// or\n// or ? assign : assign\nop.condition = function(){\n\n  var test = this.or();\n  if(this.eat('?')){\n    return getset([test.get + \"?\", \n      this.assign().get, \n      this.match(\":\").type, \n      this.assign().get].join(\"\"));\n  }\n\n  return test;\n};\n\n// and\n// and && or\nop.or = function(){\n\n  var left = this.and();\n\n  if(this.eat('||')){\n    return getset(left.get + '||' + this.or().get);\n  }\n\n  return left;\n};\n// equal\n// equal && and\nop.and = function(){\n\n  var left = this.equal();\n\n  if(this.eat('&&')){\n    return getset(left.get + '&&' + this.and().get);\n  }\n  return left;\n};\n// relation\n// \n// equal == relation\n// equal != relation\n// equal === relation\n// equal !== relation\nop.equal = function(){\n  var left = this.relation(), ll;\n  // @perf;\n  if( ll = this.eat(['==','!=', '===', '!=='])){\n    return getset(left.get + ll.type + this.equal().get);\n  }\n  return left\n};\n// relation < additive\n// relation > additive\n// relation <= additive\n// relation >= additive\n// relation in additive\nop.relation = function(){\n  var left = this.additive(), ll;\n  // @perf\n  if(ll = (this.eat(['<', '>', '>=', '<=']) || this.eat('IDENT', 'in') )){\n    return getset(left.get + ll.value + this.relation().get);\n  }\n  return left\n};\n// additive :\n// multive\n// additive + multive\n// additive - multive\nop.additive = function(){\n  var left = this.multive() ,ll;\n  if(ll= this.eat(['+','-']) ){\n    return getset(left.get + ll.value + this.additive().get);\n  }\n  return left\n};\n// multive :\n// unary\n// multive * unary\n// multive / unary\n// multive % unary\nop.multive = function(){\n  var left = this.range() ,ll;\n  if( ll = this.eat(['*', '/' ,'%']) ){\n    return getset(left.get + ll.type + this.multive().get);\n  }\n  return left;\n};\n\nop.range = function(){\n  var left = this.unary(), ll, right;\n\n  if(ll = this.eat('..')){\n    right = this.unary();\n    var body = \n      \"(function(start,end){var res = [],step=end>start?1:-1; for(var i = start; end>start?i <= end: i>=end; i=i+step){res.push(i); } return res })(\"+left.get+\",\"+right.get+\")\";\n    return getset(body);\n  }\n\n  return left;\n};\n\n\n\n// lefthand\n// + unary\n// - unary\n// ~ unary\n// ! unary\nop.unary = function(){\n  var ll;\n  if(ll = this.eat(['+','-','~', '!'])){\n    return getset('(' + ll.type + this.unary().get + ')') ;\n  }else{\n    return this.member()\n  }\n};\n\n// call[lefthand] :\n// member args\n// member [ expression ]\n// member . ident  \n\nop.member = function(base, last, pathes, prevBase){\n  var ll, path, extValue;\n\n\n  var onlySimpleAccessor = false;\n  if(!base){ //first\n    path = this.primary();\n    var type = typeof path;\n    if(type === 'string'){ \n      pathes = [];\n      pathes.push( path );\n      last = path;\n      extValue = extName + \".\" + path;\n      base = ctxName + \"._sg_('\" + path + \"', \" + varName + \", \" + extName + \")\";\n      onlySimpleAccessor = true;\n    }else{ //Primative Type\n      if(path.get === 'this'){\n        base = ctxName;\n        pathes = ['this'];\n      }else{\n        pathes = null;\n        base = path.get;\n      }\n    }\n  }else{ // not first enter\n    if(typeof last === 'string' && isPath( last) ){ // is valid path\n      pathes.push(last);\n    }else{\n      if(pathes && pathes.length) { this.depend.push(pathes); }\n      pathes = null;\n    }\n  }\n  if(ll = this.eat(['[', '.', '('])){\n    switch(ll.type){\n      case '.':\n          // member(object, property, computed)\n        var tmpName = this.match('IDENT').value;\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n          base = ctxName + \"._sg_('\" + tmpName + \"', \" + base + \")\";\n        }else{\n          base += \"['\" + tmpName + \"']\";\n        }\n        return this.member( base, tmpName, pathes,  prevBase);\n      case '[':\n          // member(object, property, computed)\n        path = this.assign();\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n        // means function call, we need throw undefined error when call function\n        // and confirm that the function call wont lose its context\n          base = ctxName + \"._sg_(\" + path.get + \", \" + base + \")\";\n        }else{\n          base += \"[\" + path.get + \"]\";\n        }\n        this.match(']');\n        return this.member(base, path, pathes, prevBase);\n      case '(':\n        // call(callee, args)\n        var args = this.arguments().join(',');\n        base =  base+\"(\" + args +\")\";\n        this.match(')');\n        return this.member(base, null, pathes);\n    }\n  }\n  if( pathes && pathes.length ) { this.depend.push( pathes ); }\n  var res =  {get: base};\n  if(last){\n    res.set = ctxName + \"._ss_(\" + \n        (last.get? last.get : \"'\"+ last + \"'\") + \n        \",\"+ _$3.setName + \",\"+ \n        (prevBase?prevBase:_$3.varName) + \n        \", '=', \"+ ( onlySimpleAccessor? 1 : 0 ) + \")\";\n  \n  }\n  return res;\n};\n\n/**\n * \n */\nop.arguments = function(end){\n  var this$1 = this;\n\n  end = end || ')';\n  var args = [];\n  do{\n    if(this$1.la() !== end){\n      args.push(this$1.assign().get);\n    }\n  }while( this.eat(','));\n  return args\n};\n\n\n// primary :\n// this \n// ident\n// literal\n// array\n// object\n// ( expression )\n\nop.primary = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"{\":\n      return this.object();\n    case \"[\":\n      return this.array();\n    case \"(\":\n      return this.paren();\n    // literal or ident\n    case 'STRING':\n      this.next();\n      var value = \"\" + ll.value;\n      var quota = ~value.indexOf(\"'\")? \"\\\"\": \"'\";\n      return getset(quota + value + quota);\n    case 'NUMBER':\n      this.next();\n      return getset( \"\" + ll.value );\n    case \"IDENT\":\n      this.next();\n      if(isKeyWord(ll.value)){\n        return getset( ll.value );\n      }\n      return ll.value;\n    default: \n      this.error('Unexpected Token: ' + ll.type);\n  }\n};\n\n// object\n//  {propAssign [, propAssign] * [,]}\n\n// propAssign\n//  prop : assign\n\n// prop\n//  STRING\n//  IDENT\n//  NUMBER\n\nop.object = function(){\n  var this$1 = this;\n\n  var code = [this.match('{').type];\n\n  var ll = this.eat( ['STRING', 'IDENT', 'NUMBER'] );\n  while(ll){\n    code.push(\"'\" + ll.value + \"'\" + this$1.match(':').type);\n    var get = this$1.assign().get;\n    code.push(get);\n    ll = null;\n    if(this$1.eat(\",\") && (ll = this$1.eat(['STRING', 'IDENT', 'NUMBER'])) ) { code.push(\",\"); }\n  }\n  code.push(this.match('}').type);\n  return {get: code.join(\"\")}\n};\n\n// array\n// [ assign[,assign]*]\nop.array = function(){\n  var this$1 = this;\n\n  var code = [this.match('[').type], item;\n  if( this.eat(\"]\") ){\n\n     code.push(\"]\");\n  } else {\n    while(item = this.assign()){\n      code.push(item.get);\n      if(this$1.eat(',')) { code.push(\",\"); }\n      else { break; }\n    }\n    code.push(this.match(']').type);\n  }\n  return {get: code.join(\"\")};\n};\n\n// '(' expression ')'\nop.paren = function(){\n  this.match('(');\n  var res = this.filter();\n  res.get = '(' + res.get + ')';\n  res.set = res.set;\n  this.match(')');\n  return res;\n};\n\nfunction getset(get, set){\n  return {\n    get: get,\n    set: set\n  }\n}\n\n\n\nvar Parser_1 = Parser$1;\n\n// (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n// Backbone may be freely distributed under the MIT license.\n// For all details and documentation:\n// http://backbonejs.org\n\n// klass: a classical JS OOP façade\n// https://github.com/ded/klass\n// License MIT (c) Dustin Diaz 2014\n  \n// inspired by backbone's extend and klass\nvar _$4 = util;\nvar fnTest = /xy/.test(function(){\"xy\";}) ? /\\bsupr\\b/:/.*/;\nvar isFn = function(o){return typeof o === \"function\"};\n\nvar hooks = {\n  events: function( propertyValue, proto ){\n    var eventListeners = proto._eventListeners || [];\n    var normedEvents = _$4.normListener(propertyValue);\n\n    if(normedEvents.length) {\n      proto._eventListeners = eventListeners.concat( normedEvents );\n    }\n    delete proto.events ;\n  }\n};\n\n\nfunction wrap( k, fn, supro ) {\n  return function () {\n    var tmp = this.supr;\n    this.supr = supro[k];\n    var ret = fn.apply(this, arguments);\n    this.supr = tmp;\n    return ret;\n  }\n}\n\nfunction process( what, o, supro ) {\n  for ( var k in o ) {\n    if (o.hasOwnProperty(k)) {\n      if(hooks[k]) {\n        hooks[k](o[k], what, supro);\n      }\n      what[k] = isFn( o[k] ) && isFn( supro[k] ) && \n        fnTest.test( o[k] ) ? wrap(k, o[k], supro) : o[k];\n    }\n  }\n}\n\n// if the property is [\"events\", \"data\", \"computed\"] , we should merge them\nvar merged = [\"data\", \"computed\"];\nvar mlen = merged.length;\nvar extend$2 = function extend$2(o){\n  o = o || {};\n  var supr = this, proto,\n    supro = supr && supr.prototype || {};\n\n  if(typeof o === 'function'){\n    proto = o.prototype;\n    o.implement = implement;\n    o.extend = extend$2;\n    return o;\n  } \n  \n  function fn() {\n    supr.apply(this, arguments);\n  }\n\n  proto = _$4.createProto(fn, supro);\n\n  function implement(o){\n    // we need merge the merged property\n    var len = mlen;\n    for(;len--;){\n      var prop = merged[len];\n      if(proto[prop] && o.hasOwnProperty(prop) && proto.hasOwnProperty(prop)){\n        _$4.extend(proto[prop], o[prop], true); \n        delete o[prop];\n      }\n    }\n\n\n    process(proto, o, supro); \n    return this;\n  }\n\n\n\n  fn.implement = implement;\n  fn.implement(o);\n  if(supr.__after__) { supr.__after__.call(fn, supr, o); }\n  fn.extend = extend$2;\n  return fn;\n};\n\nvar _const = {\n  'COMPONENT_TYPE': 1,\n  'ELEMENT_TYPE': 2,\n  'NAMESPACE': {\n    html: \"http://www.w3.org/1999/xhtml\",\n    svg: \"http://www.w3.org/2000/svg\"\n  },\n  'OPTIONS': {\n    'STABLE_INIT': { stable: !0, init: !0 },\n    'FORCE_INIT': { force: !0, init: !0 },\n    'STABLE': {stable: !0},\n    'INIT': { init: !0 },\n    'SYNC': { sync: !0 },\n    'FORCE': { force: !0 }\n  }\n};\n\nvar dom_1 = createCommonjsModule(function (module) {\n// thanks for angular && mootools for some concise&cross-platform  implemention\n// =====================================\n\n// The MIT License\n// Copyright (c) 2010-2014 Google, Inc. http://angularjs.org\n\n// ---\n// license: MIT-style license. http://mootools.net\n\n\n\nvar dom = module.exports;\nvar env$$1 = env;\nvar _ = util;\nvar consts = _const;\nvar tNode = document.createElement('div');\nvar addEvent, removeEvent;\nvar noop = function(){};\n\nvar namespaces = consts.NAMESPACE;\n\ndom.body = document.body;\n\ndom.doc = document;\n\n// camelCase\nfunction camelCase(str){\n  return (\"\" + str).replace(/-\\D/g, function(match){\n    return match.charAt(1).toUpperCase();\n  });\n}\n\n\ndom.tNode = tNode;\n\nif(tNode.addEventListener){\n  addEvent = function(node, type, fn) {\n    node.addEventListener(type, fn, false);\n  };\n  removeEvent = function(node, type, fn) {\n    node.removeEventListener(type, fn, false); \n  };\n}else{\n  addEvent = function(node, type, fn) {\n    node.attachEvent('on' + type, fn);\n  };\n  removeEvent = function(node, type, fn) {\n    node.detachEvent('on' + type, fn); \n  };\n}\n\n\ndom.msie = parseInt((/msie (\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\nif (isNaN(dom.msie)) {\n  dom.msie = parseInt((/trident\\/.*; rv:(\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\n}\n\ndom.find = function(sl){\n  if(document.querySelector) {\n    try{\n      return document.querySelector(sl);\n    }catch(e){\n\n    }\n  }\n  if(sl.indexOf('#')!==-1) { return document.getElementById( sl.slice(1) ); }\n};\n\n\ndom.inject = function(node, refer, position){\n\n  position = position || 'bottom';\n  if(!node) { return ; }\n  if(Array.isArray(node)){\n    var tmp = node;\n    node = dom.fragment();\n    for(var i = 0,len = tmp.length; i < len ;i++){\n      node.appendChild(tmp[i]);\n    }\n  }\n\n  var firstChild, next;\n  switch(position){\n    case 'bottom':\n      refer.appendChild( node );\n      break;\n    case 'top':\n      if( firstChild = refer.firstChild ){\n        refer.insertBefore( node, refer.firstChild );\n      }else{\n        refer.appendChild( node );\n      }\n      break;\n    case 'after':\n      if( next = refer.nextSibling ){\n        next.parentNode.insertBefore( node, next );\n      }else{\n        refer.parentNode.appendChild( node );\n      }\n      break;\n    case 'before':\n      refer.parentNode.insertBefore( node, refer );\n  }\n};\n\n\ndom.id = function(id){\n  return document.getElementById(id);\n};\n\n// createElement \ndom.create = function(type, ns, attrs){\n  if(ns === 'svg'){\n    if(!env$$1.svg) { throw Error('the env need svg support') }\n    ns = namespaces.svg;\n  }\n  return !ns? document.createElement(type): document.createElementNS(ns, type);\n};\n\n// documentFragment\ndom.fragment = function(){\n  return document.createDocumentFragment();\n};\n\n\n\nvar specialAttr = {\n  'class': function(node, value){\n     ('className' in node && (!node.namespaceURI || node.namespaceURI === namespaces.html  )) ? \n      node.className = (value || '') : node.setAttribute('class', value);\n  },\n  'for': function(node, value){\n    ('htmlFor' in node) ? node.htmlFor = value : node.setAttribute('for', value);\n  },\n  'style': function(node, value){\n    (node.style) ? node.style.cssText = value : node.setAttribute('style', value);\n  },\n  'value': function(node, value){\n    node.value = (value != null) ? value : '';\n  }\n};\n\n\n// attribute Setter & Getter\ndom.attr = function(node, name, value){\n  if (_.isBooleanAttr(name)) {\n    if (typeof value !== 'undefined') {\n      if (!!value) {\n        node[name] = true;\n        node.setAttribute(name, name);\n        // lt ie7 . the javascript checked setting is in valid\n        //http://bytes.com/topic/javascript/insights/799167-browser-quirk-dynamically-appended-checked-checkbox-does-not-appear-checked-ie\n        if(dom.msie && dom.msie <=7 && name === 'checked' ) { node.defaultChecked = true; }\n      } else {\n        node[name] = false;\n        node.removeAttribute(name);\n      }\n    } else {\n      return (node[name] ||\n               (node.attributes.getNamedItem(name)|| noop).specified) ? name : undefined;\n    }\n  } else if (typeof (value) !== 'undefined') {\n    // if in specialAttr;\n    if(specialAttr[name]) { specialAttr[name](node, value); }\n    else if(value === null) { node.removeAttribute(name); }\n    else { node.setAttribute(name, value); }\n  } else if (node.getAttribute) {\n    // the extra argument \"2\" is to get the right thing for a.href in IE, see jQuery code\n    // some elements (e.g. Document) don't have get attribute, so return undefined\n    var ret = node.getAttribute(name, 2);\n    // normalize non-existing attributes to undefined (as jQuery)\n    return ret === null ? undefined : ret;\n  }\n};\n\n\ndom.on = function(node, type, handler){\n  var types = type.split(' ');\n  handler.real = function(ev){\n    var $event = new Event(ev);\n    $event.origin = node;\n    handler.call(node, $event);\n  };\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    addEvent(node, type, handler.real);\n  });\n  return dom;\n};\ndom.off = function(node, type, handler){\n  var types = type.split(' ');\n  handler = handler.real || handler;\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    removeEvent(node, type, handler);\n  });\n};\n\n\ndom.text = (function (){\n  var map = {};\n  if (dom.msie && dom.msie < 9) {\n    map[1] = 'innerText';    \n    map[3] = 'nodeValue';    \n  } else {\n    map[1] = map[3] = 'textContent';\n  }\n  \n  return function (node, value) {\n    var textProp = map[node.nodeType];\n    if (value == null) {\n      return textProp ? node[textProp] : '';\n    }\n    node[textProp] = value;\n  }\n})();\n\n\ndom.html = function( node, html ){\n  if(typeof html === \"undefined\"){\n    return node.innerHTML;\n  }else{\n    node.innerHTML = html;\n  }\n};\n\ndom.replace = function(node, replaced){\n  if(replaced.parentNode) { replaced.parentNode.replaceChild(node, replaced); }\n};\n\ndom.remove = function(node){\n  if(node.parentNode) { node.parentNode.removeChild(node); }\n};\n\n// css Settle & Getter from angular\n// =================================\n// it isnt computed style \ndom.css = function(node, name, value){\n  if( typeof (name) === \"object\" && name ){\n    for(var i in name){\n      if( name.hasOwnProperty(i) ){\n        dom.css( node, i, name[i] );\n      }\n    }\n    return;\n  }\n  if ( typeof value !== \"undefined\" ) {\n\n    name = camelCase(name);\n    if(name) { node.style[name] = value; }\n\n  } else {\n\n    var val;\n    if (dom.msie <= 8) {\n      // this is some IE specific weirdness that jQuery 1.6.4 does not sure why\n      val = node.currentStyle && node.currentStyle[name];\n      if (val === '') { val = 'auto'; }\n    }\n    val = val || node.style[name];\n    if (dom.msie <= 8) {\n      val = val === '' ? undefined : val;\n    }\n    return  val;\n  }\n};\n\ndom.addClass = function(node, className){\n  var current = node.className || \"\";\n  if ((\" \" + current + \" \").indexOf(\" \" + className + \" \") === -1) {\n    node.className = current? ( current + \" \" + className ) : className;\n  }\n};\n\ndom.delClass = function(node, className){\n  var current = node.className || \"\";\n  node.className = (\" \" + current + \" \").replace(\" \" + className + \" \", \" \").trim();\n};\n\ndom.hasClass = function(node, className){\n  var current = node.className || \"\";\n  return (\" \" + current + \" \").indexOf(\" \" + className + \" \") !== -1;\n};\n\n\n\n// simple Event wrap\n\n//http://stackoverflow.com/questions/11068196/ie8-ie7-onchange-event-is-emited-only-after-repeated-selection\nfunction fixEventName(elem, name){\n  return (name === 'change'  &&  dom.msie < 9 && \n      (elem && elem.tagName && elem.tagName.toLowerCase()==='input' && \n        (elem.type === 'checkbox' || elem.type === 'radio')\n      )\n    )? 'click': name;\n}\n\nvar rMouseEvent = /^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\\w+))$/;\nvar doc = document;\ndoc = (!doc.compatMode || doc.compatMode === 'CSS1Compat') ? doc.documentElement : doc.body;\nfunction Event(ev){\n  ev = ev || window.event;\n  if(ev._fixed) { return ev; }\n  this.event = ev;\n  this.target = ev.target || ev.srcElement;\n\n  var type = this.type = ev.type;\n  var button = this.button = ev.button;\n\n  // if is mouse event patch pageX\n  if(rMouseEvent.test(type)){ //fix pageX\n    this.pageX = (ev.pageX != null) ? ev.pageX : ev.clientX + doc.scrollLeft;\n    this.pageY = (ev.pageX != null) ? ev.pageY : ev.clientY + doc.scrollTop;\n    if (type === 'mouseover' || type === 'mouseout'){// fix relatedTarget\n      var related = ev.relatedTarget || ev[(type === 'mouseover' ? 'from' : 'to') + 'Element'];\n      while (related && related.nodeType === 3) { related = related.parentNode; }\n      this.relatedTarget = related;\n    }\n  }\n  // if is mousescroll\n  if (type === 'DOMMouseScroll' || type === 'mousewheel'){\n    // ff ev.detail: 3    other ev.wheelDelta: -120\n    this.wheelDelta = (ev.wheelDelta) ? ev.wheelDelta / 120 : -(ev.detail || 0) / 3;\n  }\n  \n  // fix which\n  this.which = ev.which || ev.keyCode;\n  if( !this.which && button !== undefined){\n    // http://api.jquery.com/event.which/ use which\n    this.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n  }\n  this._fixed = true;\n}\n\n_.extend(Event.prototype, {\n  stop: function(){\n    this.preventDefault().stopPropagation();\n  },\n  preventDefault: function(){\n    if (this.event.preventDefault) { this.event.preventDefault(); }\n    else { this.event.returnValue = false; }\n    return this;\n  },\n  stopPropagation: function(){\n    if (this.event.stopPropagation) { this.event.stopPropagation(); }\n    else { this.event.cancelBubble = true; }\n    return this;\n  },\n  stopImmediatePropagation: function(){\n    if(this.event.stopImmediatePropagation) { this.event.stopImmediatePropagation(); }\n  }\n});\n\n\ndom.nextFrame = (function(){\n    var request = window.requestAnimationFrame ||\n                  window.webkitRequestAnimationFrame ||\n                  window.mozRequestAnimationFrame|| \n                  function(callback){\n                    return setTimeout(callback, 16)\n                  };\n\n    var cancel = window.cancelAnimationFrame ||\n                 window.webkitCancelAnimationFrame ||\n                 window.mozCancelAnimationFrame ||\n                 window.webkitCancelRequestAnimationFrame ||\n                 function(tid){\n                    clearTimeout(tid);\n                 };\n  \n  return function(callback){\n    var id = request(callback);\n    return function(){ cancel(id); }\n  }\n})();\n\n// 3ks for angular's raf  service\nvar k;\ndom.nextReflow = dom.msie? function(callback){\n  return dom.nextFrame(function(){\n    k = document.body.offsetWidth;\n    callback();\n  })\n}: dom.nextFrame;\n});\n\nvar _$5 = util;\n\nfunction simpleDiff(now, old){\n  var nlen = now.length;\n  var olen = old.length;\n  if(nlen !== olen){\n    return true;\n  }\n  for(var i = 0; i < nlen ; i++){\n    if(now[i] !== old[i]) { return  true; }\n  }\n  return false\n\n}\n\nfunction equals(a,b){\n  return a === b;\n}\n\n// array1 - old array\n// array2 - new array\nfunction ld(array1, array2, equalFn){\n  var n = array1.length;\n  var m = array2.length;\n  var equalFn = equalFn || equals;\n  var matrix = [];\n  for(var i = 0; i <= n; i++){\n    matrix.push([i]);\n  }\n  for(var j=1;j<=m;j++){\n    matrix[0][j]=j;\n  }\n  for(var i = 1; i <= n; i++){\n    for(var j = 1; j <= m; j++){\n      if(equalFn(array1[i-1], array2[j-1])){\n        matrix[i][j] = matrix[i-1][j-1];\n      }else{\n        matrix[i][j] = Math.min(\n          matrix[i-1][j]+1, //delete\n          matrix[i][j-1]+1//add\n          );\n      }\n    }\n  }\n  return matrix;\n}\n// arr2 - new array\n// arr1 - old array\nfunction diffArray(arr2, arr1, diff, diffFn) {\n  if(!diff) { return simpleDiff(arr2, arr1); }\n  var matrix = ld(arr1, arr2, diffFn);\n  var n = arr1.length;\n  var i = n;\n  var m = arr2.length;\n  var j = m;\n  var edits = [];\n  var current = matrix[i][j];\n  while(i>0 || j>0){\n  // the last line\n    if (i === 0) {\n      edits.unshift(3);\n      j--;\n      continue;\n    }\n    // the last col\n    if (j === 0) {\n      edits.unshift(2);\n      i--;\n      continue;\n    }\n    var northWest = matrix[i - 1][j - 1];\n    var west = matrix[i - 1][j];\n    var north = matrix[i][j - 1];\n\n    var min = Math.min(north, west, northWest);\n\n    if (min === west) {\n      edits.unshift(2); //delete\n      i--;\n      current = west;\n    } else if (min === northWest ) {\n      if (northWest === current) {\n        edits.unshift(0); //no change\n      } else {\n        edits.unshift(1); //update\n        current = northWest;\n      }\n      i--;\n      j--;\n    } else {\n      edits.unshift(3); //add\n      j--;\n      current = north;\n    }\n  }\n  var LEAVE = 0;\n  var ADD = 3;\n  var DELELE = 2;\n  var UPDATE = 1;\n  var n = 0;m=0;\n  var steps = [];\n  var step = {index: null, add:0, removed:[]};\n\n  for(var i=0;i<edits.length;i++){\n    if(edits[i] > 0 ){ // NOT LEAVE\n      if(step.index === null){\n        step.index = m;\n      }\n    } else { //LEAVE\n      if(step.index != null){\n        steps.push(step);\n        step = {index: null, add:0, removed:[]};\n      }\n    }\n    switch(edits[i]){\n      case LEAVE:\n        n++;\n        m++;\n        break;\n      case ADD:\n        step.add++;\n        m++;\n        break;\n      case DELELE:\n        step.removed.push(arr1[n]);\n        n++;\n        break;\n      case UPDATE:\n        step.add++;\n        step.removed.push(arr1[n]);\n        n++;\n        m++;\n        break;\n    }\n  }\n  if(step.index != null){\n    steps.push(step);\n  }\n  return steps\n}\n\n\n\n// diffObject\n// ----\n// test if obj1 deepEqual obj2\nfunction diffObject( now, last, diff ){\n\n\n  if(!diff){\n\n    for( var j in now ){\n      if( last[j] !== now[j] ) { return true }\n    }\n\n    for( var n in last ){\n      if(last[n] !== now[n]) { return true; }\n    }\n\n  }else{\n\n    var nKeys = _$5.keys(now);\n    var lKeys = _$5.keys(last);\n\n    /**\n     * [description]\n     * @param  {[type]} a    [description]\n     * @param  {[type]} b){                   return now[b] [description]\n     * @return {[type]}      [description]\n     */\n    return diffArray(nKeys, lKeys, diff, function(a, b){\n      return now[b] === last[a];\n    });\n\n  }\n\n  return false;\n\n\n}\n\nvar diff = {\n  diffArray: diffArray,\n  diffObject: diffObject\n};\n\nvar _$6 = util;\nvar dom$1  = dom_1;\nvar animate = {};\nvar env$3 = env;\n\n\nvar transitionEnd = 'transitionend';\nvar animationEnd = 'animationend';\nvar transitionProperty = 'transition';\nvar animationProperty = 'animation';\n\nif(!('ontransitionend' in window)){\n  if('onwebkittransitionend' in window) {\n    \n    // Chrome/Saf (+ Mobile Saf)/Android\n    transitionEnd += ' webkitTransitionEnd';\n    transitionProperty = 'webkitTransition';\n  } else if('onotransitionend' in dom$1.tNode || navigator.appName === 'Opera') {\n\n    // Opera\n    transitionEnd += ' oTransitionEnd';\n    transitionProperty = 'oTransition';\n  }\n}\nif(!('onanimationend' in window)){\n  if ('onwebkitanimationend' in window){\n    // Chrome/Saf (+ Mobile Saf)/Android\n    animationEnd += ' webkitAnimationEnd';\n    animationProperty = 'webkitAnimation';\n\n  }else if ('onoanimationend' in dom$1.tNode){\n    // Opera\n    animationEnd += ' oAnimationEnd';\n    animationProperty = 'oAnimation';\n  }\n}\n\n/**\n * inject node with animation\n * @param  {[type]} node      [description]\n * @param  {[type]} refer     [description]\n * @param  {[type]} direction [description]\n * @return {[type]}           [description]\n */\nanimate.inject = function( node, refer ,direction, callback ){\n  callback = callback || _$6.noop;\n  if( Array.isArray(node) ){\n    var fragment = dom$1.fragment();\n    var count=0;\n\n    for(var i = 0,len = node.length;i < len; i++ ){\n      fragment.appendChild(node[i]); \n    }\n    dom$1.inject(fragment, refer, direction);\n\n    // if all nodes is done, we call the callback\n    var enterCallback = function (){\n      count++;\n      if( count === len ) { callback(); }\n    };\n    if(len === count) { callback(); }\n    for( i = 0; i < len; i++ ){\n      if(node[i].onenter){\n        node[i].onenter(enterCallback);\n      }else{\n        enterCallback();\n      }\n    }\n  }else{\n    dom$1.inject( node, refer, direction );\n    if(node.onenter){\n      node.onenter(callback);\n    }else{\n      callback();\n    }\n  }\n};\n\n/**\n * remove node with animation\n * @param  {[type]}   node     [description]\n * @param  {Function} callback [description]\n * @return {[type]}            [description]\n */\n\nanimate.remove = function(node, callback){\n  if(!node) { return; }\n  var count = 0;\n  function loop(){\n    count++;\n    if(count === len) { callback && callback(); }\n  }\n  if( Array.isArray(node) ){\n    for(var i = 0, len = node.length; i < len ; i++){\n      animate.remove(node[i], loop);\n    }\n    return;\n  }\n  if(typeof node.onleave ==='function'){\n    node.onleave(function(){\n      removeDone(node, callback);\n    });\n  }else{\n    removeDone(node, callback);\n  }\n};\n\nfunction removeDone(node, callback){\n    dom$1.remove(node);\n    callback && callback();\n}\n\n\n\nanimate.startClassAnimate = function ( node, className,  callback, mode ){\n  var activeClassName, timeout, tid, onceAnim;\n  if( (!animationEnd && !transitionEnd) || env$3.isRunning ){\n    return callback();\n  }\n\n  if(mode !== 4){\n    onceAnim = _$6.once(function onAnimateEnd(){\n      if(tid) { clearTimeout(tid); }\n\n      if(mode === 2) {\n        dom$1.delClass(node, activeClassName);\n      }\n      if(mode !== 3){ // mode hold the class\n        dom$1.delClass(node, className);\n      }\n      dom$1.off(node, animationEnd, onceAnim);\n      dom$1.off(node, transitionEnd, onceAnim);\n\n      callback();\n\n    });\n  }else{\n    onceAnim = _$6.once(function onAnimateEnd(){\n      if(tid) { clearTimeout(tid); }\n      callback();\n    });\n  }\n  if(mode === 2){ // auto removed\n    dom$1.addClass( node, className );\n\n    activeClassName = _$6.map(className.split(/\\s+/), function(name){\n       return name + '-active';\n    }).join(\" \");\n\n    dom$1.nextReflow(function(){\n      dom$1.addClass( node, activeClassName );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n\n  }else if(mode===4){\n    dom$1.nextReflow(function(){\n      dom$1.delClass( node, className );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n\n  }else{\n    dom$1.nextReflow(function(){\n      dom$1.addClass( node, className );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n  }\n\n\n\n  dom$1.on( node, animationEnd, onceAnim );\n  dom$1.on( node, transitionEnd, onceAnim );\n  return onceAnim;\n};\n\n\nanimate.startStyleAnimate = function(node, styles, callback){\n  var timeout, onceAnim, tid;\n\n  dom$1.nextReflow(function(){\n    dom$1.css( node, styles );\n    timeout = getMaxTimeout( node );\n    tid = setTimeout( onceAnim, timeout );\n  });\n\n\n  onceAnim = _$6.once(function onAnimateEnd(){\n    if(tid) { clearTimeout(tid); }\n\n    dom$1.off(node, animationEnd, onceAnim);\n    dom$1.off(node, transitionEnd, onceAnim);\n\n    callback();\n\n  });\n\n  dom$1.on( node, animationEnd, onceAnim );\n  dom$1.on( node, transitionEnd, onceAnim );\n\n  return onceAnim;\n};\n\n\n/**\n * get maxtimeout\n * @param  {Node} node \n * @return {[type]}   [description]\n */\nfunction getMaxTimeout(node){\n  var timeout = 0,\n    tDuration = 0,\n    tDelay = 0,\n    aDuration = 0,\n    aDelay = 0,\n    ratio = 5 / 3,\n    styles;\n\n  if(window.getComputedStyle){\n\n    styles = window.getComputedStyle(node),\n    tDuration = getMaxTime( styles[transitionProperty + 'Duration']) || tDuration;\n    tDelay = getMaxTime( styles[transitionProperty + 'Delay']) || tDelay;\n    aDuration = getMaxTime( styles[animationProperty + 'Duration']) || aDuration;\n    aDelay = getMaxTime( styles[animationProperty + 'Delay']) || aDelay;\n    timeout = Math.max( tDuration+tDelay, aDuration + aDelay );\n\n  }\n  return timeout * 1000 * ratio;\n}\n\nfunction getMaxTime(str){\n\n  var maxTimeout = 0, time;\n\n  if(!str) { return 0; }\n\n  str.split(\",\").forEach(function(str){\n\n    time = parseFloat(str);\n    if( time > maxTimeout ) { maxTimeout = time; }\n\n  });\n\n  return maxTimeout;\n}\n\nvar animate_1 = animate;\n\nvar combine_1 = createCommonjsModule(function (module) {\n// some nested  operation in ast \n// --------------------------------\n\nvar dom = dom_1;\nvar animate = animate_1;\n\nvar combine = module.exports = {\n\n  // get the initial dom in object\n  node: function(item){\n    var children,node, nodes;\n    if(!item) { return; }\n    if(typeof item.node === \"function\") { return item.node(); }\n    if(typeof item.nodeType === \"number\") { return item; }\n    if(item.group) { return combine.node(item.group) }\n\n    item = item.children || item;\n    if( Array.isArray(item )){\n      var len = item.length;\n      if(len === 1){\n        return combine.node(item[0]);\n      }\n      nodes = [];\n      for(var i = 0, len = item.length; i < len; i++ ){\n        node = combine.node(item[i]);\n        if(Array.isArray(node)){\n          nodes.push.apply(nodes, node);\n        }else if(node) {\n          nodes.push(node);\n        }\n      }\n      return nodes;\n    }\n    \n  },\n  // @TODO remove _gragContainer\n  inject: function(node, pos ){\n    var group = this;\n    var fragment = combine.node(group.group || group);\n    if(node === false) {\n      animate.remove(fragment);\n      return group;\n    }else{\n      if(!fragment) { return group; }\n      if(typeof node === 'string') { node = dom.find(node); }\n      if(!node) { throw Error('injected node is not found'); }\n      // use animate to animate firstchildren\n      animate.inject(fragment, node, pos);\n    }\n    // if it is a component\n    if(group.$emit) {\n      var preParent = group.parentNode;\n      var newParent = (pos ==='after' || pos === 'before')? node.parentNode : node;\n      group.parentNode = newParent;\n      group.$emit(\"$inject\", node, pos, preParent);\n    }\n    return group;\n  },\n\n  // get the last dom in object(for insertion operation)\n  last: function(item){\n    var children = item.children;\n\n    if(typeof item.last === \"function\") { return item.last(); }\n    if(typeof item.nodeType === \"number\") { return item; }\n\n    if(children && children.length) { return combine.last(children[children.length - 1]); }\n    if(item.group) { return combine.last(item.group); }\n\n  },\n\n  destroy: function(item, first){\n    if(!item) { return; }\n    if( typeof item.nodeType === \"number\"  ) { return first && dom.remove(item) }\n    if( typeof item.destroy === \"function\" ) { return item.destroy(first); }\n\n    if( Array.isArray(item)){\n      for(var i = 0, len = item.length; i < len; i++ ){\n        combine.destroy(item[i], first);\n      }\n    }\n  }\n\n};\n\n\n// @TODO: need move to dom.js\ndom.element = function( component, all ){\n  if(!component) { return !all? null: []; }\n  var nodes = combine.node( component );\n  if( nodes.nodeType === 1 ) { return all? [nodes]: nodes; }\n  var elements = [];\n  for(var i = 0; i<nodes.length ;i++){\n    var node = nodes[i];\n    if( node && node.nodeType === 1){\n      if(!all) { return node; }\n      elements.push(node);\n    } \n  }\n  return !all? elements[0]: elements;\n};\n});\n\nvar _$7 = util;\nvar combine$1 = combine_1;\n\nfunction Group$1(list){\n  this.children = list || [];\n}\n\n\nvar o = _$7.extend(Group$1.prototype, {\n  destroy: function(first){\n    combine$1.destroy(this.children, first);\n    if(this.ondestroy) { this.ondestroy(); }\n    this.children = null;\n  },\n  get: function(i){\n    return this.children[i]\n  },\n  push: function(item){\n    this.children.push( item );\n  }\n});\no.inject = o.$inject = combine$1.inject;\n\n\n\nvar group = Group$1;\n\nvar walkers_1 = createCommonjsModule(function (module) {\nvar diffArray = diff.diffArray;\nvar combine = combine_1;\nvar animate = animate_1;\nvar node = node$1;\nvar Group = group;\nvar dom = dom_1;\nvar _ = util;\nvar consts = _const;\nvar OPTIONS = consts.OPTIONS;\n\n\nvar walkers = module.exports = {};\n\n\n\n// used in walkers.list\n// remove block in group\nfunction removeRange(index, rlen, children){\n  for(var j = 1; j <= rlen; j++){ //removed\n    var removed = children[ index + j ];\n    if(removed) { removed.destroy(true); }\n  }\n  children.splice(index+1, rlen);\n}\n\n\nwalkers.list = function(ast, options){\n\n  var Regular = walkers.Regular;  \n  var placeholder = document.createComment(\"Regular list\"),\n    namespace = options.namespace,\n    extra = options.extra;\n  var self = this;\n  var group$$1 = new Group([placeholder]);\n  var children = group$$1.children;\n\n  var indexName = ast.variable + '_index';\n  var keyName = ast.variable + '_key';\n  var variable = ast.variable;\n  var alternate = ast.alternate;\n  var track = ast.track, keyOf, extraObj;\n\n  if( track && track !== true ){\n    track = this._touchExpr(track);\n    extraObj = _.createObject(extra);\n    keyOf = function( item, index ){\n      extraObj[ variable ] = item;\n      extraObj[ indexName ] = index;\n      // @FIX keyName\n      return track.get( self, extraObj );\n    };\n  }\n\n  function addRange(index, end, newList, rawNewValue){\n    for(var o = index; o < end; o++){ //add\n      // prototype inherit\n      var item = newList[o];\n      var data = _.createObject(extra);\n      updateTarget(data, o, item, rawNewValue);\n\n      var section = self.$compile(ast.body, {\n        extra: data,\n        namespace:namespace,\n        record: true,\n        outer: options.outer\n      });\n      section.data = data;\n      // autolink\n      var insert =  combine.last(group$$1.get(o));\n      if(insert.parentNode){\n        animate.inject(combine.node(section),insert, 'after');\n      }\n      // insert.parentNode.insertBefore(combine.node(section), insert.nextSibling);\n      children.splice( o + 1 , 0, section);\n    }\n  }\n\n  function updateTarget(target, index, item, rawNewValue){\n      target[ indexName ] = index;\n      if( rawNewValue ){\n        target[ keyName ] = item;\n        target[ variable ] = rawNewValue[ item ];\n      }else{\n        target[ variable ] = item;\n        target[keyName] = null;\n      }\n  }\n\n\n  function updateRange(start, end, newList, rawNewValue){\n    for(var k = start; k < end; k++){ // no change\n      var sect = group$$1.get( k + 1 ), item = newList[ k ];\n      updateTarget(sect.data, k, item, rawNewValue);\n    }\n  }\n\n  function updateLD(newList, oldList, splices , rawNewValue ){\n\n    var cur = placeholder;\n    var m = 0, len = newList.length;\n\n    if(!splices && (len !==0 || oldList.length !==0)  ){\n      splices = diffArray(newList, oldList, true);\n    }\n\n    if(!splices || !splices.length) { return; }\n      \n    for(var i = 0; i < splices.length; i++){ //init\n      var splice = splices[i];\n      var index = splice.index; // beacuse we use a comment for placeholder\n      var removed = splice.removed;\n      var add = splice.add;\n      var rlen = removed.length;\n      // for track\n      if( track && rlen && add ){\n        var minar = Math.min(rlen, add);\n        var tIndex = 0;\n        while(tIndex < minar){\n          if( keyOf(newList[index], index) !== keyOf( removed[0], index ) ){\n            removeRange(index, 1, children);\n            addRange(index, index+1, newList, rawNewValue);\n          }\n          removed.shift();\n          add--;\n          index++;\n          tIndex++;\n        }\n        rlen = removed.length;\n      }\n      // update\n      updateRange(m, index, newList, rawNewValue);\n\n      removeRange( index ,rlen, children);\n\n      addRange(index, index+add, newList, rawNewValue);\n\n      m = index + add - rlen;\n      m  = m < 0? 0 : m;\n\n    }\n    if(m < len){\n      for(var i = m; i < len; i++){\n        var pair = group$$1.get(i + 1);\n        pair.data[indexName] = i;\n        // @TODO fix keys\n      }\n    }\n  }\n\n  // if the track is constant test.\n  function updateSimple(newList, oldList, rawNewValue ){\n\n    var nlen = newList.length;\n    var olen = oldList.length;\n    var mlen = Math.min(nlen, olen);\n\n    updateRange(0, mlen, newList, rawNewValue);\n    if(nlen < olen){ //need add\n      removeRange(nlen, olen-nlen, children);\n    }else if(nlen > olen){\n      addRange(olen, nlen, newList, rawNewValue);\n    }\n  }\n\n  function update(newValue, oldValue, splices){\n\n    var nType = _.typeOf( newValue );\n    var oType = _.typeOf( oldValue );\n\n    var newList = getListFromValue( newValue, nType );\n    var oldList = getListFromValue( oldValue, oType );\n\n    var rawNewValue;\n\n\n    var nlen = newList && newList.length;\n    var olen = oldList && oldList.length;\n\n    // if previous list has , we need to remove the altnated section.\n    if( !olen && nlen && group$$1.get(1) ){\n      var altGroup = children.pop();\n      if(altGroup.destroy)  { altGroup.destroy(true); }\n    }\n\n    if( nType === 'object' ) { rawNewValue = newValue; }\n\n    if(track === true){\n      updateSimple( newList, oldList,  rawNewValue );\n    }else{\n      updateLD( newList, oldList, splices, rawNewValue );\n    }\n\n    // @ {#list} {#else}\n    if( !nlen && alternate && alternate.length){\n      var section = self.$compile(alternate, {\n        extra: extra,\n        record: true,\n        outer: options.outer,\n        namespace: namespace\n      });\n      children.push(section);\n      if(placeholder.parentNode){\n        animate.inject(combine.node(section), placeholder, 'after');\n      }\n    }\n  }\n\n  this.$watch(ast.sequence, update, { \n    init: true, \n    diff: track !== true ,\n    deep: true\n  });\n  return group$$1;\n};\n\n\n\n// {#include } or {#inc template}\nwalkers.template = function(ast, options){\n  var content = ast.content, compiled;\n  var placeholder = document.createComment('inlcude');\n  var compiled, namespace = options.namespace, extra = options.extra;\n  var group$$1 = new Group([placeholder]);\n  if(content){\n    var self = this;\n    this.$watch(content, function(value){\n      var removed = group$$1.get(1), type= typeof value;\n      if( removed){\n        removed.destroy(true); \n        group$$1.children.pop();\n      }\n      if(!value) { return; }\n\n      group$$1.push( compiled = type === 'function' ? value(): self.$compile( type !== 'object'? String(value): value, {\n        record: true, \n        outer: options.outer,\n        namespace: namespace, \n        extra: extra}) ); \n      if(placeholder.parentNode) {\n        compiled.$inject(placeholder, 'before');\n      }\n    }, OPTIONS.INIT);\n  }\n  return group$$1;\n};\n\nfunction getListFromValue(value, type){\n  return type === 'array'? value: (type === 'object'? _.keys(value) :  []);\n}\n\n\n// how to resolve this problem\nvar ii = 0;\nwalkers['if'] = function(ast, options){\n  var self = this, consequent, alternate, extra = options.extra;\n  if(options && options.element){ // attribute inteplation\n    var update = function(nvalue){\n      if(!!nvalue){\n        if(alternate) { combine.destroy(alternate); }\n        if(ast.consequent) { consequent = self.$compile(ast.consequent, {record: true, element: options.element , extra:extra}); }\n      }else{\n        if(consequent) { combine.destroy(consequent); }\n        if(ast.alternate) { alternate = self.$compile(ast.alternate, {record: true, element: options.element, extra: extra}); }\n      }\n    };\n    this.$watch(ast.test, update, OPTIONS.FORCE);\n    return {\n      destroy: function(){\n        if(consequent) { combine.destroy(consequent); }\n        else if(alternate) { combine.destroy(alternate); }\n      }\n    }\n  }\n\n  var test, consequent, alternate, node;\n  var placeholder = document.createComment(\"Regular if\" + ii++);\n  var group$$1 = new Group();\n  group$$1.push(placeholder);\n  var preValue = null, namespace= options.namespace;\n\n\n  var update = function (nvalue, old){\n    var value = !!nvalue;\n    if(value === preValue) { return; }\n    preValue = value;\n    if(group$$1.children[1]){\n      group$$1.children[1].destroy(true);\n      group$$1.children.pop();\n    }\n    if(value){ //true\n      if(ast.consequent && ast.consequent.length){\n        consequent = self.$compile( ast.consequent , {record:true, outer: options.outer,namespace: namespace, extra:extra });\n        // placeholder.parentNode && placeholder.parentNode.insertBefore( node, placeholder );\n        group$$1.push(consequent);\n        if(placeholder.parentNode){\n          animate.inject(combine.node(consequent), placeholder, 'before');\n        }\n      }\n    }else{ //false\n      if(ast.alternate && ast.alternate.length){\n        alternate = self.$compile(ast.alternate, {record:true, outer: options.outer,namespace: namespace, extra:extra});\n        group$$1.push(alternate);\n        if(placeholder.parentNode){\n          animate.inject(combine.node(alternate), placeholder, 'before');\n        }\n      }\n    }\n  };\n  this.$watch(ast.test, update, OPTIONS.FORCE_INIT);\n\n  return group$$1;\n};\n\n\nwalkers.expression = function(ast, options){\n  var node = document.createTextNode(\"\");\n  this.$watch(ast, function(newval){\n    dom.text(node,  newval == null? \"\": String(newval) );\n  }, OPTIONS.STABLE_INIT );\n  return node;\n};\nwalkers.text = function(ast, options){\n  var text = ast.text;\n  var node = document.createTextNode(\n    text.indexOf('&') !== -1? _.convertEntity(text): text\n  );\n  return node;\n};\n\n\n\nvar eventReg = /^on-(.+)$/;\n\n/**\n * walkers element (contains component)\n */\nwalkers.element = function(ast, options){\n  var attrs = ast.attrs, self = this,\n    Constructor = this.constructor,\n    children = ast.children,\n    namespace = options.namespace, \n    extra = options.extra,\n    tag = ast.tag,\n    Component = Constructor.component(tag),\n    ref, group$$1, element;\n\n  if( tag === 'r-content' ){\n    _.log('r-content is deprecated, use {#inc this.$body} instead (`{#include}` as same)', 'warn');\n    return this.$body && this.$body();\n  } \n\n  if(Component || tag === 'r-component'){\n    options.Component = Component;\n    return walkers.component.call(this, ast, options)\n  }\n\n  if(tag === 'svg') { namespace = \"svg\"; }\n  // @Deprecated: may be removed in next version, use {#inc } instead\n  \n  if( children && children.length ){\n    group$$1 = this.$compile(children, {outer: options.outer,namespace: namespace, extra: extra });\n  }\n\n  element = dom.create(tag, namespace, attrs);\n\n  if(group$$1 && !_.isVoidTag(tag)){\n    dom.inject( combine.node(group$$1) , element);\n  }\n\n  // fix tag ast, some infomation only avaliable at runtime (directive etc..)\n  _.fixTagAST(ast, Constructor);\n\n  var destroies = walkAttributes.call(this, attrs, element, extra);\n\n  return {\n    type: \"element\",\n    group: group$$1,\n    node: function(){\n      return element;\n    },\n    last: function(){\n      return element;\n    },\n    destroy: function(first){\n      if( first ){\n        animate.remove( element, group$$1? group$$1.destroy.bind( group$$1 ): _.noop );\n      }else if(group$$1) {\n        group$$1.destroy();\n      }\n      // destroy ref\n      if( destroies.length ) {\n        destroies.forEach(function( destroy ){\n          if( destroy ){\n            if( typeof destroy.destroy === 'function' ){\n              destroy.destroy();\n            }else{\n              destroy();\n            }\n          }\n        });\n      }\n    }\n  }\n};\n\nwalkers.component = function(ast, options){\n  var this$1 = this;\n\n  var attrs = ast.attrs, \n    Component = options.Component,\n    Constructor = this.constructor,\n    isolate, \n    extra = options.extra,\n    namespace = options.namespace,\n    ref, self = this, is;\n\n  var data = {}, events;\n\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var attr = attrs[i];\n    // consider disabled   equlasto  disabled={true}\n    var value = this$1._touchExpr(attr.value === undefined? true: attr.value);\n    if(value.constant) { value = attr.value = value.get(this$1); }\n    if(attr.value && attr.value.constant === true){\n      value = value.get(this$1);\n    }\n    var name = attr.name;\n    if(!attr.event){\n      var etest = name.match(eventReg);\n      // event: 'nav'\n      if(etest) { attr.event = etest[1]; }\n    }\n\n    // @compile modifier\n    if(attr.mdf === 'cmpl'){\n      value = _.getCompileFn(value, this$1, {\n        record: true, \n        namespace:namespace, \n        extra: extra, \n        outer: options.outer\n      });\n    }\n    \n    // @if is r-component . we need to find the target Component\n    if(name === 'is' && !Component){\n      is = value;\n      var componentName = this$1.$get(value, true);\n      Component = Constructor.component(componentName);\n      if(typeof Component !== 'function') { throw new Error(\"component \" + componentName + \" has not registed!\"); }\n    }\n    // bind event proxy\n    var eventName;\n    if(eventName = attr.event){\n      events = events || {};\n      events[eventName] = _.handleEvent.call(this$1, value, eventName);\n      continue;\n    }else {\n      name = attr.name = _.camelCase(name);\n    }\n\n    if(!value || value.type !== 'expression'){\n      data[name] = value;\n    }else{\n      data[name] = value.get(self); \n    }\n    if( name === 'ref'  && value != null){\n      ref = value;\n    }\n    if( name === 'isolate'){\n      // 1: stop: composite -> parent\n      // 2. stop: composite <- parent\n      // 3. stop 1 and 2: composite <-> parent\n      // 0. stop nothing (defualt)\n      isolate = value.type === 'expression'? value.get(self): parseInt(value === true? 3: value, 10);\n      data.isolate = isolate;\n    }\n  }\n\n  var definition = { \n    data: data, \n    events: events, \n    $parent: (isolate & 2)? null: this,\n    $root: this.$root,\n    $outer: options.outer,\n    _body: {\n      ctx: this,\n      ast: ast.children\n    }\n  };\n  var options = {\n    namespace: namespace, \n    extra: options.extra\n  };\n\n\n  var component = new Component(definition, options), reflink;\n\n\n  if(ref && this.$refs){\n    reflink = Component.directive('ref').link;\n    this.$on('$destroy', reflink.call(this, component, ref) );\n  }\n  if(ref &&  self.$refs) { self.$refs[ref] = component; }\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var attr = attrs[i];\n    var value = attr.value||true;\n    var name = attr.name;\n    // need compiled\n    if(value.type === 'expression' && !attr.event){\n      value = self._touchExpr(value);\n      // use bit operate to control scope\n      if( !(isolate & 2) ) \n        { this$1.$watch(value, (function(name, val){\n          this.data[name] = val;\n        }).bind(component, name), OPTIONS.SYNC); }\n      if( value.set && !(isolate & 1 ) ) \n        // sync the data. it force the component don't trigger attr.name's first dirty echeck\n        { component.$watch(name, self.$update.bind(self, value), OPTIONS.INIT); }\n    }\n  }\n  if(is && is.type === 'expression'  ){\n    var group$$1 = new Group();\n    group$$1.push(component);\n    this.$watch(is, function(value){\n      // found the new component\n      var Component = Constructor.component(value);\n      if(!Component) { throw new Error(\"component \" + value + \" has not registed!\"); }\n      var ncomponent = new Component(definition);\n      var component = group$$1.children.pop();\n      group$$1.push(ncomponent);\n      ncomponent.$inject(combine.last(component), 'after');\n      component.destroy();\n      // @TODO  if component changed , we need update ref\n      if(ref){\n        self.$refs[ref] = ncomponent;\n      }\n    }, OPTIONS.SYNC);\n    return group$$1;\n  }\n  return component;\n};\n\nfunction walkAttributes(attrs, element, extra){\n  var this$1 = this;\n\n  var bindings = [];\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var binding = this$1._walk(attrs[i], {element: element, fromElement: true, attrs: attrs, extra: extra});\n    if(binding) { bindings.push(binding); }\n  }\n  return bindings;\n}\n\nwalkers.attribute = function(ast ,options){\n\n  var attr = ast;\n  var name = attr.name;\n  var value = attr.value || \"\";\n  var constant = value.constant;\n  var Component = this.constructor;\n  var directive = Component.directive(name);\n  var element = options.element;\n  var self = this;\n\n\n  value = this._touchExpr(value);\n\n  if(constant) { value = value.get(this); }\n\n  if(directive && directive.link){\n    var extra = {\n      attrs: options.attrs,\n      param: _.getParamObj(this, attr.param) \n    };\n    var binding = directive.link.call(self, element, value, name, extra);\n    // if update has been passed in , we will  automately watch value for user\n    if( typeof directive.update === 'function'){\n      if(_.isExpr(value)){\n        this.$watch(value, function(val, old){\n          directive.update.call(self, element, val, old, extra); \n        });\n      }else{\n        directive.update.call(self, element, value, undefined, extra );\n      }\n    }\n    if(typeof binding === 'function') { binding = {destroy: binding}; } \n    return binding;\n  } else{\n    if(value.type === 'expression' ){\n      this.$watch(value, function(nvalue, old){\n        dom.attr(element, name, nvalue);\n      }, OPTIONS.STABLE_INIT);\n    }else{\n      if(_.isBooleanAttr(name)){\n        dom.attr(element, name, true);\n      }else{\n        dom.attr(element, name, value);\n      }\n    }\n    if(!options.fromElement){\n      return {\n        destroy: function(){\n          dom.attr(element, name, null);\n        }\n      }\n    }\n  }\n\n};\n});\n\n// simplest event emitter 60 lines\n// ===============================\nvar _$8 = util;\nvar API = {\n  $on: function(event, fn, desc) {\n    var this$1 = this;\n\n    if(typeof event === \"object\" && event){\n      for (var i in event) {\n        this$1.$on(i, event[i], fn);\n      }\n    }else{\n      desc = desc || {};\n      // @patch: for list\n      var context = this;\n      var handles = context._handles || (context._handles = {}),\n        calls = handles[event] || (handles[event] = []);\n      var realFn;\n      if(desc.once){\n        realFn = function(){\n          fn.apply( this, arguments );\n          this.$off(event, fn);\n        };\n        fn.real = realFn;\n      }\n      calls.push(realFn || fn);\n    }\n    return this;\n  },\n  $off: function(event, fn) {\n    var context = this;\n    if(!context._handles) { return; }\n    if(!event) { this._handles = {}; }\n    var handles = context._handles,\n      calls;\n\n    if (calls = handles[event]) {\n      if (!fn) {\n        handles[event] = [];\n        return context;\n      }\n      fn = fn.real || fn;\n      for (var i = 0, len = calls.length; i < len; i++) {\n        if (fn === calls[i]) {\n          calls.splice(i, 1);\n          return context;\n        }\n      }\n    }\n    return context;\n  },\n  // bubble event\n  $emit: function(event){\n    // @patch: for list\n    var context = this;\n    var handles = context._handles, calls, args, type;\n    if(!event) { return; }\n    var args = _$8.slice(arguments, 1);\n    var type = event;\n\n    if(!handles) { return context; }\n    if(calls = handles[type.slice(1)]){\n      for (var j = 0, len = calls.length; j < len; j++) {\n        calls[j].apply(context, args);\n      }\n    }\n    if (!(calls = handles[type])) { return context; }\n    for (var i = 0, len = calls.length; i < len; i++) {\n      calls[i].apply(context, args);\n    }\n    // if(calls.length) context.$update();\n    return context;\n  },\n  // capture  event\n  $once: function(event, fn){\n    var args = _$8.slice(arguments);\n    args.push({once: true});\n    return this.$on.apply(this, args);\n  }\n};\n// container class\nfunction Event() {}\n_$8.extend(Event.prototype, API);\n\nEvent.mixTo = function(obj){\n  obj = typeof obj === \"function\" ? obj.prototype : obj;\n  _$8.extend(obj, API);\n};\nvar event = Event;\n\nvar exprCache$1 = env.exprCache;\nvar Parser$2 = Parser_1;\nvar parse$1 = {\n  expression: function(expr, simple){\n    // @TODO cache\n    if( typeof expr === 'string' && ( expr = expr.trim() ) ){\n      expr = exprCache$1.get( expr ) || exprCache$1.set( expr, new Parser$2( expr, { mode: 2, expression: true } ).expression() );\n    }\n    if(expr) { return expr; }\n  },\n  parse: function(template){\n    return new Parser$2(template).parse();\n  }\n};\n\nvar _$9 = util;\nvar parseExpression = parse$1.expression;\nvar diff$2 = diff;\nvar diffArray$1 = diff$2.diffArray;\nvar diffObject$1 = diff$2.diffObject;\n\nfunction Watcher$1(){}\n\nvar methods = {\n  $watch: function(expr, fn, options){\n    var this$1 = this;\n\n    var get, once, test, rlen, extra = this.__ext__; //records length\n    if(!this._watchers) { this._watchers = []; }\n    if(!this._watchersForStable) { this._watchersForStable = []; }\n\n    options = options || {};\n    if(options === true){\n       options = { deep: true };\n    }\n    var uid = _$9.uid('w_');\n    if(Array.isArray(expr)){\n      var tests = [];\n      for(var i = 0,len = expr.length; i < len; i++){\n          tests.push(this$1.$expression(expr[i]).get);\n      }\n      var prev = [];\n      test = function(context){\n        var equal = true;\n        for(var i =0, len = tests.length; i < len; i++){\n          var splice = tests[i](context, extra);\n          if(!_$9.equals(splice, prev[i])){\n             equal = false;\n             prev[i] = _$9.clone(splice);\n          }\n        }\n        return equal? false: prev;\n      };\n    }else{\n      if(typeof expr === 'function'){\n        get = expr.bind(this);      \n      }else{\n        expr = this._touchExpr( parseExpression(expr) );\n        get = expr.get;\n        once = expr.once;\n      }\n    }\n\n    var watcher = {\n      id: uid, \n      get: get, \n      fn: fn, \n      once: once, \n      force: options.force,\n      // don't use ld to resolve array diff\n      diff: options.diff,\n      test: test,\n      deep: options.deep,\n      last: options.sync? get(this): options.last\n    };\n\n\n    this[options.stable? '_watchersForStable': '_watchers'].push(watcher);\n    \n    rlen = this._records && this._records.length;\n    if(rlen) { this._records[rlen-1].push(watcher); }\n    // init state.\n    if(options.init === true){\n      var prephase = this.$phase;\n      this.$phase = 'digest';\n      this._checkSingleWatch( watcher);\n      this.$phase = prephase;\n    }\n    return watcher;\n  },\n  $unwatch: function( watcher ){\n    var this$1 = this;\n\n    if(!this._watchers || !watcher) { return; }\n    var watchers = this._watchers;\n    var type = typeof watcher;\n\n    if(type === 'object'){\n      var len = watcher.length;\n      if(!len){\n        watcher.removed = true;\n      }else{\n        while( (len--) >= 0 ){\n          this$1.$unwatch(watcher[len]);\n        }\n      }\n    }else if(type === 'number'){\n      var id = watcher;\n      watcher =  _$9.findItem( watchers, function(item){\n        return item.id === id;\n      } );\n      if(!watcher) { watcher = _$9.findItem(this._watchersForStable, function( item ){\n        return item.id === id\n      }); }\n      return this.$unwatch(watcher);\n    }\n    return this;\n  },\n  $expression: function(value){\n    return this._touchExpr(parseExpression(value))\n  },\n  /**\n   * the whole digest loop ,just like angular, it just a dirty-check loop;\n   * @param  {String} path  now regular process a pure dirty-check loop, but in parse phase, \n   *                  Regular's parser extract the dependencies, in future maybe it will change to dirty-check combine with path-aware update;\n   * @return {Void}   \n   */\n\n  $digest: function(){\n    if(this.$phase === 'digest' || this._mute) { return; }\n    this.$phase = 'digest';\n    var dirty = false, n =0;\n    while(dirty = this._digest()){\n\n      if((++n) > 20){ // max loop\n        throw Error('there may a circular dependencies reaches')\n      }\n    }\n    // stable watch is dirty\n    var stableDirty =  this._digest(true);\n\n    if( (n > 0 || stableDirty) && this.$emit) {\n      this.$emit(\"$update\");\n      if (this.devtools) {\n        this.devtools.emit(\"flush\", this);\n      }\n    }\n    this.$phase = null;\n  },\n  // private digest logic\n  _digest: function(stable){\n    var this$1 = this;\n\n\n    var watchers = !stable? this._watchers: this._watchersForStable;\n    var dirty = false, children, watcher, watcherDirty;\n    var len = watchers && watchers.length;\n    if(len){\n      var mark = 0, needRemoved=0;\n      for(var i =0; i < len; i++ ){\n        watcher = watchers[i];\n        var shouldRemove = !watcher ||  watcher.removed;\n        if( shouldRemove ){\n          needRemoved += 1;\n        }else{\n          watcherDirty = this$1._checkSingleWatch(watcher);\n          if(watcherDirty) { dirty = true; }\n        }\n        // remove when encounter first unmoved item or touch the end\n        if( !shouldRemove || i === len-1 ){\n          if( needRemoved ){\n            watchers.splice(mark, needRemoved );          \n            len -= needRemoved;\n            i -= needRemoved;\n            needRemoved = 0;\n          }\n          mark = i+1;\n        }\n      }\n    }\n    // check children's dirty.\n    children = this._children;\n    if(children && children.length){\n      for(var m = 0, mlen = children.length; m < mlen; m++){\n        var child = children[m];\n        if(child && child._digest(stable)) { dirty = true; }\n      }\n    }\n    return dirty;\n  },\n  // check a single one watcher \n  _checkSingleWatch: function(watcher){\n    var dirty = false;\n    if(!watcher) { return; }\n\n    var now, last, tlast, tnow,  eq, diff$$1;\n\n    if(!watcher.test){\n\n      now = watcher.get(this);\n      last = watcher.last;\n\n      if(now !== last || watcher.force){\n        tlast = _$9.typeOf(last);\n        tnow = _$9.typeOf(now);\n        eq = true; \n\n        // !Object\n        if( !(tnow === 'object' && tlast==='object' && watcher.deep) ){\n          // Array\n          if( tnow === 'array' && ( tlast=='undefined' || tlast === 'array') ){\n            diff$$1 = diffArray$1(now, watcher.last || [], watcher.diff);\n            if( tlast !== 'array' || diff$$1 === true || diff$$1.length ) { dirty = true; }\n          }else{\n            eq = _$9.equals( now, last );\n            if( !eq || watcher.force ){\n              watcher.force = null;\n              dirty = true; \n            }\n          }\n        }else{\n          diff$$1 =  diffObject$1( now, last, watcher.diff );\n          if( diff$$1 === true || diff$$1.length ) { dirty = true; }\n        }\n      }\n\n    } else{\n      // @TODO 是否把多重改掉\n      var result = watcher.test(this);\n      if(result){\n        dirty = true;\n        watcher.fn.apply(this, result);\n      }\n    }\n    if(dirty && !watcher.test){\n      if(tnow === 'object' && watcher.deep || tnow === 'array'){\n        watcher.last = _$9.clone(now);\n      }else{\n        watcher.last = now;\n      }\n      watcher.fn.call(this, now, last, diff$$1);\n      if(watcher.once) { this.$unwatch(watcher); }\n    }\n\n    return dirty;\n  },\n\n  /**\n   * **tips**: whatever param you passed in $update, after the function called, dirty-check(digest) phase will enter;\n   * \n   * @param  {Function|String|Expression} path  \n   * @param  {Whatever} value optional, when path is Function, the value is ignored\n   * @return {this}     this \n   */\n  $set: function(path, value){\n    var this$1 = this;\n\n    if(path != null){\n      var type = typeof (path);\n      if( type === 'string' || path.type === 'expression' ){\n        path = this.$expression(path);\n        path.set(this, value);\n      }else if(type === 'function'){\n        path.call(this, this.data);\n      }else{\n        for(var i in path) {\n          this$1.$set(i, path[i]);\n        }\n      }\n    }\n  },\n  // 1. expr canbe string or a Expression\n  // 2. detect: if true, if expr is a string will directly return;\n  $get: function(expr, detect)  {\n    if(detect && typeof expr === 'string') { return expr; }\n    return this.$expression(expr).get(this);\n  },\n  $update: function(){\n    var rootParent = this;\n    do{\n      if(rootParent.data.isolate || !rootParent.$parent) { break; }\n      rootParent = rootParent.$parent;\n    } while(rootParent)\n\n    var prephase =rootParent.$phase;\n    rootParent.$phase = 'digest';\n\n    this.$set.apply(this, arguments);\n\n    rootParent.$phase = prephase;\n\n    rootParent.$digest();\n    return this;\n  },\n  // auto collect watchers for logic-control.\n  _record: function(){\n    if(!this._records) { this._records = []; }\n    this._records.push([]);\n  },\n  _release: function(){\n    return this._records.pop();\n  }\n};\n\n\n_$9.extend(Watcher$1.prototype, methods);\n\n\nWatcher$1.mixTo = function(obj){\n  obj = typeof obj === \"function\" ? obj.prototype : obj;\n  return _$9.extend(obj, methods)\n};\n\nvar watcher = Watcher$1;\n\nvar filter$1 = createCommonjsModule(function (module) {\nvar f = module.exports = {};\n\n// json:  two way \n//  - get: JSON.stringify\n//  - set: JSON.parse\n//  - example: `{ title|json }`\nf.json = {\n  get: function( value ){\n    return typeof JSON !== 'undefined'? JSON.stringify(value): value;\n  },\n  set: function( value ){\n    return typeof JSON !== 'undefined'? JSON.parse(value) : value;\n  }\n};\n\n// last: one-way\n//  - get: return the last item in list\n//  - example: `{ list|last }`\nf.last = function(arr){\n  return arr && arr[arr.length - 1];\n};\n\n// average: one-way\n//  - get: copute the average of the list\n//  - example: `{ list| average: \"score\" }`\nf.average = function(array, key){\n  array = array || [];\n  return array.length? f.total(array, key)/ array.length : 0;\n};\n\n\n// total: one-way\n//  - get: copute the total of the list\n//  - example: `{ list| total: \"score\" }`\nf.total = function(array, key){\n  var total = 0;\n  if(!array) { return; }\n  array.forEach(function( item ){\n    total += key? item[key] : item;\n  });\n  return total;\n};\n\n// var basicSortFn = function(a, b){return b - a}\n\n// f.sort = function(array, key, reverse){\n//   var type = typeof key, sortFn; \n//   switch(type){\n//     case 'function': sortFn = key; break;\n//     case 'string': sortFn = function(a, b){};break;\n//     default:\n//       sortFn = basicSortFn;\n//   }\n//   // need other refernce.\n//   return array.slice().sort(function(a,b){\n//     return reverse? -sortFn(a, b): sortFn(a, b);\n//   })\n//   return array\n// }\n});\n\nvar env$2 = env;\nvar Lexer = Lexer_1;\nvar Parser = Parser_1;\nvar config$3 = config$1;\nvar _$1 = util;\nvar extend$1 = extend$2;\nvar combine = {};\nif(env$2.browser){\n  var dom = dom_1;\n  var walkers = walkers_1;\n  var Group = group;\n  var doc = dom.doc;\n  combine = combine_1;\n}\nvar events = event;\nvar Watcher = watcher;\nvar parse = parse$1;\nvar filter = filter$1;\n\n\n/**\n* `Regular` is regularjs's NameSpace and BaseClass. Every Component is inherited from it\n* \n* @class Regular\n* @module Regular\n* @constructor\n* @param {Object} options specification of the component\n*/\nvar Regular$1 = function(definition, options){\n  var prevRunning = env$2.isRunning;\n  env$2.isRunning = true;\n  var node, template;\n\n  definition = definition || {};\n  var usePrototyeString = typeof this.template === 'string' && !definition.template;\n  options = options || {};\n\n  definition.data = definition.data || {};\n  definition.computed = definition.computed || {};\n  if( this.data ) { _$1.extend( definition.data, this.data ); }\n  if( this.computed ) { _$1.extend( definition.computed, this.computed ); }\n\n  var listeners = this._eventListeners || [];\n  var normListener;\n  // hanle initialized event binding\n  if( definition.events){\n    normListener = _$1.normListener(definition.events);\n    if(normListener.length){\n      listeners = listeners.concat(normListener);\n    }\n    delete definition.events;\n  }\n\n  _$1.extend(this, definition, true);\n\n  if(this.$parent){\n     this.$parent._append(this);\n  }\n  this._children = [];\n  this.$refs = {};\n\n  template = this.template;\n\n  // template is a string (len < 16). we will find it container first\n  if((typeof template === 'string' && template.length < 16) && (node = dom.find(template))) {\n    template = node.innerHTML;\n  }\n  // if template is a xml\n  if(template && template.nodeType) { template = template.innerHTML; }\n  if(typeof template === 'string') {\n    template = new Parser(template).parse();\n    if(usePrototyeString) {\n    // avoid multiply compile\n      this.constructor.prototype.template = template;\n    }else{\n      delete this.template;\n    }\n  }\n\n  this.computed = handleComputed(this.computed);\n  this.$root = this.$root || this;\n  // if have events\n\n  if(listeners && listeners.length){\n    listeners.forEach(function( item ){\n      this.$on(item.type, item.listener);\n    }.bind(this));\n  }\n  this.$emit(\"$config\");\n  this.config && this.config(this.data);\n  this.$emit(\"$afterConfig\");\n\n  var body = this._body;\n  this._body = null;\n\n  if(body && body.ast && body.ast.length){\n    this.$body = _$1.getCompileFn(body.ast, body.ctx , {\n      outer: this,\n      namespace: options.namespace,\n      extra: options.extra,\n      record: true\n    });\n  }\n  // handle computed\n  if(template){\n    this.group = this.$compile(template, {namespace: options.namespace});\n    combine.node(this);\n  }\n\n\n  if(!this.$parent) { this.$update(); }\n  this.$ready = true;\n  this.$emit(\"$init\");\n  if( this.init ) { this.init(this.data); }\n  this.$emit(\"$afterInit\");\n\n  // @TODO: remove, maybe , there is no need to update after init; \n  // if(this.$root === this) this.$update();\n  env$2.isRunning = prevRunning;\n\n  // children is not required;\n  \n  if (this.devtools) {\n    this.devtools.emit(\"init\", this);\n  }\n};\n\n// check if regular devtools hook exists\nvar devtools = window.__REGULAR_DEVTOOLS_GLOBAL_HOOK__;\nif (devtools) {\n  Regular$1.prototype.devtools = devtools;\n}\n\nwalkers && (walkers.Regular = Regular$1);\n\n\n// description\n// -------------------------\n// 1. Regular and derived Class use same filter\n_$1.extend(Regular$1, {\n  // private data stuff\n  _directives: { __regexp__:[] },\n  _plugins: {},\n  _protoInheritCache: [ 'directive', 'use'] ,\n  __after__: function(supr, o) {\n\n    var template;\n    this.__after__ = supr.__after__;\n\n    // use name make the component global.\n    if(o.name) { Regular$1.component(o.name, this); }\n    // this.prototype.template = dom.initTemplate(o)\n    if(template = o.template){\n      var node, name;\n      if( typeof template === 'string' && template.length < 16 && ( node = dom.find( template )) ){\n        template = node ;\n      }\n\n      if(template && template.nodeType){\n        if(name = dom.attr(template, 'name')) { Regular$1.component(name, this); }\n        template = template.innerHTML;\n      } \n\n      if(typeof template === 'string' ){\n        this.prototype.template = config$3.PRECOMPILE? new Parser(template).parse(): template;\n      }\n    }\n\n    if(o.computed) { this.prototype.computed = handleComputed(o.computed); }\n    // inherit directive and other config from supr\n    Regular$1._inheritConfig(this, supr);\n\n  },\n  /**\n   * Define a directive\n   *\n   * @method directive\n   * @return {Object} Copy of ...\n   */  \n  directive: function(name, cfg){\n    var this$1 = this;\n\n    if(!name) { return; }\n\n    var type = typeof name;\n    if(type === 'object' && !cfg){\n      for(var k in name){\n        if(name.hasOwnProperty(k)) { this$1.directive(k, name[k]); }\n      }\n      return this;\n    }\n    var directives = this._directives, directive;\n    if(cfg == null){\n      if( type === 'string' ){\n        if(directive = directives[name]) { return directive; }\n        else{\n\n          var regexp = directives.__regexp__;\n          for(var i = 0, len = regexp.length; i < len ; i++){\n            directive = regexp[i];\n            var test = directive.regexp.test(name);\n            if(test) { return directive; }\n          }\n        }\n      }\n    }else{\n      if( typeof cfg === 'function') { cfg = { link: cfg }; } \n      if( type === 'string' ) { directives[name] = cfg; }\n      else{\n        cfg.regexp = name;\n        directives.__regexp__.push(cfg);\n      }\n      return this\n    }\n  },\n  plugin: function(name, fn){\n    var plugins = this._plugins;\n    if(fn == null) { return plugins[name]; }\n    plugins[name] = fn;\n    return this;\n  },\n  use: function(fn){\n    if(typeof fn === \"string\") { fn = Regular$1.plugin(fn); }\n    if(typeof fn !== \"function\") { return this; }\n    fn(this, Regular$1);\n    return this;\n  },\n  // config the Regularjs's global\n  config: function(name, value){\n    var needGenLexer = false;\n    if(typeof name === \"object\"){\n      for(var i in name){\n        // if you config\n        if( i ===\"END\" || i==='BEGIN' )  { needGenLexer = true; }\n        config$3[i] = name[i];\n      }\n    }\n    if(needGenLexer) { Lexer.setup(); }\n  },\n  expression: parse.expression,\n  Parser: Parser,\n  Lexer: Lexer,\n  _addProtoInheritCache: function(name, transform){\n    if( Array.isArray( name ) ){\n      return name.forEach(Regular$1._addProtoInheritCache);\n    }\n    var cacheKey = \"_\" + name + \"s\";\n    Regular$1._protoInheritCache.push(name);\n    Regular$1[cacheKey] = {};\n    if(Regular$1[name]) { return; }\n    Regular$1[name] = function(key, cfg){\n      var this$1 = this;\n\n      var cache = this[cacheKey];\n\n      if(typeof key === \"object\"){\n        for(var i in key){\n          if(key.hasOwnProperty(i)) { this$1[name](i, key[i]); }\n        }\n        return this;\n      }\n      if(cfg == null) { return cache[key]; }\n      cache[key] = transform? transform(cfg) : cfg;\n      return this;\n    };\n  },\n  _inheritConfig: function(self, supr){\n\n    // prototype inherit some Regular property\n    // so every Component will have own container to serve directive, filter etc..\n    var defs = Regular$1._protoInheritCache;\n    var keys = _$1.slice(defs);\n    keys.forEach(function(key){\n      self[key] = supr[key];\n      var cacheKey = '_' + key + 's';\n      if(supr[cacheKey]) { self[cacheKey] = _$1.createObject(supr[cacheKey]); }\n    });\n    return self;\n  }\n\n});\n\nextend$1(Regular$1);\n\nRegular$1._addProtoInheritCache(\"component\");\n\nRegular$1._addProtoInheritCache(\"filter\", function(cfg){\n  return typeof cfg === \"function\"? {get: cfg}: cfg;\n});\n\n\nevents.mixTo(Regular$1);\nWatcher.mixTo(Regular$1);\n\nRegular$1.implement({\n  init: function(){},\n  config: function(){},\n  destroy: function(){\n    // destroy event wont propgation;\n    this.$emit(\"$destroy\");\n    this._watchers = null;\n    this.group && this.group.destroy(true);\n    this.group = null;\n    this.parentNode = null;\n    this._children = null;\n    this.$root = null;\n    this._handles = null;\n    this.$refs = null;\n    var parent = this.$parent;\n    if(parent && parent._children){\n      var index = parent._children.indexOf(this);\n      parent._children.splice(index,1);\n    }\n    this.$parent = null;\n\n    if (this.devtools) {\n      this.devtools.emit(\"destroy\", this);\n    }\n  },\n\n  /**\n   * compile a block ast ; return a group;\n   * @param  {Array} parsed ast\n   * @param  {[type]} record\n   * @return {[type]}\n   */\n  $compile: function(ast, options){\n    options = options || {};\n    if(typeof ast === 'string'){\n      ast = new Parser(ast).parse();\n    }\n    var preExt = this.__ext__,\n      record = options.record, \n      records;\n\n    if(options.extra) { this.__ext__ = options.extra; }\n\n    if(record) { this._record(); }\n    var group$$1 = this._walk(ast, options);\n    if(record){\n      records = this._release();\n      var self = this;\n      if(records.length){\n        // auto destroy all wather;\n        group$$1.ondestroy = function(){ self.$unwatch(records); };\n      }\n    }\n    if(options.extra) { this.__ext__ = preExt; }\n    return group$$1;\n  },\n\n\n  /**\n   * create two-way binding with another component;\n   * *warn*: \n   *   expr1 and expr2 must can operate set&get, for example: the 'a.b' or 'a[b + 1]' is set-able, but 'a.b + 1' is not, \n   *   beacuse Regular dont know how to inverse set through the expression;\n   *   \n   *   if before $bind, two component's state is not sync, the component(passed param) will sync with the called component;\n   *\n   * *example: *\n   *\n   * ```javascript\n   * // in this example, we need to link two pager component\n   * var pager = new Pager({}) // pager compoennt\n   * var pager2 = new Pager({}) // another pager component\n   * pager.$bind(pager2, 'current'); // two way bind throw two component\n   * pager.$bind(pager2, 'total');   // \n   * // or just\n   * pager.$bind(pager2, {\"current\": \"current\", \"total\": \"total\"}) \n   * ```\n   * \n   * @param  {Regular} component the\n   * @param  {String|Expression} expr1     required, self expr1 to operate binding\n   * @param  {String|Expression} expr2     optional, other component's expr to bind with, if not passed, the expr2 will use the expr1;\n   * @return          this;\n   */\n  $bind: function(component, expr1, expr2){\n    var this$1 = this;\n\n    var type = _$1.typeOf(expr1);\n    if( expr1.type === 'expression' || type === 'string' ){\n      this._bind(component, expr1, expr2);\n    }else if( type === \"array\" ){ // multiply same path binding through array\n      for(var i = 0, len = expr1.length; i < len; i++){\n        this$1._bind(component, expr1[i]);\n      }\n    }else if(type === \"object\"){\n      for(var i in expr1) { if(expr1.hasOwnProperty(i)){\n        this$1._bind(component, i, expr1[i]);\n      } }\n    }\n    // digest\n    component.$update();\n    return this;\n  },\n  /**\n   * unbind one component( see $bind also)\n   *\n   * unbind will unbind all relation between two component\n   * \n   * @param  {Regular} component [descriptionegular\n   * @return {This}    this\n   */\n  $unbind: function(){\n    // todo\n  },\n  $inject: combine.inject,\n  $mute: function(isMute){\n\n    isMute = !!isMute;\n\n    var needupdate = isMute === false && this._mute;\n\n    this._mute = !!isMute;\n\n    if(needupdate) { this.$update(); }\n    return this;\n  },\n  // private bind logic\n  _bind: function(component, expr1, expr2){\n\n    var self = this;\n    // basic binding\n\n    if(!component || !(component instanceof Regular$1)) { throw \"$bind() should pass Regular component as first argument\"; }\n    if(!expr1) { throw \"$bind() should  pass as least one expression to bind\"; }\n\n    if(!expr2) { expr2 = expr1; }\n\n    expr1 = parse.expression( expr1 );\n    expr2 = parse.expression( expr2 );\n\n    // set is need to operate setting ;\n    if(expr2.set){\n      var wid1 = this.$watch( expr1, function(value){\n        component.$update(expr2, value);\n      });\n      component.$on('$destroy', function(){\n        self.$unwatch(wid1);\n      });\n    }\n    if(expr1.set){\n      var wid2 = component.$watch(expr2, function(value){\n        self.$update(expr1, value);\n      });\n      // when brother destroy, we unlink this watcher\n      this.$on('$destroy', component.$unwatch.bind(component,wid2));\n    }\n    // sync the component's state to called's state\n    expr2.set(component, expr1.get(this));\n  },\n  _walk: function(ast, opt){\n    var this$1 = this;\n\n    if( Array.isArray(ast)  ){\n      var len = ast.length;\n      if(!len) { return; }\n      var res = [];\n      for(var i = 0; i < len; i++){\n        var ret = this$1._walk(ast[i], opt); \n        if(ret) { res.push( ret ); }\n      }\n      return new Group(res);\n    }\n    if(typeof ast === 'string') { return doc.createTextNode(ast) }\n    return walkers[ast.type || \"default\"].call(this, ast, opt);\n  },\n  _append: function(component){\n    this._children.push(component);\n    component.$parent = this;\n  },\n  _handleEvent: function(elem, type, value, attrs){\n    var Component = this.constructor,\n      fire = typeof value !== \"function\"? _$1.handleEvent.call( this, value, type ) : value,\n      handler = Component.event(type), destroy;\n\n    if ( handler ) {\n      destroy = handler.call(this, elem, fire, attrs);\n    } else {\n      dom.on(elem, type, fire);\n    }\n    return handler ? destroy : function() {\n      dom.off(elem, type, fire);\n    }\n  },\n  // 1. 用来处理exprBody -> Function\n  // 2. list里的循环\n  _touchExpr: function(expr){\n    var  rawget, ext = this.__ext__, touched = {};\n    if(expr.type !== 'expression' || expr.touched) { return expr; }\n\n    rawget = expr.get;\n    if(!rawget){\n      rawget = expr.get = new Function(_$1.ctxName, _$1.extName , _$1.prefix+ \"return (\" + expr.body + \")\");\n      expr.body = null;\n    }\n    touched.get = !ext? rawget: function(context){\n      return rawget(context, ext)\n    };\n\n    if(expr.setbody && !expr.set){\n      var setbody = expr.setbody;\n      var filters = expr.filters;\n      var self = this;\n      if(!filters || !_$1.some(filters, function(filter){ return !self._f_(filter).set }) ){\n        expr.set = function(ctx, value, ext){\n          expr.set = new Function(_$1.ctxName, _$1.setName , _$1.extName, _$1.prefix + setbody);          \n          return expr.set(ctx, value, ext);\n        };\n      }\n      expr.filters = expr.setbody = null;\n    }\n    if(expr.set){\n      touched.set = !ext? expr.set : function(ctx, value){\n        return expr.set(ctx, value, ext);\n      };\n    }\n\n    touched.type = 'expression';\n    touched.touched = true;\n    touched.once = expr.once || expr.constant;\n    return touched\n  },\n  // find filter\n  _f_: function(name){\n    var Component = this.constructor;\n    var filter = Component.filter(name);\n    if(!filter) { throw Error('filter ' + name + ' is undefined'); }\n    return filter;\n  },\n  // simple accessor get\n  _sg_:function(path, defaults, ext){\n    if(typeof ext !== 'undefined'){\n      var computed = this.computed,\n        computedProperty = computed[path];\n      if(computedProperty){\n        if(computedProperty.type==='expression' && !computedProperty.get) { this._touchExpr(computedProperty); }\n        if(computedProperty.get)  { return computedProperty.get(this); }\n        else { _$1.log(\"the computed '\" + path + \"' don't define the get function,  get data.\"+path + \" altnately\", \"warn\"); }\n      }\n  }\n    if(typeof defaults === \"undefined\" || typeof path == \"undefined\" ){\n      return undefined;\n    }\n    return (ext && typeof ext[path] !== 'undefined')? ext[path]: defaults[path];\n\n  },\n  // simple accessor set\n  _ss_:function(path, value, data , op, computed){\n    var computed = this.computed,\n      op = op || \"=\", prev, \n      computedProperty = computed? computed[path]:null;\n\n    if(op !== '='){\n      prev = computedProperty? computedProperty.get(this): data[path];\n      switch(op){\n        case \"+=\":\n          value = prev + value;\n          break;\n        case \"-=\":\n          value = prev - value;\n          break;\n        case \"*=\":\n          value = prev * value;\n          break;\n        case \"/=\":\n          value = prev / value;\n          break;\n        case \"%=\":\n          value = prev % value;\n          break;\n      }\n    }\n    if(computedProperty) {\n      if(computedProperty.set) { return computedProperty.set(this, value); }\n      else { _$1.log(\"the computed '\" + path + \"' don't define the set function,  assign data.\"+path + \" altnately\", \"warn\" ); }\n    }\n    data[path] = value;\n    return value;\n  }\n});\n\nRegular$1.prototype.inject = function(){\n  _$1.log(\"use $inject instead of inject\", \"error\");\n  return this.$inject.apply(this, arguments);\n};\n\n\n// only one builtin filter\n\nRegular$1.filter(filter);\n\nvar Regular_1 = Regular$1;\n\n\n\nvar handleComputed = (function(){\n  // wrap the computed getter;\n  function wrapGet(get){\n    return function(context){\n      return get.call(context, context.data );\n    }\n  }\n  // wrap the computed setter;\n  function wrapSet(set){\n    return function(context, value){\n      set.call( context, value, context.data );\n      return value;\n    }\n  }\n\n  return function(computed){\n    if(!computed) { return; }\n    var parsedComputed = {}, handle, pair, type;\n    for(var i in computed){\n      handle = computed[i];\n      type = typeof handle;\n\n      if(handle.type === 'expression'){\n        parsedComputed[i] = handle;\n        continue;\n      }\n      if( type === \"string\" ){\n        parsedComputed[i] = parse.expression(handle);\n      }else{\n        pair = parsedComputed[i] = {type: 'expression'};\n        if(type === \"function\" ){\n          pair.get = wrapGet(handle);\n        }else{\n          if(handle.get) { pair.get = wrapGet(handle.get); }\n          if(handle.set) { pair.set = wrapSet(handle.set); }\n        }\n      } \n    }\n    return parsedComputed;\n  }\n})();\n\n/**\n * event directive  bundle\n *\n */\nvar _$11 = util;\nvar dom$2 = dom_1;\nvar Regular$2 = Regular_1;\n\nRegular$2._addProtoInheritCache(\"event\");\n\nRegular$2.directive( /^on-\\w+$/, function( elem, value, name , attrs) {\n  if ( !name || !value ) { return; }\n  var type = name.split(\"-\")[1];\n  return this._handleEvent( elem, type, value, attrs );\n});\n// TODO.\n/**\n- $('dx').delegate()\n*/\nRegular$2.directive( /^(delegate|de)-\\w+$/, function( elem, value, name ) {\n  var root = this.$root;\n  var _delegates = root._delegates || ( root._delegates = {} );\n  if ( !name || !value ) { return; }\n  var type = name.split(\"-\")[1];\n  var fire = _$11.handleEvent.call(this, value, type);\n\n  function delegateEvent(ev){\n    matchParent(ev, _delegates[type], root.parentNode);\n  }\n\n  if( !_delegates[type] ){\n    _delegates[type] = [];\n\n    if(root.parentNode){\n      dom$2.on(root.parentNode, type, delegateEvent);\n    }else{\n      root.$on( \"$inject\", function( node, position, preParent ){\n        var newParent = this.parentNode;\n        if( preParent ){\n          dom$2.off(preParent, type, delegateEvent);\n        }\n        if(newParent) { dom$2.on(this.parentNode, type, delegateEvent); }\n      });\n    }\n    root.$on(\"$destroy\", function(){\n      if(root.parentNode) { dom$2.off(root.parentNode, type, delegateEvent); }\n      _delegates[type] = null;\n    });\n  }\n  var delegate = {\n    element: elem,\n    fire: fire\n  };\n  _delegates[type].push( delegate );\n\n  return function(){\n    var delegates = _delegates[type];\n    if(!delegates || !delegates.length) { return; }\n    for( var i = 0, len = delegates.length; i < len; i++ ){\n      if( delegates[i] === delegate ) { delegates.splice(i, 1); }\n    }\n  }\n\n});\n\n\nfunction matchParent(ev , delegates, stop){\n  if(!stop) { return; }\n  var target = ev.target, pair;\n  while(target && target !== stop){\n    for( var i = 0, len = delegates.length; i < len; i++ ){\n      pair = delegates[i];\n      if(pair && pair.element === target){\n        pair.fire(ev);\n      }\n    }\n    target = target.parentNode;\n  }\n}\n\n// Regular\nvar _$12 = util;\nvar dom$3 = dom_1;\nvar Regular$3 = Regular_1;\nvar OPTIONS = _const.OPTIONS;\nvar STABLE = OPTIONS.STABLE;\nvar hasInput;\n\nvar modelHandlers = {\n  \"text\": initText,\n  \"select\": initSelect,\n  \"checkbox\": initCheckBox,\n  \"radio\": initRadio\n};\n\n\n// @TODO\n\n\n// autoUpdate directive for select element\n// to fix r-model issue , when handle dynamic options\n\n\n/**\n * <select r-model={name}> \n *   <r-option value={value} ></r-option>\n * </select>\n */\n\n\n// two-way binding with r-model\n// works on input, textarea, checkbox, radio, select\n\n\nRegular$3.directive(\"r-model\", {\n  param: ['throttle', 'lazy'],\n  link: function( elem, value, name, extra ){\n    var tag = elem.tagName.toLowerCase();\n    var sign = tag;\n    if(sign === \"input\") { sign = elem.type || \"text\"; }\n    else if(sign === \"textarea\") { sign = \"text\"; }\n    if(typeof value === \"string\") { value = this.$expression(value); }\n\n    if( modelHandlers[sign] ) { return modelHandlers[sign].call(this, elem, value, extra); }\n    else if(tag === \"input\"){\n      return modelHandlers.text.call(this, elem, value, extra);\n    }\n  }\n});\n\n\n\n// binding <select>\n\nfunction initSelect( elem, parsed, extra){\n  var self = this;\n  var wc = this.$watch(parsed, function(newValue){\n    var children = elem.getElementsByTagName('option');\n    for(var i =0, len = children.length ; i < len; i++){\n      if(children[i].value == newValue){\n        elem.selectedIndex = i;\n        break;\n      }\n    }\n  }, STABLE);\n\n  function handler(){\n    parsed.set(self, this.value);\n    wc.last = this.value;\n    self.$update();\n  }\n\n  dom$3.on( elem, \"change\", handler );\n  \n  if(parsed.get(self) === undefined && elem.value){\n    parsed.set(self, elem.value);\n  }\n\n  return function destroy(){\n    dom$3.off(elem, \"change\", handler);\n  }\n}\n\n// input,textarea binding\nfunction initText(elem, parsed, extra){\n  var param = extra.param;\n  var throttle, lazy = param.lazy;\n\n  if('throttle' in param){\n    // <input throttle r-model>\n    if(param[throttle] === true){\n      throttle = 400;\n    }else{\n      throttle = parseInt(param.throttle , 10);\n    }\n  }\n\n  var self = this;\n  var wc = this.$watch(parsed, function(newValue){\n    if(elem.value !== newValue) { elem.value = newValue == null? \"\": \"\" + newValue; }\n  }, STABLE);\n\n  // @TODO to fixed event\n  var handler = function (ev){\n    var that = this;\n    if(ev.type==='cut' || ev.type==='paste'){\n      _$12.nextTick(function(){\n        var value = that.value;\n        parsed.set(self, value);\n        wc.last = value;\n        self.$update();\n      });\n    }else{\n        var value = that.value;\n        parsed.set(self, value);\n        wc.last = value;\n        self.$update();\n    }\n  };\n\n  if(throttle && !lazy){\n    var preHandle = handler, tid;\n    handler = _$12.throttle(handler, throttle);\n  }\n\n  if(hasInput === undefined){\n    hasInput = dom$3.msie !== 9 && \"oninput\" in document.createElement('input');\n  }\n\n  if(lazy){\n    dom$3.on(elem, 'change', handler);\n  }else{\n    if( hasInput){\n      elem.addEventListener(\"input\", handler );\n    }else{\n      dom$3.on(elem, \"paste keyup cut change\", handler);\n    }\n  }\n  if(parsed.get(self) === undefined && elem.value){\n     parsed.set(self, elem.value);\n  }\n  return function (){\n    if(lazy) { return dom$3.off(elem, \"change\", handler); }\n    if( hasInput ){\n      elem.removeEventListener(\"input\", handler );\n    }else{\n      dom$3.off(elem, \"paste keyup cut change\", handler);\n    }\n  }\n}\n\n\n// input:checkbox  binding\n\nfunction initCheckBox(elem, parsed){\n  var self = this;\n  var watcher = this.$watch(parsed, function(newValue){\n    dom$3.attr(elem, 'checked', !!newValue);\n  }, STABLE);\n\n  var handler = function handler(){\n    var value = this.checked;\n    parsed.set(self, value);\n    watcher.last = value;\n    self.$update();\n  };\n  if(parsed.set) { dom$3.on(elem, \"change\", handler); }\n\n  if(parsed.get(self) === undefined){\n    parsed.set(self, !!elem.checked);\n  }\n\n  return function destroy(){\n    if(parsed.set) { dom$3.off(elem, \"change\", handler); }\n  }\n}\n\n\n// input:radio binding\n\nfunction initRadio(elem, parsed){\n  var self = this;\n  var wc = this.$watch(parsed, function( newValue ){\n    if(newValue == elem.value) { elem.checked = true; }\n    else { elem.checked = false; }\n  }, STABLE);\n\n\n  var handler = function handler(){\n    var value = this.value;\n    parsed.set(self, value);\n    self.$update();\n  };\n  if(parsed.set) { dom$3.on(elem, \"change\", handler); }\n  // beacuse only after compile(init), the dom structrue is exsit. \n  if(parsed.get(self) === undefined){\n    if(elem.checked) {\n      parsed.set(self, elem.value);\n    }\n  }\n\n  return function destroy(){\n    if(parsed.set) { dom$3.off(elem, \"change\", handler); }\n  }\n}\n\nvar base = createCommonjsModule(function (module) {\n// Regular\nvar _ = util;\nvar dom = dom_1;\nvar animate = animate_1;\nvar Regular = Regular_1;\nvar consts = _const;\nvar namespaces = consts.NAMESPACE;\nvar OPTIONS = consts.OPTIONS;\nvar STABLE = OPTIONS.STABLE;\nvar DEEP_STABLE = {deep: true, stable: true};\n\n\n\n\n\n\n\n\nmodule.exports = {\n// **warn**: class inteplation will override this directive \n  'r-class': function(elem, value){\n\n    if(typeof value=== 'string'){\n      value = _.fixObjStr(value);\n    }\n    var isNotHtml = elem.namespaceURI && elem.namespaceURI !== namespaces.html;\n    this.$watch(value, function(nvalue){\n      var className = isNotHtml? elem.getAttribute('class'): elem.className;\n      className = ' '+ (className||'').replace(/\\s+/g, ' ') +' ';\n      for(var i in nvalue) { if(nvalue.hasOwnProperty(i)){\n        className = className.replace(' ' + i + ' ',' ');\n        if(nvalue[i] === true){\n          className += i+' ';\n        }\n      } }\n      className = className.trim();\n      if(isNotHtml){\n        dom.attr(elem, 'class', className);\n      }else{\n        elem.className = className;\n      }\n    }, DEEP_STABLE);\n  },\n  // **warn**: style inteplation will override this directive \n  'r-style': function(elem, value){\n    if(typeof value=== 'string'){\n      value = _.fixObjStr(value);\n    }\n    this.$watch(value, function(nvalue){\n      for(var i in nvalue) { if(nvalue.hasOwnProperty(i)){\n        dom.css(elem, i, nvalue[i]);\n      } }\n    },DEEP_STABLE);\n  },\n  // when expression is evaluate to true, the elem will add display:none\n  // Example: <div r-hide={{items.length > 0}}></div>\n  'r-hide': function(elem, value){\n    var preBool = null, compelete;\n    if( _.isExpr(value) || typeof value === \"string\"){\n      this.$watch(value, function(nvalue){\n        var bool = !!nvalue;\n        if(bool === preBool) { return; } \n        preBool = bool;\n        if(bool){\n          if(elem.onleave){\n            compelete = elem.onleave(function(){\n              elem.style.display = \"none\";\n              compelete = null;\n            });\n          }else{\n            elem.style.display = \"none\";\n          }\n          \n        }else{\n          if(compelete) { compelete(); }\n          elem.style.display = \"\";\n          if(elem.onenter){\n            elem.onenter();\n          }\n        }\n      }, STABLE);\n    }else if(!!value){\n      elem.style.display = \"none\";\n    }\n  },\n  'r-html': function(elem, value){\n    this.$watch(value, function(nvalue){\n      nvalue = nvalue || \"\";\n      dom.html(elem, nvalue);\n    }, {force: true, stable: true});\n  },\n  'ref': {\n    accept: consts.COMPONENT_TYPE + consts.ELEMENT_TYPE,\n    link: function( elem, value ){\n      var refs = this.$refs || (this.$refs = {});\n      var cval;\n      if(_.isExpr(value)){\n        this.$watch(value, function(nval, oval){\n          cval = nval;\n          if(refs[oval] === elem) { refs[oval] = null; }\n          if(cval) { refs[cval] = elem; }\n        }, STABLE);\n      }else{\n        refs[cval = value] = elem;\n      }\n      return function(){\n        refs[cval] = null;\n      }\n    }\n  }\n};\n\nRegular.directive(module.exports);\n});\n\nvar _$13 = util;\nvar animate$1 = animate_1;\nvar Regular$4 = Regular_1;\n\n\nvar rSpace = /\\s+/;\nvar WHEN_COMMAND = \"when\";\nvar EVENT_COMMAND = \"on\";\n\n/**\n * Animation Plugin\n * @param {Component} Component \n */\n\n\nfunction createSeed(type){\n\n  var steps = [], current = 0, callback = _$13.noop;\n  var key;\n\n  var out = {\n    type: type,\n    start: function(cb){\n      key = _$13.uid();\n      if(typeof cb === \"function\") { callback = cb; }\n      if(current> 0 ){\n        current = 0 ;\n      }else{\n        out.step();\n      }\n      return out.compelete;\n    },\n    compelete: function(){\n      key = null;\n      callback && callback();\n      callback = _$13.noop;\n      current = 0;\n    },\n    step: function(){\n      if(steps[current]) { steps[current ]( out.done.bind(out, key) ); }\n    },\n    done: function(pkey){\n      if(pkey !== key) { return; } // means the loop is down\n      if( current < steps.length - 1 ) {\n        current++;\n        out.step();\n      }else{\n        out.compelete();\n      }\n    },\n    push: function(step){\n      steps.push(step);\n    }\n  };\n\n  return out;\n}\n\nRegular$4._addProtoInheritCache(\"animation\");\n\n\n// builtin animation\nRegular$4.animation({\n  \"wait\": function( step ){\n    var timeout = parseInt( step.param ) || 0;\n    return function(done){\n      // _.log(\"delay \" + timeout)\n      setTimeout( done, timeout );\n    }\n  },\n  \"class\": function(step){\n    var tmp = step.param.split(\",\"),\n      className = tmp[0] || \"\",\n      mode = parseInt(tmp[1]) || 1;\n\n    return function(done){\n      // _.log(className)\n      animate$1.startClassAnimate( step.element, className , done, mode );\n    }\n  },\n  \"call\": function(step){\n    var fn = this.$expression(step.param).get, self = this;\n    return function(done){\n      // _.log(step.param, 'call')\n      fn(self);\n      self.$update();\n      done();\n    }\n  },\n  \"emit\": function(step){\n    var param = step.param;\n    var tmp = param.split(\",\"),\n      evt = tmp[0] || \"\",\n      args = tmp[1]? this.$expression(tmp[1]).get: null;\n\n    if(!evt) { throw Error(\"you shoud specified a eventname in emit command\"); }\n\n    var self = this;\n    return function(done){\n      self.$emit(evt, args? args(self) : undefined);\n      done();\n    }\n  },\n  // style: left {10}px,\n  style: function(step){\n    var styles = {}, \n      param = step.param,\n      pairs = param.split(\",\"), valid;\n    pairs.forEach(function(pair){\n      pair = pair.trim();\n      if(pair){\n        var tmp = pair.split( rSpace ),\n          name = tmp.shift(),\n          value = tmp.join(\" \");\n\n        if( !name || !value ) { throw Error(\"invalid style in command: style\"); }\n        styles[name] = value;\n        valid = true;\n      }\n    });\n\n    return function(done){\n      if(valid){\n        animate$1.startStyleAnimate(step.element, styles, done);\n      }else{\n        done();\n      }\n    }\n  }\n});\n\n\n\n// hancdle the r-animation directive\n// el : the element to process\n// value: the directive value\nfunction processAnimate( element, value ){\n  var this$1 = this;\n\n  var Component = this.constructor;\n\n  if(_$13.isExpr(value)){\n    value = value.get(this);\n  }\n\n  value = value.trim();\n\n  var composites = value.split(\";\"), \n    composite, context = this, seeds = [], seed, destroies = [], destroy,\n    command, param , current = 0, tmp, animator, self = this;\n\n  function reset( type ){\n    seed && seeds.push( seed );\n    seed = createSeed( type );\n  }\n\n  function whenCallback(start, value){\n    if( !!value ) { start(); }\n  }\n\n  function animationDestroy(element){\n    return function(){\n      element.onenter = null;\n      element.onleave = null;\n    } \n  }\n\n  for( var i = 0, len = composites.length; i < len; i++ ){\n\n    composite = composites[i];\n    tmp = composite.split(\":\");\n    command = tmp[0] && tmp[0].trim();\n    param = tmp[1] && tmp[1].trim();\n\n    if( !command ) { continue; }\n\n    if( command === WHEN_COMMAND ){\n      reset(\"when\");\n      this$1.$watch(param, whenCallback.bind( this$1, seed.start ) );\n      continue;\n    }\n\n    if( command === EVENT_COMMAND){\n      reset(param);\n      if( param === \"leave\" ){\n        element.onleave = seed.start;\n        destroies.push( animationDestroy(element) );\n      }else if( param === \"enter\" ){\n        element.onenter = seed.start;\n        destroies.push( animationDestroy(element) );\n      }else{\n        if( (\"on\" + param) in element){ // if dom have the event , we use dom event\n          destroies.push(this$1._handleEvent( element, param, seed.start ));\n        }else{ // otherwise, we use component event\n          this$1.$on(param, seed.start);\n          destroies.push(this$1.$off.bind(this$1, param, seed.start));\n        }\n      }\n      continue;\n    }\n\n    var animator =  Component.animation(command); \n    if( animator && seed ){\n      seed.push(\n        animator.call(this$1,{\n          element: element,\n          done: seed.done,\n          param: param \n        })\n      );\n    }else{\n      throw Error( animator? \"you should start with `on` or `event` in animation\" : (\"undefined animator 【\" + command +\"】\" ));\n    }\n  }\n\n  if(destroies.length){\n    return function(){\n      destroies.forEach(function(destroy){\n        destroy();\n      });\n    }\n  }\n}\n\n\nRegular$4.directive( \"r-animation\", processAnimate);\nRegular$4.directive( \"r-anim\", processAnimate);\n\nvar Regular$5 = Regular_1;\n\n/**\n * Timeout Module\n * @param {Component} Component \n */\nfunction TimeoutModule(Component){\n\n  Component.implement({\n    /**\n     * just like setTimeout, but will enter digest automately\n     * @param  {Function} fn    \n     * @param  {Number}   delay \n     * @return {Number}   timeoutid\n     */\n    $timeout: function(fn, delay){\n      delay = delay || 0;\n      return setTimeout(function(){\n        fn.call(this);\n        this.$update(); //enter digest\n      }.bind(this), delay);\n    },\n    /**\n     * just like setInterval, but will enter digest automately\n     * @param  {Function} fn    \n     * @param  {Number}   interval \n     * @return {Number}   intervalid\n     */\n    $interval: function(fn, interval){\n      interval = interval || 1000/60;\n      return setInterval(function(){\n        fn.call(this);\n        this.$update(); //enter digest\n      }.bind(this), interval);\n    }\n  });\n}\n\n\nRegular$5.plugin('timeout', TimeoutModule);\nRegular$5.plugin('$timeout', TimeoutModule);\n\nvar index$1 = createCommonjsModule(function (module) {\nvar env$$1 =  env;\nvar config = config$1; \nvar Regular = module.exports = Regular_1;\nvar Parser = Regular.Parser;\nvar Lexer = Regular.Lexer;\n\nif(env$$1.browser){\n    \n    \n    \n    Regular.dom = dom_1;\n}\nRegular.env = env$$1;\nRegular.util = util;\nRegular.parse = function(str, options){\n  options = options || {};\n\n  if(options.BEGIN || options.END){\n    if(options.BEGIN) { config.BEGIN = options.BEGIN; }\n    if(options.END) { config.END = options.END; }\n    Lexer.setup();\n  }\n  var ast = new Parser(str).parse();\n  return !options.stringify? ast : JSON.stringify(ast);\n};\n});\n\nvar eventemitter2 = createCommonjsModule(function (module, exports) {\n/*!\r\n * EventEmitter2\r\n * https://github.com/hij1nx/EventEmitter2\r\n *\r\n * Copyright (c) 2013 hij1nx\r\n * Licensed under the MIT license.\r\n */\r\n!function(undefined) {\r\n\r\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\r\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n  };\r\n  var defaultMaxListeners = 10;\r\n\r\n  function init() {\r\n    this._events = {};\r\n    if (this._conf) {\r\n      configure.call(this, this._conf);\r\n    }\r\n  }\r\n\r\n  function configure(conf) {\r\n    if (conf) {\r\n      this._conf = conf;\r\n\r\n      conf.delimiter && (this.delimiter = conf.delimiter);\r\n      this._events.maxListeners = conf.maxListeners !== undefined ? conf.maxListeners : defaultMaxListeners;\r\n      conf.wildcard && (this.wildcard = conf.wildcard);\r\n      conf.newListener && (this.newListener = conf.newListener);\r\n\r\n      if (this.wildcard) {\r\n        this.listenerTree = {};\r\n      }\r\n    } else {\r\n      this._events.maxListeners = defaultMaxListeners;\r\n    }\r\n  }\r\n\r\n  function logPossibleMemoryLeak(count) {\r\n    console.error('(node) warning: possible EventEmitter memory ' +\r\n      'leak detected. %d listeners added. ' +\r\n      'Use emitter.setMaxListeners() to increase limit.',\r\n      count);\r\n\r\n    if (console.trace){\r\n      console.trace();\r\n    }\r\n  }\r\n\r\n  function EventEmitter(conf) {\r\n    this._events = {};\r\n    this.newListener = false;\r\n    configure.call(this, conf);\r\n  }\r\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\r\n\r\n  //\r\n  // Attention, function return type now is array, always !\r\n  // It has zero elements if no any matches found and one or more\r\n  // elements (leafs) if there are matches\r\n  //\r\n  function searchListenerTree(handlers, type, tree, i) {\r\n    if (!tree) {\r\n      return [];\r\n    }\r\n    var listeners=[], leaf, len, branch, xTree, xxTree, isolatedBranch, endReached,\r\n        typeLength = type.length, currentType = type[i], nextType = type[i+1];\r\n    if (i === typeLength && tree._listeners) {\r\n      //\r\n      // If at the end of the event(s) list and the tree has listeners\r\n      // invoke those listeners.\r\n      //\r\n      if (typeof tree._listeners === 'function') {\r\n        handlers && handlers.push(tree._listeners);\r\n        return [tree];\r\n      } else {\r\n        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\r\n          handlers && handlers.push(tree._listeners[leaf]);\r\n        }\r\n        return [tree];\r\n      }\r\n    }\r\n\r\n    if ((currentType === '*' || currentType === '**') || tree[currentType]) {\r\n      //\r\n      // If the event emitted is '*' at this part\r\n      // or there is a concrete match at this patch\r\n      //\r\n      if (currentType === '*') {\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+1));\r\n          }\r\n        }\r\n        return listeners;\r\n      } else if(currentType === '**') {\r\n        endReached = (i+1 === typeLength || (i+2 === typeLength && nextType === '*'));\r\n        if(endReached && tree._listeners) {\r\n          // The next element has a _listeners, add it to the handlers.\r\n          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\r\n        }\r\n\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            if(branch === '*' || branch === '**') {\r\n              if(tree[branch]._listeners && !endReached) {\r\n                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\r\n              }\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            } else if(branch === nextType) {\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+2));\r\n            } else {\r\n              // No match on this one, shift into the tree but not in the type array.\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            }\r\n          }\r\n        }\r\n        return listeners;\r\n      }\r\n\r\n      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i+1));\r\n    }\r\n\r\n    xTree = tree['*'];\r\n    if (xTree) {\r\n      //\r\n      // If the listener tree will allow any match for this part,\r\n      // then recursively explore all branches of the tree\r\n      //\r\n      searchListenerTree(handlers, type, xTree, i+1);\r\n    }\r\n\r\n    xxTree = tree['**'];\r\n    if(xxTree) {\r\n      if(i < typeLength) {\r\n        if(xxTree._listeners) {\r\n          // If we have a listener on a '**', it will catch all, so add its handler.\r\n          searchListenerTree(handlers, type, xxTree, typeLength);\r\n        }\r\n\r\n        // Build arrays of matching next branches and others.\r\n        for(branch in xxTree) {\r\n          if(branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\r\n            if(branch === nextType) {\r\n              // We know the next element will match, so jump twice.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+2);\r\n            } else if(branch === currentType) {\r\n              // Current node matches, move into the tree.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+1);\r\n            } else {\r\n              isolatedBranch = {};\r\n              isolatedBranch[branch] = xxTree[branch];\r\n              searchListenerTree(handlers, type, { '**': isolatedBranch }, i+1);\r\n            }\r\n          }\r\n        }\r\n      } else if(xxTree._listeners) {\r\n        // We have reached the end and still on a '**'\r\n        searchListenerTree(handlers, type, xxTree, typeLength);\r\n      } else if(xxTree['*'] && xxTree['*']._listeners) {\r\n        searchListenerTree(handlers, type, xxTree['*'], typeLength);\r\n      }\r\n    }\r\n\r\n    return listeners;\r\n  }\r\n\r\n  function growListenerTree(type, listener) {\n    var this$1 = this;\n\r\n\r\n    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n\r\n    //\r\n    // Looks for two consecutive '**', if so, don't add the event at all.\r\n    //\r\n    for(var i = 0, len = type.length; i+1 < len; i++) {\r\n      if(type[i] === '**' && type[i+1] === '**') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var tree = this.listenerTree;\r\n    var name = type.shift();\r\n\r\n    while (name !== undefined) {\r\n\r\n      if (!tree[name]) {\r\n        tree[name] = {};\r\n      }\r\n\r\n      tree = tree[name];\r\n\r\n      if (type.length === 0) {\r\n\r\n        if (!tree._listeners) {\r\n          tree._listeners = listener;\r\n        }\r\n        else {\r\n          if (typeof tree._listeners === 'function') {\r\n            tree._listeners = [tree._listeners];\r\n          }\r\n\r\n          tree._listeners.push(listener);\r\n\r\n          if (\r\n            !tree._listeners.warned &&\r\n            this$1._events.maxListeners > 0 &&\r\n            tree._listeners.length > this$1._events.maxListeners\r\n          ) {\r\n            tree._listeners.warned = true;\r\n            logPossibleMemoryLeak(tree._listeners.length);\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      name = type.shift();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // By default EventEmitters will print a warning if more than\r\n  // 10 listeners are added to it. This is a useful default which\r\n  // helps finding memory leaks.\r\n  //\r\n  // Obviously not all Emitters should be limited to 10. This function allows\r\n  // that to be increased. Set to zero for unlimited.\r\n\r\n  EventEmitter.prototype.delimiter = '.';\r\n\r\n  EventEmitter.prototype.setMaxListeners = function(n) {\r\n    if (n !== undefined) {\r\n      this._events || init.call(this);\r\n      this._events.maxListeners = n;\r\n      if (!this._conf) { this._conf = {}; }\r\n      this._conf.maxListeners = n;\r\n    }\r\n  };\r\n\r\n  EventEmitter.prototype.event = '';\r\n\r\n  EventEmitter.prototype.once = function(event, fn) {\r\n    this.many(event, 1, fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.many = function(event, ttl, fn) {\r\n    var self = this;\r\n\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('many only accepts instances of Function');\r\n    }\r\n\r\n    function listener() {\r\n      if (--ttl === 0) {\r\n        self.off(event, listener);\r\n      }\r\n      fn.apply(this, arguments);\r\n    }\r\n\r\n    listener._origin = fn;\r\n\r\n    this.on(event, listener);\r\n\r\n    return self;\r\n  };\r\n\r\n  EventEmitter.prototype.emit = function() {\n    var arguments$1 = arguments;\n    var this$1 = this;\n\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n      if (!this._events.newListener) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all && this._all.length) {\r\n      handler = this._all.slice();\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 0; j < al; j++) { args[j] = arguments$1[j]; }\r\n      }\r\n\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this$1.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this$1, type);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this$1, type, arguments$1[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this$1, type, arguments$1[1], arguments$1[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this$1, args);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n      if (typeof handler === 'function') {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler.call(this);\r\n          break;\r\n        case 2:\r\n          handler.call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler.call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          args = new Array(al - 1);\r\n          for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\r\n          handler.apply(this, args);\r\n        }\r\n        return true;\r\n      } else if (handler) {\r\n        // need to make copy of handlers because list can change in the middle\r\n        // of emit call\r\n        handler = handler.slice();\r\n      }\r\n    }\r\n\r\n    if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this$1.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this$1);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this$1, arguments$1[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this$1, arguments$1[1], arguments$1[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this$1, args);\r\n        }\r\n      }\r\n      return true;\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        throw arguments[1]; // Unhandled 'error' event\r\n      } else {\r\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return !!this._all;\r\n  };\r\n\r\n  EventEmitter.prototype.emitAsync = function() {\n    var arguments$1 = arguments;\n    var this$1 = this;\n\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n        if (!this._events.newListener) { return Promise.resolve([false]); }\r\n    }\r\n\r\n    var promises= [];\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all) {\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 1; j < al; j++) { args[j] = arguments$1[j]; }\r\n      }\r\n      for (i = 0, l = this._all.length; i < l; i++) {\r\n        this$1.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(this$1._all[i].call(this$1, type));\r\n          break;\r\n        case 2:\r\n          promises.push(this$1._all[i].call(this$1, type, arguments$1[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(this$1._all[i].call(this$1, type, arguments$1[1], arguments$1[2]));\r\n          break;\r\n        default:\r\n          promises.push(this$1._all[i].apply(this$1, args));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n    }\r\n\r\n    if (typeof handler === 'function') {\r\n      this.event = type;\r\n      switch (al) {\r\n      case 1:\r\n        promises.push(handler.call(this));\r\n        break;\r\n      case 2:\r\n        promises.push(handler.call(this, arguments[1]));\r\n        break;\r\n      case 3:\r\n        promises.push(handler.call(this, arguments[1], arguments[2]));\r\n        break;\r\n      default:\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\r\n        promises.push(handler.apply(this, args));\r\n      }\r\n    } else if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this$1.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(handler[i].call(this$1));\r\n          break;\r\n        case 2:\r\n          promises.push(handler[i].call(this$1, arguments$1[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(handler[i].call(this$1, arguments$1[1], arguments$1[2]));\r\n          break;\r\n        default:\r\n          promises.push(handler[i].apply(this$1, args));\r\n        }\r\n      }\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\r\n      } else {\r\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n    }\r\n\r\n    return Promise.all(promises);\r\n  };\r\n\r\n  EventEmitter.prototype.on = function(type, listener) {\r\n    if (typeof type === 'function') {\r\n      this.onAny(type);\r\n      return this;\r\n    }\r\n\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('on only accepts instances of Function');\r\n    }\r\n    this._events || init.call(this);\r\n\r\n    // To avoid recursion in the case that type == \"newListeners\"! Before\r\n    // adding it to the listeners, first emit \"newListeners\".\r\n    this.emit('newListener', type, listener);\r\n\r\n    if (this.wildcard) {\r\n      growListenerTree.call(this, type, listener);\r\n      return this;\r\n    }\r\n\r\n    if (!this._events[type]) {\r\n      // Optimize the case of one listener. Don't need the extra array object.\r\n      this._events[type] = listener;\r\n    }\r\n    else {\r\n      if (typeof this._events[type] === 'function') {\r\n        // Change to array.\r\n        this._events[type] = [this._events[type]];\r\n      }\r\n\r\n      // If we've already got an array, just append.\r\n      this._events[type].push(listener);\r\n\r\n      // Check for listener leak\r\n      if (\r\n        !this._events[type].warned &&\r\n        this._events.maxListeners > 0 &&\r\n        this._events[type].length > this._events.maxListeners\r\n      ) {\r\n        this._events[type].warned = true;\r\n        logPossibleMemoryLeak(this._events[type].length);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.onAny = function(fn) {\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('onAny only accepts instances of Function');\r\n    }\r\n\r\n    if (!this._all) {\r\n      this._all = [];\r\n    }\r\n\r\n    // Add the function to the event listener collection.\r\n    this._all.push(fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\r\n\r\n  EventEmitter.prototype.off = function(type, listener) {\n    var this$1 = this;\n\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('removeListener only takes instances of Function');\r\n    }\r\n\r\n    var handlers,leafs=[];\r\n\r\n    if(this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n    }\r\n    else {\r\n      // does not use listeners(), so no side effect of creating _events[type]\r\n      if (!this._events[type]) { return this; }\r\n      handlers = this._events[type];\r\n      leafs.push({_listeners:handlers});\r\n    }\r\n\r\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n      var leaf = leafs[iLeaf];\r\n      handlers = leaf._listeners;\r\n      if (isArray(handlers)) {\r\n\r\n        var position = -1;\r\n\r\n        for (var i = 0, length = handlers.length; i < length; i++) {\r\n          if (handlers[i] === listener ||\r\n            (handlers[i].listener && handlers[i].listener === listener) ||\r\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\r\n            position = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (position < 0) {\r\n          continue;\r\n        }\r\n\r\n        if(this$1.wildcard) {\r\n          leaf._listeners.splice(position, 1);\r\n        }\r\n        else {\r\n          this$1._events[type].splice(position, 1);\r\n        }\r\n\r\n        if (handlers.length === 0) {\r\n          if(this$1.wildcard) {\r\n            delete leaf._listeners;\r\n          }\r\n          else {\r\n            delete this$1._events[type];\r\n          }\r\n        }\r\n\r\n        this$1.emit(\"removeListener\", type, listener);\r\n\r\n        return this$1;\r\n      }\r\n      else if (handlers === listener ||\r\n        (handlers.listener && handlers.listener === listener) ||\r\n        (handlers._origin && handlers._origin === listener)) {\r\n        if(this$1.wildcard) {\r\n          delete leaf._listeners;\r\n        }\r\n        else {\r\n          delete this$1._events[type];\r\n        }\r\n\r\n        this$1.emit(\"removeListener\", type, listener);\r\n      }\r\n    }\r\n\r\n    function recursivelyGarbageCollect(root) {\r\n      if (root === undefined) {\r\n        return;\r\n      }\r\n      var keys = Object.keys(root);\r\n      for (var i in keys) {\r\n        var key = keys[i];\r\n        var obj = root[key];\r\n        if ((obj instanceof Function) || (typeof obj !== \"object\") || (obj === null))\r\n          { continue; }\r\n        if (Object.keys(obj).length > 0) {\r\n          recursivelyGarbageCollect(root[key]);\r\n        }\r\n        if (Object.keys(obj).length === 0) {\r\n          delete root[key];\r\n        }\r\n      }\r\n    }\r\n    recursivelyGarbageCollect(this.listenerTree);\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.offAny = function(fn) {\n    var this$1 = this;\n\r\n    var i = 0, l = 0, fns;\r\n    if (fn && this._all && this._all.length > 0) {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++) {\r\n        if(fn === fns[i]) {\r\n          fns.splice(i, 1);\r\n          this$1.emit(\"removeListenerAny\", fn);\r\n          return this$1;\r\n        }\r\n      }\r\n    } else {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++)\r\n        { this$1.emit(\"removeListenerAny\", fns[i]); }\r\n      this._all = [];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\r\n\r\n  EventEmitter.prototype.removeAllListeners = function(type) {\r\n    if (arguments.length === 0) {\r\n      !this._events || init.call(this);\r\n      return this;\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n\r\n      for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n        var leaf = leafs[iLeaf];\r\n        leaf._listeners = null;\r\n      }\r\n    }\r\n    else if (this._events) {\r\n      this._events[type] = null;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.listeners = function(type) {\r\n    if (this.wildcard) {\r\n      var handlers = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\r\n      return handlers;\r\n    }\r\n\r\n    this._events || init.call(this);\r\n\r\n    if (!this._events[type]) { this._events[type] = []; }\r\n    if (!isArray(this._events[type])) {\r\n      this._events[type] = [this._events[type]];\r\n    }\r\n    return this._events[type];\r\n  };\r\n\r\n  EventEmitter.prototype.listenerCount = function(type) {\r\n    return this.listeners(type).length;\r\n  };\r\n\r\n  EventEmitter.prototype.listenersAny = function() {\r\n\r\n    if(this._all) {\r\n      return this._all;\r\n    }\r\n    else {\r\n      return [];\r\n    }\r\n\r\n  };\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n     // AMD. Register as an anonymous module.\r\n    define(function() {\r\n      return EventEmitter;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    // CommonJS\r\n    module.exports = EventEmitter;\r\n  }\r\n  else {\r\n    // Browser global.\r\n    window.EventEmitter2 = EventEmitter;\r\n  }\r\n}();\n});\n\n/* eslint-disable guard-for-in */\r\n\r\nvar ALWAYS_NOTIFY_KEY = '_(:з」∠)_';\r\n\r\nvar Store = function Store( app ) {\r\n\tthis._app = app;\r\n\tthis._models = {};\r\n\tthis._modelArray = [];\r\n\tthis._state = {};\r\n\tthis._subscribers = {};\r\n\tthis._subscribers[ ALWAYS_NOTIFY_KEY ] = [];\r\n};\r\nStore.prototype.replaceState = function replaceState ( nextState ) {\r\n\tvar models = this._models;\r\n\tthis._state = nextState;\r\n\tfor ( var i in nextState ) {\r\n\t\tif ( typeof models[ i ] !== 'undefined' ) {\r\n\t\t\tmodels[ i ].replaceState( nextState[ i ] );\r\n\t\t}\r\n\t}\r\n\tthis.notifyViews();\r\n};\r\nStore.prototype.getState = function getState () {\r\n\treturn this._state;\r\n};\r\nStore.prototype.registerModel = function registerModel ( name, model ) {\n\t\tvar this$1 = this;\n\r\n\tthis._models[ name ] = model;\r\n\tthis._modelArray.push( model );\r\n\tthis._state[ name ] = model.state;\r\n\r\n\t// auto subscribe model changes when added\r\n\tmodel.subscribe( function ( type, payload ) {\r\n\t\tthis$1.notify( name, type, payload );\r\n\t} );\r\n};\r\nStore.prototype.registerActions = function registerActions ( actions ) {\r\n\tif ( this._actions ) {\r\n\t\treturn console.error( 'actions already registered' );\r\n\t}\r\n\tthis._actions = actions;\r\n};\r\nStore.prototype._get = function _get ( getterKey ) {\r\n\tvar getters = this._app._getters;\r\n\r\n\tif ( getters && typeof getters[ getterKey ] === 'function' ) {\r\n\t\treturn getters[ getterKey ]( this.getState() );\r\n\t}\r\n\r\n\tconsole.warn( (\"getters or getters[ '\" + getterKey + \"' ] is not defined or not valid\") );\r\n};\r\nStore.prototype._commit = function _commit ( type, payload ) {\r\n\tvar parts = type.split( '/' );\r\n\tvar name = parts[0];\n\t\tvar truetype = parts[1];\r\n\r\n\tvar model = this._models[ name ];\r\n\tif ( model ) {\r\n\t\treturn model.commit( truetype, payload );\r\n\t}\r\n};\r\nStore.prototype.commit = function commit () {\n\t\tvar args = [], len = arguments.length;\n\t\twhile ( len-- ) args[ len ] = arguments[ len ];\n\r\n\treturn (ref = this)._commit.apply( ref, args );\n\t\tvar ref;\r\n};\r\nStore.prototype.dispatch = function dispatch ( type, payload ) {\r\n\tif ( !this._actions[ type ] ) {\r\n\t\treturn console.error( (\"action \\\"\" + type + \"\\\" is not found\") );\r\n\t}\r\n\treturn this._actions[ type ]( {\r\n\t\tget: this._get.bind( this ),\r\n\t\tcommit: this._commit.bind( this ),\r\n\t\tdispatch: this.dispatch.bind( this ),\r\n\t}, payload );\r\n};\r\nStore.prototype.notify = function notify ( name, type, payload ) {\r\n\tvar cbs = ( this._subscribers[ name ] || [] ).concat( this._subscribers[ ALWAYS_NOTIFY_KEY ] );\r\n\tvar state = this._state;\r\n\tfor ( var i = 0, len = cbs.length; i < len; i++ ) {\r\n\t\tvar cb = cbs[ i ];\r\n\t\tcb( { type: (name + \"/\" + type), payload: payload }, state );\r\n\t}\r\n};\r\nStore.prototype.notifyViews = function notifyViews () {\n\t\tvar this$1 = this;\n\r\n\tvar cbs = [];\r\n\tfor ( var i in this._subscribers ) {\r\n\t\tcbs = cbs.concat( this$1._subscribers[ i ] );\r\n\t}\r\n\tfor ( var i$1 = 0, len = cbs.length; i$1 < len; i$1++ ) {\r\n\t\tvar cb = cbs[ i$1 ];\r\n\t\tif ( cb._isFromView ) {\r\n\t\t\tcb();\r\n\t\t}\r\n\t}\r\n};\r\nStore.prototype.subscribe = function subscribe ( fn, names ) {\n\t\tvar this$1 = this;\n\r\n\tif ( !names ) {\r\n\t\tthis._subscribers[ ALWAYS_NOTIFY_KEY ].push( fn );\r\n\t\treturn;\r\n\t}\r\n\r\n\tfor ( var i = 0, len = names.length; i < len; i++ ) {\r\n\t\t\tvar name = names[ i ];\r\n\t\tthis$1._subscribers[ name ] = this$1._subscribers[ name ] || [];\r\n\t\tthis$1._subscribers[ name ].push( fn );\r\n\t}\r\n};\r\nStore.prototype.toArray = function toArray () {\r\n\treturn this._modelArray;\r\n};\n\nvar Model = function Model( ref ) {\n\tif ( ref === void 0 ) ref = {};\n\tvar state = ref.state; if ( state === void 0 ) state = {};\n\tvar reducers = ref.reducers; if ( reducers === void 0 ) reducers = {};\n\r\n\tthis._state = state;\r\n\tthis._reducers = reducers;\r\n\tthis._subscribers = [];\r\n\tthis._committing = false;\r\n};\n\nvar prototypeAccessors = { state: {} };\r\nprototypeAccessors.state.get = function () {\r\n\treturn this._state;\r\n};\r\nprototypeAccessors.state.set = function ( v ) {\r\n\tthrow new Error( 'cannot replace state directly' );\r\n};\r\nModel.prototype.replaceState = function replaceState ( nextState ) {\r\n\tthis._state = nextState;\r\n};\r\nModel.prototype.watch = function watch () {\r\n\r\n};\r\nModel.prototype.subscribe = function subscribe ( fn ) {\r\n\tthis._subscribers.push( fn );\r\n};\r\nModel.prototype.commit = function commit ( type, payload ) {\n\t\tvar this$1 = this;\n\r\n\tif ( this._committing ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// invalid action\r\n\tif ( typeof type !== 'string' ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar reducers = this._reducers;\r\n\tvar state = this._state;\r\n\r\n\tfor ( var i in reducers ) {\r\n\t\tif ( type === i ) {\r\n\t\t\tvar reducer = reducers[ i ];\r\n\t\t\tthis$1._committing = true;\r\n\t\t\treducer( state, payload );\r\n\t\t\tthis$1._committing = false;\r\n\t\t\t// notify subscribers\r\n\t\t\tthis$1.notify( type, payload );\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\nModel.prototype.notify = function notify ( type, payload ) {\r\n\tvar subscribers = this._subscribers;\r\n\tfor ( var i = 0, len = subscribers.length; i < len; i++ ) {\r\n\t\tsubscribers[ i ]( type, payload );\r\n\t}\r\n};\n\nObject.defineProperties( Model.prototype, prototypeAccessors );\n\nvar PulginManager = function PulginManager( app ) {\r\n\tthis._app = app;\r\n};\r\nPulginManager.prototype.register = function register ( plugin ) {\n\t\tvar this$1 = this;\n\r\n\tthis._app.once( 'before-start', function () {\r\n\t\tthis$1.use( plugin );\r\n\t} );\r\n};\r\nPulginManager.prototype.use = function use ( plugin ) {\r\n\tvar Base = this._app._Base;\r\n\tvar store = this._app._store;\r\n\tplugin( Base, store );\r\n};\n\nvar ViewManager = function ViewManager( app ) {\r\n\tvar store = app._store;\r\n\tvar Base = app._Base;\r\n\tBase.implement( {\r\n\t\tevents: {\r\n\t\t\t$config: function $config() {\n\t\t\t\tvar this$1 = this;\n\r\n\t\t\t\t// auto-subscribe\r\n\t\t\t\tvar models = this.models;\r\n\t\t\t\tvar update = function () { return this$1.$update(); };\r\n\r\n\t\t\t\tupdate._isFromView = true;\r\n\t\t\t\tstore.subscribe( update, models );\r\n\t\t\t}\r\n\t\t},\r\n\t\tdispatch: function dispatch() {\n\t\t\tvar args = [], len = arguments.length;\n\t\t\twhile ( len-- ) args[ len ] = arguments[ len ];\n\r\n\t\t\treturn store.dispatch.apply( store, args );\r\n\t\t}\r\n\t} );\r\n};\n\nvar regularRouter = createCommonjsModule(function (module, exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.regularRouter = factory());\n}(commonjsGlobal, (function () { 'use strict';\n\nfunction createCommonjsModule$$1(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar util = createCommonjsModule$$1(function (module) {\nvar _ = module.exports = {};\nvar slice = [].slice, o2str = ({}).toString;\n\n\n// merge o2's properties to Object o1. \n_.extend = function(o1, o2, override){\n  for(var i in o2) { if(override || o1[i] === undefined){\n    o1[i] = o2[i];\n  } }\n  return o1;\n};\n\n\n\n_.slice = function(arr, index){\n  return slice.call(arr, index);\n};\n\n_.typeOf = function typeOf (o) {\n  return o == null ? String(o) : o2str.call(o).slice(8, -1).toLowerCase();\n};\n\n//strict eql\n_.eql = function(o1, o2){\n  var t1 = _.typeOf(o1), t2 = _.typeOf(o2);\n  if( t1 !== t2) { return false; }\n  if(t1 === 'object'){\n    var equal = true;\n    // only check the first's propertie\n    for(var i in o1){\n      if( o1[i] !== o2[i] ) { equal = false; }\n    }\n    return equal;\n  }\n  return o1 === o2;\n};\n\n\n// small emitter \n_.emitable = (function(){\n  function norm(ev){\n    var eventAndNamespace = (ev||'').split(':');\n    return {event: eventAndNamespace[0], namespace: eventAndNamespace[1]}\n  }\n  var API = {\n    once: function(event, fn){\n      var callback = function(){\n        fn.apply(this, arguments);\n        this.off(event, callback);\n      };\n      return this.on(event, callback)\n    },\n    on: function(event, fn) {\n      var this$1 = this;\n\n      if(typeof event === 'object'){\n        for (var i in event) {\n          this$1.on(i, event[i]);\n        }\n        return this;\n      }\n      var ne = norm(event);\n      event=ne.event;\n      if(event && typeof fn === 'function' ){\n        var handles = this._handles || (this._handles = {}),\n          calls = handles[event] || (handles[event] = []);\n        fn._ns = ne.namespace;\n        calls.push(fn);\n      }\n      return this;\n    },\n    off: function(event, fn) {\n      var this$1 = this;\n\n      var ne = norm(event); event = ne.event;\n      if(!event || !this._handles) { this._handles = {}; }\n\n      var handles = this._handles , calls;\n\n      if (calls = handles[event]) {\n        if (!fn && !ne.namespace) {\n          handles[event] = [];\n        }else{\n          for (var i = 0, len = calls.length; i < len; i++) {\n            if ( (!fn || fn === calls[i]) && (!ne.namespace || calls[i]._ns === ne.namespace) ) {\n              calls.splice(i, 1);\n              return this$1;\n            }\n          }\n        }\n      }\n      return this;\n    },\n    emit: function(event){\n      var this$1 = this;\n\n      var ne = norm(event); event = ne.event;\n\n      var args = _.slice(arguments, 1),\n        handles = this._handles, calls;\n\n      if (!handles || !(calls = handles[event])) { return this; }\n      for (var i = 0, len = calls.length; i < len; i++) {\n        var fn = calls[i];\n        if( !ne.namespace || fn._ns === ne.namespace ) { fn.apply(this$1, args); }\n      }\n      return this;\n    }\n  };\n  return function(obj){\n      obj = typeof obj == \"function\" ? obj.prototype : obj;\n      return _.extend(obj, API)\n  }\n})();\n\n\n\n_.bind = function(fn, context){\n  return function(){\n    return fn.apply(context, arguments);\n  }\n};\n\nvar rDbSlash = /\\/+/g, // double slash\n  rEndSlash = /\\/$/;    // end slash\n\n_.cleanPath = function (path){\n  return (\"/\" + path).replace( rDbSlash,\"/\" ).replace( rEndSlash, \"\" ) || \"/\";\n};\n\n// normalize the path\nfunction normalizePath(path) {\n  // means is from \n  // (?:\\:([\\w-]+))?(?:\\(([^\\/]+?)\\))|(\\*{2,})|(\\*(?!\\*)))/g\n  var preIndex = 0;\n  var keys = [];\n  var index = 0;\n  var matches = \"\";\n\n  path = _.cleanPath(path);\n\n  var regStr = path\n    //  :id(capture)? | (capture)   |  ** | * \n    .replace(/\\:([\\w-]+)(?:\\(([^\\/]+?)\\))?|(?:\\(([^\\/]+)\\))|(\\*{2,})|(\\*(?!\\*))/g, \n      function(all, key, keyformat, capture, mwild, swild, startAt) {\n        // move the uncaptured fragment in the path\n        if(startAt > preIndex) { matches += path.slice(preIndex, startAt); }\n        preIndex = startAt + all.length;\n        if( key ){\n          matches += \"(\" + key + \")\";\n          keys.push(key);\n          return \"(\"+( keyformat || \"[\\\\w-]+\")+\")\";\n        }\n        matches += \"(\" + index + \")\";\n\n        keys.push( index++ );\n\n        if( capture ){\n           // sub capture detect\n          return \"(\" + capture +  \")\";\n        } \n        if(mwild) { return \"(.*)\"; }\n        if(swild) { return \"([^\\\\/]*)\"; }\n    });\n\n  if(preIndex !== path.length) { matches += path.slice(preIndex); }\n\n  return {\n    regexp: new RegExp(\"^\" + regStr +\"/?$\"),\n    keys: keys,\n    matches: matches || path\n  }\n}\n\n_.log = function(msg, type){\n  typeof console !== \"undefined\" && console[type || \"log\"](msg);\n};\n\n_.isPromise = function( obj ){\n\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n\n};\n\n\n\n_.normalize = normalizePath;\n});\n\nvar _$1 = util;\n\n\n\nfunction State$1(option){\n  this._states = {};\n  this._pending = false;\n  this.visited = false;\n  if(option) { this.config(option); }\n}\n\n\n//regexp cache\nState$1.rCache = {};\n\n_$1.extend( _$1.emitable( State$1 ), {\n  \n  state: function(stateName, config){\n    var this$1 = this;\n\n    if(_$1.typeOf(stateName) === \"object\"){\n      for(var i in stateName){\n        this$1.state(i, stateName[i]);\n      }\n      return this;\n    }\n    var current, next, nextName, states = this._states, i=0;\n\n    if( typeof stateName === \"string\" ) { stateName = stateName.split(\".\"); }\n\n    var slen = stateName.length, current = this;\n    var stack = [];\n\n\n    do{\n      nextName = stateName[i];\n      next = states[nextName];\n      stack.push(nextName);\n      if(!next){\n        if(!config) { return; }\n        next = states[nextName] = new State$1();\n        _$1.extend(next, {\n          parent: current,\n          manager: current.manager || current,\n          name: stack.join(\".\"),\n          currentName: nextName\n        });\n        current.hasNext = true;\n        next.configUrl();\n      }\n      current = next;\n      states = next._states;\n    }while((++i) < slen )\n\n    if(config){\n       next.config(config);\n       return this;\n    } else {\n      return current;\n    }\n  },\n\n  config: function(configure){\n    var this$1 = this;\n\n\n    configure = this._getConfig(configure);\n\n    for(var i in configure){\n      var prop = configure[i];\n      switch(i){\n        case \"url\": \n          if(typeof prop === \"string\"){\n            this$1.url = prop;\n            this$1.configUrl();\n          }\n          break;\n        case \"events\": \n          this$1.on(prop);\n          break;\n        default:\n          this$1[i] = prop;\n      }\n    }\n  },\n\n  // children override\n  _getConfig: function(configure){\n    return typeof configure === \"function\"? {enter: configure} : configure;\n  },\n\n  //from url \n\n  configUrl: function(){\n    var url = \"\" , base = this, currentUrl;\n    var _watchedParam = [];\n\n    while( base ){\n\n      url = (typeof base.url === \"string\" ? base.url: (base.currentName || \"\")) + \"/\" + url;\n\n      // means absolute;\n      if(url.indexOf(\"^/\") === 0) {\n        url = url.slice(1);\n        break;\n      }\n      base = base.parent;\n    }\n    this.pattern = _$1.cleanPath(\"/\" + url);\n    var pathAndQuery = this.pattern.split(\"?\");\n    this.pattern = pathAndQuery[0];\n    // some Query we need watched\n\n    _$1.extend(this, _$1.normalize(this.pattern), true);\n  },\n  encode: function(param){\n    var state = this;\n    param = param || {};\n    \n    var matched = \"%\";\n\n    var url = state.matches.replace(/\\(([\\w-]+)\\)/g, function(all, capture){\n      var sec = param[capture] || \"\";\n      matched+= capture + \"%\";\n      return sec;\n    }) + \"?\";\n\n    // remained is the query, we need concat them after url as query\n    for(var i in param) {\n      if( matched.indexOf(\"%\"+i+\"%\") === -1) { url += i + \"=\" + param[i] + \"&\"; }\n    }\n    return _$1.cleanPath( url.replace(/(?:\\?|&)$/,\"\") )\n  },\n  decode: function( path ){\n    var matched = this.regexp.exec(path),\n      keys = this.keys;\n\n    if(matched){\n\n      var param = {};\n      for(var i =0,len=keys.length;i<len;i++){\n        param[keys[i]] = matched[i+1]; \n      }\n      return param;\n    }else{\n      return false;\n    }\n  },\n  // by default, all lifecycle is permitted\n\n  async: function(){\n    throw new Error( 'please use option.async instead')\n  }\n\n});\n\n\nvar state = State$1;\n\nvar browser$1 = createCommonjsModule$$1(function (module) {\nvar win = window, \n  doc = document;\n\nvar b = module.exports = {\n  hash: \"onhashchange\" in win && (!doc.documentMode || doc.documentMode > 7),\n  history: win.history && \"onpopstate\" in win,\n  location: win.location,\n  getHref: function(node){\n    return \"href\" in node ? node.getAttribute(\"href\", 2) : node.getAttribute(\"href\");\n  },\n  on: \"addEventListener\" in win ?  // IE10 attachEvent is not working when binding the onpopstate, so we need check addEventLister first\n      function(node,type,cb){return node.addEventListener( type, cb )}\n    : function(node,type,cb){return node.attachEvent( \"on\" + type, cb )},\n    \n  off: \"removeEventListener\" in win ? \n      function(node,type,cb){return node.removeEventListener( type, cb )}\n    : function(node,type,cb){return node.detachEvent( \"on\" + type, cb )}\n};\n});\n\n// MIT\n// Thx Backbone.js 1.1.2  and https://github.com/cowboy/jquery-hashchange/blob/master/jquery.ba-hashchange.js\n// for iframe patches in old ie.\n\nvar browser = browser$1;\nvar _$2 = util;\n\n\n// the mode const\nvar QUIRK = 3;\nvar HASH = 1;\nvar HISTORY = 2;\n\n\n\n// extract History for test\n// resolve the conficlt with the Native History\nfunction Histery$1(options){\n  options = options || {};\n\n  // Trick from backbone.history for anchor-faked testcase \n  this.location = options.location || browser.location;\n\n  // mode config, you can pass absolute mode (just for test);\n  this.html5 = options.html5;\n  this.mode = options.html5 && browser.history ? HISTORY: HASH; \n  if( !browser.hash ) { this.mode = QUIRK; }\n  if(options.mode) { this.mode = options.mode; }\n\n  // hash prefix , used for hash or quirk mode\n  this.prefix = \"#\" + (options.prefix || \"\") ;\n  this.rPrefix = new RegExp(this.prefix + '(.*)$');\n  this.interval = options.interval || 66;\n\n  // the root regexp for remove the root for the path. used in History mode\n  this.root = options.root ||  \"/\" ;\n  this.rRoot = new RegExp(\"^\" +  this.root);\n\n  this._fixInitState();\n\n  this.autolink = options.autolink!==false;\n\n  this.curPath = undefined;\n}\n\n_$2.extend( _$2.emitable(Histery$1), {\n  // check the \n  start: function(){\n    var path = this.getPath();\n    this._checkPath = _$2.bind(this.checkPath, this);\n\n    if( this.isStart ) { return; }\n    this.isStart = true;\n\n    if(this.mode === QUIRK){\n      this._fixHashProbelm(path); \n    }\n\n    switch ( this.mode ){\n      case HASH: \n        browser.on(window, \"hashchange\", this._checkPath); \n        break;\n      case HISTORY:\n        browser.on(window, \"popstate\", this._checkPath);\n        break;\n      case QUIRK:\n        this._checkLoop();\n    }\n    // event delegate\n    this.autolink && this._autolink();\n\n    this.curPath = path;\n\n    this.emit(\"change\", path);\n  },\n  // the history teardown\n  stop: function(){\n\n    browser.off(window, 'hashchange', this._checkPath);  \n    browser.off(window, 'popstate', this._checkPath);  \n    clearTimeout(this.tid);\n    this.isStart = false;\n    this._checkPath = null;\n  },\n  // get the path modify\n  checkPath: function(ev){\n\n    var path = this.getPath(), curPath = this.curPath;\n\n    //for oldIE hash history issue\n    if(path === curPath && this.iframe){\n      path = this.getPath(this.iframe.location);\n    }\n\n    if( path !== curPath ) {\n      this.iframe && this.nav(path, {silent: true});\n      this.curPath = path;\n      this.emit('change', path);\n    }\n  },\n  // get the current path\n  getPath: function(location){\n    var location = location || this.location, tmp;\n    if( this.mode !== HISTORY ){\n      tmp = location.href.match(this.rPrefix);\n      return tmp && tmp[1]? tmp[1]: \"\";\n\n    }else{\n      return _$2.cleanPath(( location.pathname + location.search || \"\" ).replace( this.rRoot, \"/\" ))\n    }\n  },\n\n  nav: function(to, options ){\n\n    var iframe = this.iframe;\n\n    options = options || {};\n\n    to = _$2.cleanPath(to);\n\n    if(this.curPath == to) { return; }\n\n    // pushState wont trigger the checkPath\n    // but hashchange will\n    // so we need set curPath before to forbit the CheckPath\n    this.curPath = to;\n\n    // 3 or 1 is matched\n    if( this.mode !== HISTORY ){\n      this._setHash(this.location, to, options.replace);\n      if( iframe && this.getPath(iframe.location) !== to ){\n        if(!options.replace) { iframe.document.open().close(); }\n        this._setHash(this.iframe.location, to, options.replace);\n      }\n    }else{\n      history[options.replace? 'replaceState': 'pushState']( {}, options.title || \"\" , _$2.cleanPath( this.root + to ) );\n    }\n\n    if( !options.silent ) { this.emit('change', to); }\n  },\n  _autolink: function(){\n    if(this.mode!==HISTORY) { return; }\n    // only in html5 mode, the autolink is works\n    // if(this.mode !== 2) return;\n    var prefix = this.prefix, self = this;\n    browser.on( document.body, \"click\", function(ev){\n\n      var target = ev.target || ev.srcElement;\n      if( target.tagName.toLowerCase() !== \"a\" ) { return; }\n      var tmp = (browser.getHref(target)||\"\").match(self.rPrefix);\n      var hash = tmp && tmp[1]? tmp[1]: \"\";\n\n      if(!hash) { return; }\n      \n      ev.preventDefault && ev.preventDefault();\n      self.nav( hash );\n      return (ev.returnValue = false);\n    } );\n  },\n  _setHash: function(location, path, replace){\n    var href = location.href.replace(/(javascript:|#).*$/, '');\n    if (replace){\n      location.replace(href + this.prefix+ path);\n    }\n    else { location.hash = this.prefix+ path; }\n  },\n  // for browser that not support onhashchange\n  _checkLoop: function(){\n    var self = this; \n    this.tid = setTimeout( function(){\n      self._checkPath();\n      self._checkLoop();\n    }, this.interval );\n  },\n  // if we use real url in hash env( browser no history popstate support)\n  // or we use hash in html5supoort mode (when paste url in other url)\n  // then , histery should repara it\n  _fixInitState: function(){\n    var pathname = _$2.cleanPath(this.location.pathname), hash, hashInPathName;\n\n    // dont support history popstate but config the html5 mode\n    if( this.mode !== HISTORY && this.html5){\n\n      hashInPathName = pathname.replace(this.rRoot, \"\");\n      if(hashInPathName) { this.location.replace(this.root + this.prefix + hashInPathName); }\n\n    }else if( this.mode === HISTORY /* && pathname === this.root*/){\n\n      hash = this.location.hash.replace(this.prefix, \"\");\n      if(hash) { history.replaceState({}, document.title, _$2.cleanPath(this.root + hash)); }\n\n    }\n  },\n  // Thanks for backbone.history and https://github.com/cowboy/jquery-hashchange/blob/master/jquery.ba-hashchange.js\n  // for helping stateman fixing the oldie hash history issues when with iframe hack\n  _fixHashProbelm: function(path){\n    var iframe = document.createElement('iframe'), body = document.body;\n    iframe.src = 'javascript:;';\n    iframe.style.display = 'none';\n    iframe.tabIndex = -1;\n    iframe.title = \"\";\n    this.iframe = body.insertBefore(iframe, body.firstChild).contentWindow;\n    this.iframe.document.open().close();\n    this.iframe.location.hash = '#' + path;\n  }\n  \n});\n\n\n\n\n\nvar histery = Histery$1;\n\nvar State = state;\nvar Histery = histery;\nvar _ = util;\nvar baseTitle = document.title;\nvar stateFn = State.prototype.state;\n\n\nfunction StateMan$1(options){\n\n  if(this instanceof StateMan$1 === false){ return new StateMan$1(options)}\n  options = options || {};\n  // if(options.history) this.history = options.history;\n\n  this._states = {};\n  this._stashCallback = [];\n  this.strict = options.strict;\n  this.current = this.active = this;\n  this.title = options.title;\n  this.on(\"end\", function(){\n    var cur = this.current,title;\n    while( cur ){\n      title = cur.title;\n      if(title) { break; } \n      cur = cur.parent;\n    }\n    document.title = typeof title === \"function\"? cur.title(): String( title || baseTitle ) ;\n  });\n\n}\n\n\n_.extend( _.emitable( StateMan$1 ), {\n    // keep blank\n    name: '',\n\n    state: function(stateName, config){\n\n      var active = this.active;\n      if(typeof stateName === \"string\" && active){\n         stateName = stateName.replace(\"~\", active.name);\n         if(active.parent) { stateName = stateName.replace(\"^\", active.parent.name || \"\"); }\n      }\n      // ^ represent current.parent\n      // ~ represent  current\n      // only \n      return stateFn.apply(this, arguments);\n\n    },\n    start: function(options){\n\n      if( !this.history ) { this.history = new Histery(options); } \n      if( !this.history.isStart ){\n        this.history.on(\"change\", _.bind(this._afterPathChange, this));\n        this.history.start();\n      } \n      return this;\n\n    },\n    stop: function(){\n      this.history.stop();\n    },\n    // @TODO direct go the point state\n    go: function(state$$1, option, callback){\n      option = option || {};\n      if(typeof state$$1 === \"string\") { state$$1 = this.state(state$$1); }\n\n      if(!state$$1) { return; }\n\n      if(typeof option === \"function\"){\n        callback = option;\n        option = {};\n      }\n\n      if(option.encode !== false){\n        var url = state$$1.encode(option.param);\n        option.path = url;\n        this.nav(url, {silent: true, replace: option.replace});\n      }\n\n      this._go(state$$1, option, callback);\n\n      return this;\n    },\n    nav: function(url, options, callback){\n      if(typeof options === \"function\"){\n        callback = options;\n        options = {};\n      }\n      options = options || {};\n\n      options.path = url;\n\n      this.history.nav( url, _.extend({silent: true}, options));\n      if(!options.silent) { this._afterPathChange( _.cleanPath(url) , options , callback); }\n\n      return this;\n    },\n    decode: function(path){\n\n      var pathAndQuery = path.split(\"?\");\n      var query = this._findQuery(pathAndQuery[1]);\n      path = pathAndQuery[0];\n      var state$$1 = this._findState(this, path);\n      if(state$$1) { _.extend(state$$1.param, query); }\n      return state$$1;\n\n    },\n    encode: function(stateName, param){\n      var state$$1 = this.state(stateName);\n      return state$$1? state$$1.encode(param) : '';\n    },\n    // notify specify state\n    // check the active statename whether to match the passed condition (stateName and param)\n    is: function(stateName, param, isStrict){\n      if(!stateName) { return false; }\n      var stateName = (stateName.name || stateName);\n      var current = this.current, currentName = current.name;\n      var matchPath = isStrict? currentName === stateName : (currentName + \".\").indexOf(stateName + \".\")===0;\n      return matchPath && (!param || _.eql(param, this.param)); \n    },\n    // after pathchange changed\n    // @TODO: afterPathChange need based on decode\n    _afterPathChange: function(path, options ,callback){\n\n      this.emit(\"history:change\", path);\n\n      var found = this.decode(path);\n\n      options = options || {};\n\n      options.path = path;\n\n      if(!found){\n        // loc.nav(\"$default\", {silent: true})\n        return this._notfound(options);\n      }\n\n      options.param = found.param;\n\n      this._go( found, options, callback );\n    },\n    _notfound: function(options){\n\n      // var $notfound = this.state(\"$notfound\");\n\n      // if( $notfound ) this._go($notfound, options);\n\n      return this.emit(\"notfound\", options);\n    },\n    // goto the state with some option\n    _go: function(state$$1, option, callback){\n\n      var over;\n\n      // if(typeof state === \"string\") state = this.state(state);\n\n      // if(!state) return _.log(\"destination is not defined\")\n\n      if(state$$1.hasNext && this.strict) { return this._notfound({name: state$$1.name}); }\n\n      // not touch the end in previous transtion\n\n      // if( this.pending ){\n      //   var pendingCurrent = this.pending.current;\n      //   this.pending.stop();\n      //   _.log(\"naving to [\" + pendingCurrent.name + \"] will be stoped, trying to [\"+state.name+\"] now\");\n      // }\n      // if(this.active !== this.current){\n      //   // we need return\n      //   _.log(\"naving to [\" + this.current.name + \"] will be stoped, trying to [\"+state.name+\"] now\");\n      //   this.current = this.active;\n      //   // back to before\n      // }\n      option.param = option.param || {};\n\n      var current = this.current,\n        baseState = this._findBase(current, state$$1),\n        prepath = this.path,\n        self = this;\n\n\n      if( typeof callback === \"function\" ) { this._stashCallback.push(callback); }\n      // if we done the navigating when start\n      function done(success){\n        over = true;\n        if( success !== false ) { self.emit(\"end\"); }\n        self.pending = null;\n        self._popStash(option);\n      }\n      \n      option.previous = current;\n      option.current = state$$1;\n\n      if(current !== state$$1){\n        option.stop = function(){\n          done(false);\n          self.nav( prepath? prepath: \"/\", {silent:true});\n        };\n        self.emit(\"begin\", option);\n\n      }\n      // if we stop it in 'begin' listener\n      if(over === true) { return; }\n\n      if(current !== state$$1){\n        // option as transition object.\n\n        option.phase = 'permission';\n        this._walk(current, state$$1, option, true , _.bind( function( notRejected ){\n\n          if( notRejected===false ){\n            // if reject in callForPermission, we will return to old \n            prepath && this.nav( prepath, {silent: true});\n\n            done(false, 2);\n\n            return this.emit('abort', option);\n\n          } \n\n          // stop previous pending.\n          if(this.pending) { this.pending.stop(); } \n          this.pending = option;\n          this.path = option.path;\n          this.current = option.current;\n          this.param = option.param;\n          this.previous = option.previous;\n          option.phase = 'navigation';\n          this._walk(current, state$$1, option, false, _.bind(function( notRejected ){\n\n            if( notRejected === false ){\n              this.current = this.active;\n              done(false);\n              return this.emit('abort', option);\n            }\n\n\n            this.active = option.current;\n\n            option.phase = 'completion';\n            return done()\n\n          }, this) );\n\n        }, this) );\n\n      }else{\n        self._checkQueryAndParam(baseState, option);\n        this.pending = null;\n        done();\n      }\n      \n    },\n    _popStash: function(option){\n      var this$1 = this;\n\n\n      var stash = this._stashCallback, len = stash.length;\n\n      this._stashCallback = [];\n\n      if(!len) { return; }\n\n      for(var i = 0; i < len; i++){\n        stash[i].call(this$1, option);\n      }\n    },\n\n    // the transition logic  Used in Both canLeave canEnter && leave enter LifeCycle\n\n    _walk: function(from, to, option, callForPermit , callback){\n\n      // nothing -> app.state\n      var parent = this._findBase(from , to);\n\n\n      option.basckward = true;\n      this._transit( from, parent, option, callForPermit , _.bind( function( notRejected ){\n\n        if( notRejected === false ) { return callback( notRejected ); }\n\n        // only actual transiton need update base state;\n        if( !callForPermit )  { this._checkQueryAndParam(parent, option); }\n\n        option.basckward = false;\n        this._transit( parent, to, option, callForPermit,  callback);\n\n      }, this) );\n\n    },\n\n    _transit: function(from, to, option, callForPermit, callback){\n      //  touch the ending\n      if( from === to ) { return callback(); }\n\n      var back = from.name.length > to.name.length;\n      var method = back? 'leave': 'enter';\n      var applied;\n\n      // use canEnter to detect permission\n      if( callForPermit) { method = 'can' + method.replace(/^\\w/, function(a){ return a.toUpperCase() }); }\n\n      var loop = _.bind(function( notRejected ){\n\n\n        // stop transition or touch the end\n        if( applied === to || notRejected === false ) { return callback(notRejected); }\n\n        if( !applied ) {\n\n          applied = back? from : this._computeNext(from, to);\n\n        }else{\n\n          applied = this._computeNext(applied, to);\n        }\n\n        if( (back && applied === to) || !applied ){ return callback( notRejected ) }\n\n        this._moveOn( applied, method, option, loop );\n\n      }, this);\n\n      loop();\n    },\n\n    _moveOn: function( applied, method, option, callback){\n\n      var isDone = false;\n      var isPending = false;\n\n      option.async = function(){\n\n        isPending = true;\n\n        return done;\n      };\n\n      function done( notRejected ){\n        if( isDone ) { return; }\n        isPending = false;\n        isDone = true;\n        callback( notRejected );\n      }\n\n      \n\n      option.stop = function(){\n        done( false );\n      };\n\n\n      this.active = applied;\n      var retValue = applied[method]? applied[method]( option ): true;\n\n      if(method === 'enter') { applied.visited = true; }\n      // promise\n      // need breadk , if we call option.stop first;\n\n      if( _.isPromise(retValue) ){\n\n        return this._wrapPromise(retValue, done); \n\n      }\n\n      // if haven't call option.async yet\n      if( !isPending ) { done( retValue ); }\n\n    },\n\n\n    _wrapPromise: function( promise, next ){\n\n      return promise.then( next, function(){next(false);}) ;\n\n    },\n\n    _computeNext: function( from, to ){\n\n      var fname = from.name;\n      var tname = to.name;\n\n      var tsplit = tname.split('.');\n      var fsplit = fname.split('.');\n\n      var tlen = tsplit.length;\n      var flen = fsplit.length;\n\n      if(fname === '') { flen = 0; }\n      if(tname === '') { tlen = 0; }\n\n      if( flen < tlen ){\n        fsplit[flen] = tsplit[flen];\n      }else{\n        fsplit.pop();\n      }\n\n      return this.state(fsplit.join('.'))\n\n    },\n\n    _findQuery: function(querystr){\n\n      var queries = querystr && querystr.split(\"&\"), query= {};\n      if(queries){\n        var len = queries.length;\n        var query = {};\n        for(var i =0; i< len; i++){\n          var tmp = queries[i].split(\"=\");\n          query[tmp[0]] = tmp[1];\n        }\n      }\n      return query;\n\n    },\n    _findState: function(state$$1, path){\n      var this$1 = this;\n\n      var states = state$$1._states, found, param;\n\n      // leaf-state has the high priority upon branch-state\n      if(state$$1.hasNext){\n        for(var i in states) { if(states.hasOwnProperty(i)){\n          found = this$1._findState( states[i], path );\n          if( found ) { return found; }\n        } }\n      }\n      // in strict mode only leaf can be touched\n      // if all children is don. will try it self\n      param = state$$1.regexp && state$$1.decode(path);\n      if(param){\n        state$$1.param = param;\n        return state$$1;\n      }else{\n        return false;\n      }\n    },\n    // find the same branch;\n    _findBase: function(now, before){\n\n      if(!now || !before || now == this || before == this) { return this; }\n      var np = now, bp = before, tmp;\n      while(np && bp){\n        tmp = bp;\n        while(tmp){\n          if(np === tmp) { return tmp; }\n          tmp = tmp.parent;\n        }\n        np = np.parent;\n      }\n    },\n    // check the query and Param\n    _checkQueryAndParam: function(baseState, options){\n\n      var from = baseState;\n      while( from !== this ){\n        from.update && from.update(options);\n        from = from.parent;\n      }\n\n    }\n\n}, true);\n\n\n\nvar stateman = StateMan$1;\n\nvar StateMan = stateman;\nStateMan.Histery = histery;\nStateMan.util = util;\nStateMan.State = state;\n\nvar index = StateMan;\n\n// import CircularJSON from '../utils/circular-json';\r\n\r\nvar view = function (Component) {\r\n\tvar RouterView = Component.extend( {\r\n\t\tname: 'router-view',\r\n\t\ttemplate: \"\\n\\t\\t\\t<i ref=\\\"v\\\"></i>\\n\\t\\t\",\r\n\t\tconfig: function config() {\r\n\t\t\tthis._commentInserted = false;\r\n\r\n\t\t\tvar $router = this.$router;\r\n\t\t\tvar name = this.data.name || 'default';\r\n\r\n\t\t\t$router.emit( 'add-router-view', {\r\n\t\t\t\tphase: this.$root.__phase__,\r\n\t\t\t\tkey: name,\r\n\t\t\t\tvalue: this\r\n\t\t\t} );\r\n\r\n\t\t\t// console.log( '>', name, CircularJSON.parse( CircularJSON.stringify( $router.current ) ) );\r\n\r\n\t\t\tthis.$mute();\r\n\t\t},\r\n\t\tinit: function init() {\r\n\t\t\tif( !this._comment ) {\r\n\t\t\t\tthis._comment = document.createComment( 'router-view' );\r\n\t\t\t}\r\n\t\t},\r\n\t\tclear: function clear() {\r\n\t\t\tif( this._prevcomponent ) {\r\n\t\t\t\tthis._prevcomponent.$inject( false );\r\n\t\t\t\tthis._prevcomponent.destroy();\r\n\t\t\t}\r\n\t\t},\r\n\t\trender: function render( component ) {\r\n\t\t\tvar comment = this._comment;\r\n\t\t\tif ( !this._commentInserted ) {\r\n\t\t\t\tinsertAfter( comment, this.$refs.v );\r\n\t\t\t\tthis._commentInserted = true;\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.$refs.v && this.$refs.v.parentNode ) {\r\n\t\t\t\tthis.$refs.v.parentNode.removeChild( this.$refs.v );\r\n\t\t\t\tdelete this.$refs.v;\r\n\t\t\t}\r\n\r\n\t\t\tif ( !component ) {\r\n\t\t\t\t// this.clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( comment.parentNode ) {\r\n\t\t\t\tcomponent.$inject( comment, 'after' );\r\n\t\t\t}\r\n\r\n\t\t\tthis._prevcomponent = component;\r\n\t\t}\r\n\t} );\r\n};\r\n\r\nfunction insertAfter( node, refer ) {\r\n\tvar next = refer.nextSibling;\r\n\r\n\tif( next ){\r\n\t\tnext.parentNode.insertBefore( node, next );\r\n\t} else {\r\n\t\trefer.parentNode.appendChild( node );\r\n\t}\r\n}\n\nvar link = function (Regular) {\r\n\tRegular.extend({\r\n\t\tname: 'router-link',\r\n\t\ttemplate: \"\\n\\t\\t\\t<a href=\\\"{ to }\\\">{#inc this.$body}</a>\\n\\t\\t\"\r\n\t});\r\n};\n\n// maybe Regular or extended from Regular, either is ok\r\nvar _Component;\r\n\r\nvar setCtor = function (Component) {\r\n\t_Component = Component;\r\n};\r\n\r\nvar getCtor = function () {\r\n\treturn _Component;\r\n};\n\nfunction each( obj, fn ) {\r\n\tvar keys = Object.keys( obj );\r\n\tfor ( var i = 0, len = keys.length; i < len; i++ ) {\r\n\t\tvar key = keys[ i ];\r\n\t\tfn( obj[ key ], key, obj );\r\n\t}\r\n}\n\nvar id = 0;\r\nfunction walk( obj, fn, name ) {\r\n\teach( obj, function (v) {\r\n\t\tvar currentName = v.name || (\"annoymous_\" + (id++));\r\n\t\tvar path = name ? (name + \".\" + currentName) : currentName;\r\n\t\tfn( v, path );\r\n\t\tif ( v.children ) {\r\n\t\t\twalk( v.children, fn, path );\r\n\t\t}\r\n\t} );\r\n}\n\nfunction digestComponentDeps( routes ) {\r\n\tvar Component = getCtor();\r\n\tvar dirty = false;\r\n\tvar ttl = 20;\r\n\r\n\t// handle components deps\r\n\tfunction walkComponents( extendOptions ) {\r\n\t\t// first and no deps\r\n\t\tif ( !extendOptions.components && !extendOptions._Ctor ) {\r\n\t\t\textendOptions._Ctor = Component.extend( extendOptions );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar cps = extendOptions.components;\r\n\r\n\t\t// deps are ready\r\n\t\tvar isReady = true;\r\n\t\tfor ( var i in cps ) {\r\n\t\t\tif ( !cps[ i ]._Ctor ) {\r\n\t\t\t\tisReady = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( isReady ) {\r\n\t\t\tvar Ctor = Component.extend( extendOptions );\r\n\t\t\t// register component on Ctor\r\n\t\t\tfor ( var i$1 in cps ) {\r\n\t\t\t\tCtor.component( i$1, cps[ i$1 ]._Ctor );\r\n\t\t\t}\r\n\t\t\textendOptions._Ctor = Ctor;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// if exists deps, and deps are not ready, mark as dirty, wait for next digest\r\n\t\tdirty = true;\r\n\r\n\t\tfor ( var i$2 in cps ) {\r\n\t\t\twalkComponents( cps[ i$2 ] );\r\n\t\t}\r\n\t}\r\n\r\n\tfunction digestOne() {\r\n\t\t// reset\r\n\t\tdirty = false;\r\n\r\n\t\twalk( routes, function( route ) {\r\n\t\t\tvar components = route.components || {};\r\n\t\t\t// combine\r\n\t\t\tif ( route.component ) {\r\n\t\t\t\tcomponents[ 'default' ] = route.component;\r\n\t\t\t}\r\n\t\t\tfor ( var i in components ) {\r\n\t\t\t\twalkComponents( components[ i ] );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tttl--;\r\n\r\n\t\tif ( !ttl ) {\r\n\t\t\t// error\r\n\t\t\tthrow new Error( \"components dependencies parse failed\" );\r\n\t\t}\r\n\r\n\t\tif ( dirty && ttl ) {\r\n\t\t\t// next digest\r\n\t\t\tdigestOne();\r\n\t\t}\r\n\t}\r\n\r\n\tdigestOne();\r\n}\n\nvar checkPurview = function ( e, cmd, components, cb ) {\r\n\tvar done = e.async();\r\n\tvar current = e.current;\r\n\tvar go = e.go;\r\n\r\n\tvar len = Object.keys( components ).length;\r\n\r\n\tfunction next() {\r\n\t\tlen--;\r\n\r\n\t\tif( len === 0 ) {\r\n\t\t\tdone();\r\n\t\t\tcb && cb();\r\n\t\t}\r\n\t}\r\n\r\n\tfor ( var i in components ) {\r\n\t\tvar component = components[ i ];\r\n\t\tvar canTransition = component.route && component.route[ cmd ];\r\n\t\tif ( !canTransition ) {\r\n\t\t\tnext();\r\n\t\t} else {\r\n\t\t\tcanTransition( {\r\n\t\t\t\troute: current,\r\n\t\t\t\tredirect: go,\r\n\t\t\t\tnext: next\r\n\t\t\t} );\r\n\t\t}\r\n\t}\r\n};\n\nvar Router = function Router( options ) {\r\n\t// directly call\r\n\tif ( !( this instanceof Router ) ) {\r\n\t\tsetCtor( options );\r\n\t\treturn;\r\n\t}\r\n\r\n\t// new\r\n\tthis._options = options;\r\n};\r\nRouter.prototype.start = function start ( selector ) {\r\n\tvar rootNode =\r\n\t\t( selector && document.querySelector( selector ) ) ||\r\n\t\tdocument.body;\r\n\tvar Component = getCtor();\r\n\r\n\tif ( !Component ) {\r\n\t\tthrow new Error( 'regular-router not initialized yet' );\r\n\t}\r\n\r\n\t// make stateman avaiable for all Regular instances\r\n\tvar stateman = new index();\r\n\tComponent.implement({\r\n\t\t$router: stateman\r\n\t});\r\n\r\n\t// register helper components\r\n\tComponent.use( view );\r\n\tComponent.use( link );\r\n\r\n\t// get routes from options.routes\r\n\tvar ref = this._options;\n\t\tvar routes = ref.routes;\r\n\r\n\t// flat\r\n\tvar routeMap = {};\r\n\twalk( routes, function( route, name ) {\r\n\t\tif ( !~name.indexOf( '.' ) ) {\r\n\t\t\troute.isRootRoute = true;\r\n\t\t}\r\n\t\trouteMap[ name ] = route;\r\n\t} );\r\n\r\n\t// digest components dependencies\r\n\tdigestComponentDeps( routes );\r\n\r\n\tvar routerViewStack = {};\r\n\tstateman.on( {\r\n\t\t'add-router-view': function( ref ) {\n\t\t\t\tvar phase = ref.phase;\n\t\t\t\tvar key = ref.key;\n\t\t\t\tvar value = ref.value;\n\r\n\t\t\trouterViewStack[ phase ] = routerViewStack[ phase ] || {};\r\n\t\t\trouterViewStack[ phase ][ key ] = value;\r\n\t\t},\r\n\t\t// 'purge-router-view': function( { phase } ) {\r\n\t\t// routerViewStack[ phase ] = {};\r\n\t\t// }\r\n\t} );\r\n\r\n\t// transform routes\r\n\tvar transformedRoutes = {};\r\n\tvar loop = function ( name ) {\r\n\t\tvar route = routeMap[ name ];\r\n\t\tvar parentName = name.split( '.' ).slice( 0, -1 ).join( '.' );\r\n\t\tvar component = route.component;\r\n\t\tvar components = route.components || {};\r\n\t\tvar CtorMap = {};\r\n\r\n\t\t// combine\r\n\t\tif ( !components[ 'default' ] && component ) {\r\n\t\t\tcomponents[ 'default' ] = component;\r\n\t\t}\r\n\r\n\t\ttransformedRoutes[ name ] = {\r\n\t\t\turl: route.path || route.url,\r\n\t\t\tupdate: function update( e ) {\r\n\t\t\t\t// reuse, do nothing\r\n\t\t\t},\r\n\t\t\tenter: function enter( e ) {\r\n\t\t\t\tconsole.log( '@@route', name, 'enter' );\r\n\t\t\t\t\t\r\n\t\t\t\tvar current = e.current;\r\n\t\t\t\tvar instanceMap = {};\r\n\r\n\t\t\t\t// initialize component ctors\r\n\t\t\t\tCtorMap[ name ] = {};\r\n\r\n\t\t\t\tfor ( var i in components ) {\r\n\t\t\t\t\tvar cp = components[ i ];\r\n\t\t\t\t\tCtorMap[ name ][ i ] = cp._Ctor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// get instances, and routerViews will be mounted\r\n\t\t\t\tfor ( var i$1 in CtorMap[ name ] ) {\r\n\t\t\t\t\tinstanceMap[ i$1 ] = new CtorMap[ name ][ i$1 ]({\r\n\t\t\t\t\t\t__phase__: name,\r\n\t\t\t\t\t\t__view__: i$1\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar routerViews = routerViewStack[ parentName ];\r\n\r\n\t\t\t\t// render router-view\r\n\t\t\t\tif ( routerViews ) {\r\n\t\t\t\t\tfor ( var i$2 in routerViews ) {\r\n\t\t\t\t\t\tvar routerView = routerViews[ i$2 ];\r\n\t\t\t\t\t\trouterView.render( instanceMap[ i$2 ] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( route.isRootRoute ) {\r\n\t\t\t\t\tinstanceMap[ 'default' ] && instanceMap[ 'default' ].$inject( rootNode );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcanEnter: function canEnter( e ) {\r\n\t\t\t\tcheckPurview( e, 'canEnter', components );\r\n\t\t\t},\r\n\t\t\tcanLeave: function canLeave( e ) {\r\n\t\t\t\tcheckPurview( e, 'canLeave', components );\r\n\t\t\t},\r\n\t\t\tleave: function leave( e ) {\r\n\t\t\t\tconsole.log( '@@route', name, 'leave' );\r\n\r\n\t\t\t\tvar current = e.current;\r\n\t\t\t\tvar routerViews = routerViewStack[ parentName ];\r\n\r\n\t\t\t\t// clean router-view\r\n\t\t\t\tif ( routerViews ) {\r\n\t\t\t\t\tfor ( var i in routerViews ) {\r\n\t\t\t\t\t\tvar routerView = routerViews[ i ];\r\n\t\t\t\t\t\trouterView.clear();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t};\n\n\t\tfor ( var name in routeMap ) { loop( name ); }\r\n\r\n\tstateman.state( transformedRoutes );\r\n\r\n\tstateman.start( {\r\n\t\tprefix: '!'\r\n\t} );\r\n};\n\nreturn Router;\n\n})));\n});\n\n/* eslint-disable guard-for-in */\r\n\r\nvar RouterManager = function RouterManager( app ) {\n\tvar this$1 = this;\n\r\n\tthis._app = app;\r\n\r\n\tvar Base = app._Base;\r\n\tBase.use( regularRouter );\r\n\tapp.once( 'before-start', function () {\r\n\t\tvar getters = app._getters;\r\n\t\tvar options = this$1._options || {};\r\n\t\tvar routes = options.routes;\r\n\t\twalk( routes, function (component) {\r\n\t\t\tvar computed = component.computed;\r\n\t\t\tvar loop = function ( i ) {\r\n\t\t\t\tvar c = computed[ i ];\r\n\t\t\t\tif ( typeof c === 'string' ) {\r\n\t\t\t\t\tif ( getters[ c ] ) {\r\n\t\t\t\t\t\tcomputed[ i ] = function () {\r\n\t\t\t\t\t\t\t// replaceState will replace state reference\r\n\t\t\t\t\t\t\t// so get state in realtime when computes\r\n\t\t\t\t\t\t\tvar state = app._store.getState();\r\n\t\t\t\t\t\t\tif ( getters && typeof getters[ c ] === 'function' ) {\r\n\t\t\t\t\t\t\t\treturn getters[ c ]( state );\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconsole.warn( (\"getters[ '\" + c + \"' ] is not defined or not valid\") );\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete computed[ i ];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\n\n\t\t\tfor ( var i in computed ) loop( i );\r\n\t\t} );\r\n\t} );\r\n};\r\nRouterManager.prototype.set = function set ( options ) {\r\n\tthis._options = options;\r\n};\r\nRouterManager.prototype.start = function start ( selector ) {\r\n\tvar router = new regularRouter( this._options );\r\n\tthis._app.$router = router;\r\n\trouter.start( selector );\r\n};\n\nfunction walk( routes, fn ) {\r\n\tfor ( var i = 0, len = routes.length; i < len; i++ ) {\r\n\t\tvar route = routes[ i ];\r\n\r\n\t\tvar components = route.components || {};\r\n\t\tif ( route.component ) {\r\n\t\t\tcomponents.default = route.component;\r\n\t\t}\r\n\t\twalkComponents( components, fn );\r\n\t\tif ( route.children ) {\r\n\t\t\twalk( route.children, fn );\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction walkComponents( components, fn ) {\r\n\tfor ( var i in components ) {\r\n\t\tvar component = components[ i ];\r\n\t\tfn( component );\r\n\t\tif ( component.components ) {\r\n\t\t\twalkComponents( component.components, fn );\r\n\t\t}\r\n\t}\r\n}\n\n// Credits: vue/vuex\r\n\r\nvar devtoolsPlugin = function () { return function ( Base, store ) {\r\n\tvar devtools = window.__REO_DEVTOOLS_HOOK__;\r\n\r\n\tif ( !devtools ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tstore._devtools = devtools;\r\n\r\n\tdevtools.emit( 'reo:init', store );\r\n\tdevtools.on( 'reo:travel-to-state', function (state) {\r\n\t\tstore.replaceState( state );\r\n\t} );\r\n\r\n\tstore.subscribe( function ( action, state ) {\r\n\t\tdevtools.emit( 'reo:reducer', action, state );\r\n\t} );\r\n}; };\n\nvar App = (function (EventEmitter) {\n\tfunction App() {\r\n\t\tEventEmitter.call(this);\r\n\t\tthis._isRunning = false;\r\n\t\tthis.$store = this._store = new Store( this );\r\n\t\t// extend from regular, so we can isolate from other apps\r\n\t\tthis._Base = index$1.extend();\r\n\t\tthis.managers = {\r\n\t\t\tplugin: new PulginManager( this ),\r\n\t\t\tview: new ViewManager( this ),\r\n\t\t\trouter: new RouterManager( this )\r\n\t\t};\r\n\t\tthis.use( devtoolsPlugin() );\r\n\t}\n\n\tif ( EventEmitter ) App.__proto__ = EventEmitter;\n\tApp.prototype = Object.create( EventEmitter && EventEmitter.prototype );\n\tApp.prototype.constructor = App;\r\n\tApp.prototype.use = function use ( plugin ) {\r\n\t\tthis.managers.plugin.register( plugin );\r\n\t};\r\n\tApp.prototype.model = function model ( ref ) {\n\t\tif ( ref === void 0 ) ref = {};\n\t\tvar name = ref.name;\n\t\tvar state = ref.state; if ( state === void 0 ) state = {};\n\t\tvar reducers = ref.reducers; if ( reducers === void 0 ) reducers = {};\n\r\n\t\tif ( !name ) {\r\n\t\t\tthrow new Error( 'please name your model' );\r\n\t\t}\r\n\r\n\t\tvar model = new Model( { state: state, reducers: reducers } );\r\n\t\tthis._store.registerModel( name, model );\r\n\r\n\t\treturn model;\r\n\t};\r\n\tApp.prototype.actions = function actions ( actions ) {\r\n\t\tthis._store.registerActions( actions );\r\n\t};\r\n\tApp.prototype.getters = function getters ( getters ) {\n\t\tif ( getters === void 0 ) getters = {};\n\r\n\t\tif ( this._getters ) {\r\n\t\t\tthrow new Error( 'getters can only be called once' );\r\n\t\t}\r\n\t\tthis._getters = getters;\r\n\t};\r\n\tApp.prototype.router = function router ( options ) {\r\n\t\tthis.managers.router.set( options );\r\n\t};\r\n\tApp.prototype.start = function start ( selector ) {\r\n\t\tif ( this._isRunning ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._isRunning = true;\r\n\r\n\t\tthis.emit( 'before-start' );\r\n\t\tthis.managers.router.start( selector );\r\n\t\tthis.emit( 'after-start' );\r\n\t};\n\n\treturn App;\n}(eventemitter2));\n\nvar index = function () {\r\n\treturn new App();\r\n};\n\nreturn index;\n\n})));\n"],"names":["global","factory","exports","module","define","amd","reo","this","createCommonjsModule","fn","extend","o1","o2","i","undefined","wrapHander","handler","all","type","value","Lexer$1","input","opts","conflictTag","config$4","END","markStart","markEnd","trim","map","mode","map1","map2","states","expression","push","genMap","rules","rule","sign","len","length","links","setup","replaceFn","one","macro","_$2","escapeRegExp","String","slice","split","trunks","reg","retain","curIndex","j","typeOf","toString","replace","findSubCapture","TRUNK","RegExp","join","Parser$1","tokens","Lexer$2","lex","pos","getset","get","set","wrap","k","supro","tmp","supr","ret","apply","arguments","process","what","o","hasOwnProperty","hooks","isFn","fnTest","test","simpleDiff","now","old","nlen","olen","equals","a","b","ld","array1","array2","equalFn","n","m","matrix","Math","min","diffArray","arr2","arr1","diff","diffFn","edits","current","northWest","west","north","unshift","LEAVE","ADD","DELELE","UPDATE","steps","step","index","add","removed","diffObject","last","nKeys","_$5","keys","lKeys","removeDone","node","callback","dom$1","remove","getMaxTimeout","styles","timeout","tDuration","tDelay","aDuration","aDelay","ratio","window","getComputedStyle","getMaxTime","transitionProperty","animationProperty","max","str","time","maxTimeout","forEach","parseFloat","Group$1","list","children","Event","Watcher$1","matchParent","ev","delegates","stop","pair","target","element","fire","parentNode","initSelect","elem","parsed","extra","self","wc","$update","$watch","newValue","getElementsByTagName","selectedIndex","STABLE","dom$3","on","off","initText","throttle","param","lazy","parseInt","that","_$12","nextTick","hasInput","msie","document","createElement","addEventListener","removeEventListener","initCheckBox","watcher","attr","checked","initRadio","createSeed","key","_$13","noop","out","start","cb","uid","compelete","done","bind","pkey","processAnimate","reset","seed","seeds","whenCallback","animationDestroy","onenter","onleave","this$1","Component","constructor","isExpr","composite","command","animator","composites","destroies","WHEN_COMMAND","EVENT_COMMAND","animation","Error","call","_handleEvent","$on","$off","destroy","TimeoutModule","implement","$timeout","delay","setTimeout","$interval","interval","setInterval","walk","routes","route","components","component","default","walkComponents","commonjsGlobal","tstr","shim","prototype","Array","indexOf","obj","from","ctx","O","Object","TypeError","kValue","filter","fun","context","t","res","val","Function","preArgs","args","concat","isArray","arr","entities","quot","amp","apos","lt","gt","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","fnof","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","bull","hellip","prime","Prime","oline","frasl","weierp","image","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","lang","rang","loz","spades","clubs","hearts","diams","OElig","oelig","Scaron","scaron","Yuml","circ","tilde","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","permil","lsaquo","rsaquo","euro","entities_1","util","log","msg","console","_","o2str","win","MAX_PRIORITY","_uid","override","some","varName","setName","ctxName","extName","rWord","rSimpleAccessor","setImmediate","prefix","end","toLowerCase","makePredicate","words","compareTo","f","cats","sort","cat","trackErrorPos","findLine","lines","tmpLen","lineLen","num","line","prev","next","formatLine","minRange","maxRange","remain","postfix","lb","lastIndex","ignoredRef","regStr","left","right","ignored","match","letter","charAt","rEntity","convertEntity","chr","hex","dec","capture","charCode","fromCharCode","createObject","create","Temp","createProto","Foo","removeOne","splice","clone","cloned","isNaN","dash","camelCase","toUpperCase","func","wait","result","previous","later","Date","remaining","clearTimeout","escape","rAmp","rLt","rGt","rApos","rQuot","hChars","cache","shift","handleEvent","evaluate","data","$event","preventDefault","$emit","once","fixObjStr","array","normListener","events","eventListeners","pType","listener","isVoidTag","isBooleanAttr","expr","isGroup","group","inject","$inject","getCompileFn","source","options","$compile","fixTagAST","tagAST","touched","attrs","directives","otherAttrMap","name","priority","directive","a1","a2","p1","p2","findItem","getParamObj","paramObj","$get","svg","implementation","hasFeature","browser","nodeType","exprCache","isRunning","env","config$1","BEGIN","PRECOMPILE","}","]","NAME","IDENT","SPACE","exec","testSubCapure","lo","mlen","token","state","marks","error","_process","marched","link","enter","leave","pop","ENTER_JST","ENTER_TAG","TEXT","TAG_NAME","TAG_OPEN","TAG_CLOSE","TAG_PUNCHOR","TAG_ENTER_JST","TAG_UNQ_VALUE","TAG_STRING","TAG_SPACE","TAG_COMMENT","JST_OPEN","JST_CLOSE","JST_COMMENT","JST_EXPR_OPEN","JST_IDENT","JST_SPACE","JST_LEAVE","JST_NUMBER","JST_PUNCHOR","JST_STRING","ENTER_JST2","two","firstEnterStart","Lexer_1","node$1","tag","attribute","mdf","if","consequent","alternate","sequence","variable","body","track","setbody","constant","filters","text","template","content","_$3","config$5","isPath","isKeyWord","op","parse","program","ll","la","eat","statements","statement","xml","interplation","selfClosed","xentity","modifier","attvalue","isAttribute","item","inc","include","container","close","depend","buffer","setBuffer","assign","filterName","condition","equal","relation","additive","multive","range","unary","member","base","pathes","prevBase","path","extValue","onlySimpleAccessor","primary","tmpName","object","paren","quota","code","Parser_1","_$4","propertyValue","proto","_eventListeners","normedEvents","merged","extend$2","__after__","_const","COMPONENT_TYPE","ELEMENT_TYPE","NAMESPACE","html","OPTIONS","STABLE_INIT","stable","init","FORCE_INIT","force","INIT","SYNC","sync","FORCE","dom_1","fixEventName","dom","tagName","event","_fixed","srcElement","button","rMouseEvent","pageX","clientX","doc","scrollLeft","pageY","clientY","scrollTop","related","relatedTarget","wheelDelta","detail","which","keyCode","addEvent","removeEvent","env$$1","consts","tNode","namespaces","attachEvent","detachEvent","navigator","userAgent","find","sl","querySelector","e","getElementById","refer","position","fragment","appendChild","firstChild","insertBefore","nextSibling","id","ns","createElementNS","createDocumentFragment","specialAttr","class","namespaceURI","className","setAttribute","for","htmlFor","style","cssText","attributes","getNamedItem","specified","defaultChecked","removeAttribute","getAttribute","types","origin","textProp","innerHTML","replaced","replaceChild","removeChild","css","currentStyle","addClass","delClass","hasClass","compatMode","documentElement","stopPropagation","returnValue","cancelBubble","stopImmediatePropagation","nextFrame","request","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancel","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","webkitCancelRequestAnimationFrame","tid","nextReflow","offsetWidth","_$6","animate","env$3","transitionEnd","animationEnd","appName","direction","count","enterCallback","loop","startClassAnimate","activeClassName","onceAnim","startStyleAnimate","animate_1","combine_1","combine","nodes","preParent","newParent","first","elements","_$7","combine$1","ondestroy","walkers_1","removeRange","rlen","getListFromValue","walkAttributes","bindings","binding","_walk","fromElement","Group","walkers","ast","addRange","newList","rawNewValue","updateTarget","section","namespace","record","outer","insert","group$$1","indexName","keyName","updateRange","updateLD","oldList","splices","minar","tIndex","keyOf","updateSimple","update","oldValue","nType","oType","altGroup","placeholder","extraObj","Regular","createComment","_touchExpr","deep","compiled","ii","nvalue","preValue","createTextNode","newval","eventReg","Constructor","$body","isolate","ref","is","etest","componentName","eventName","reflink","definition","$parent","$root","$outer","_body","$refs","ncomponent","_$8","API","desc","realFn","handles","_handles","calls","$once","mixTo","exprCache$1","Parser$2","parse$1","simple","_$9","parseExpression","diff$2","diffArray$1","diffObject$1","methods","__ext__","_watchers","_watchersForStable","tests","$expression","_records","prephase","$phase","_checkSingleWatch","$unwatch","watchers","$digest","_mute","dirty","_digest","stableDirty","devtools","emit","watcherDirty","mark","needRemoved","shouldRemove","_children","child","tlast","tnow","eq","diff$$1","$set","detect","rootParent","_record","_release","filter$1","json","JSON","stringify","average","total","env$2","Lexer","Parser","config$3","_$1","extend$1","Watcher","Regular$1","prevRunning","usePrototyeString","computed","listeners","_append","handleComputed","config","$ready","__REGULAR_DEVTOOLS_GLOBAL_HOOK__","_directives","__regexp__","_plugins","_protoInheritCache","_inheritConfig","cfg","regexp","plugin","plugins","use","needGenLexer","_addProtoInheritCache","transform","cacheKey","defs","parent","records","preExt","$bind","expr1","expr2","_bind","$unbind","$mute","isMute","needupdate","wid1","wid2","opt","rawget","ext","_f_","_sg_","defaults","computedProperty","_ss_","Regular_1","wrapGet","wrapSet","handle","parsedComputed","_$11","dom$2","Regular$2","delegateEvent","_delegates","root","delegate","Regular$3","modelHandlers","select","checkbox","radio","DEEP_STABLE","r-class","isNotHtml","r-style","r-hide","preBool","bool","display","r-html","accept","cval","refs","nval","oval","animate$1","Regular$4","rSpace","evt","valid","pairs","Regular$5","index$1","eventemitter2","_events","_conf","configure","conf","delimiter","maxListeners","defaultMaxListeners","wildcard","newListener","listenerTree","logPossibleMemoryLeak","trace","EventEmitter","searchListenerTree","handlers","tree","leaf","branch","xTree","xxTree","isolatedBranch","endReached","typeLength","currentType","nextType","_listeners","**","growListenerTree","warned","EventEmitter2","setMaxListeners","many","ttl","_origin","arguments$1","l","al","_all","emitAsync","Promise","resolve","promises","reject","onAny","addListener","recursivelyGarbageCollect","leafs","iLeaf","offAny","fns","removeListener","removeAllListeners","listenerCount","listenersAny","ALWAYS_NOTIFY_KEY","Store","app","_app","_models","_modelArray","_state","_subscribers","replaceState","nextState","models","notifyViews","getState","registerModel","model","subscribe","payload","notify","registerActions","actions","_actions","_get","getterKey","getters","_getters","warn","_commit","parts","truetype","commit","dispatch","cbs","i$1","_isFromView","names","toArray","Model","reducers","_reducers","_committing","prototypeAccessors","v","watch","reducer","subscribers","defineProperties","PulginManager","register","Base","_Base","store","_store","ViewManager","$config","regularRouter","createCommonjsModule$$1","State$1","option","_states","_pending","visited","Histery$1","location","html5","history","HISTORY","HASH","hash","QUIRK","rPrefix","rRoot","_fixInitState","autolink","curPath","StateMan$1","_stashCallback","strict","active","title","cur","baseTitle","insertAfter","each","currentName","digestComponentDeps","extendOptions","_Ctor","cps","isReady","Ctor","i$2","digestOne","getCtor","normalizePath","preIndex","matches","cleanPath","keyformat","mwild","swild","startAt","eql","t1","t2","emitable","norm","eventAndNamespace","_ns","rDbSlash","rEndSlash","isPromise","then","normalize","rCache","stateName","nextName","slen","stack","manager","hasNext","configUrl","_getConfig","url","pattern","pathAndQuery","encode","matched","sec","decode","async","browser$1","documentMode","getHref","getPath","_checkPath","checkPath","isStart","_fixHashProbelm","_checkLoop","_autolink","iframe","nav","silent","href","pathname","search","to","_setHash","open","hashInPathName","src","tabIndex","contentWindow","histery","State","Histery","stateFn","_afterPathChange","go","state$$1","_go","query","_findQuery","_findState","isStrict","matchPath","found","_notfound","success","over","pending","_popStash","baseState","_findBase","prepath","phase","notRejected","_checkQueryAndParam","stash","callForPermit","basckward","_transit","applied","back","method","_computeNext","_moveOn","isDone","isPending","retValue","_wrapPromise","promise","fname","tname","tsplit","fsplit","tlen","flen","querystr","queries","before","np","bp","stateman","StateMan","_Component","view","_commentInserted","$router","__phase__","_comment","clear","_prevcomponent","render","comment","setCtor","checkPurview","cmd","canTransition","redirect","Router","_options","selector","rootNode","routeMap","isRootRoute","routerViewStack","add-router-view","transformedRoutes","parentName","CtorMap","instanceMap","cp","__view__","routerViews","routerView","canEnter","canLeave","RouterManager","c","router","devtoolsPlugin","__REO_DEVTOOLS_HOOK__","_devtools","action","App","_isRunning","$store","managers","__proto__"],"mappings":"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"}